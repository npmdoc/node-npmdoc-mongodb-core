<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/christkv/mongodb-core"

    >mongodb-core (v2.1.10)</a>
</h1>
<h4>Core MongoDB driver functionality, no bells and whistles and meant for integration not end applications</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core">module mongodb-core</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support">
            function <span class="apidocSignatureSpan">mongodb-core.</span>2_4_support
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support">
            function <span class="apidocSignatureSpan">mongodb-core.</span>2_6_support
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support">
            function <span class="apidocSignatureSpan">mongodb-core.</span>3_2_support
            <span class="apidocSignatureSpan">(legacyWireProtocol)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.BSONRegExp">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.BSONRegExp
            <span class="apidocSignatureSpan">(pattern, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Binary
            <span class="apidocSignatureSpan">(buffer, subType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Code">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Code
            <span class="apidocSignatureSpan">(code, scope)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.DBRef">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.DBRef
            <span class="apidocSignatureSpan">(namespace, oid, db)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Decimal128">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Decimal128
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Double">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Double
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Int32">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Int32
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Long
            <span class="apidocSignatureSpan">(low, high)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Map">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Map
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.MaxKey">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.MaxKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.MinKey">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.MinKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.ObjectID
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Symbol
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Timestamp
            <span class="apidocSignatureSpan">(low, high)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Connection
            <span class="apidocSignatureSpan">(messageHandler, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Cursor
            <span class="apidocSignatureSpan">(bson, ns, cmd, options, topology, topologyOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.GSSAPI">
            function <span class="apidocSignatureSpan">mongodb-core.</span>GSSAPI
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Logger
            <span class="apidocSignatureSpan">(className, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoCR">
            function <span class="apidocSignatureSpan">mongodb-core.</span>MongoCR
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoError">
            function <span class="apidocSignatureSpan">mongodb-core.</span>MongoError
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Mongos
            <span class="apidocSignatureSpan">(seedlist, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Plain">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Plain
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Query">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Query
            <span class="apidocSignatureSpan">(bson, ns, query, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReadPreference">
            function <span class="apidocSignatureSpan">mongodb-core.</span>ReadPreference
            <span class="apidocSignatureSpan">(preference, tags, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet">
            function <span class="apidocSignatureSpan">mongodb-core.</span>ReplSet
            <span class="apidocSignatureSpan">(seedlist, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ScramSHA1">
            function <span class="apidocSignatureSpan">mongodb-core.</span>ScramSHA1
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.X509">
            function <span class="apidocSignatureSpan">mongodb-core.</span>X509
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.command_result">
            function <span class="apidocSignatureSpan">mongodb-core.</span>command_result
            <span class="apidocSignatureSpan">(result, connection, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool">
            function <span class="apidocSignatureSpan">mongodb-core.</span>pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state">
            function <span class="apidocSignatureSpan">mongodb-core.</span>replset_state
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.sspi">
            function <span class="apidocSignatureSpan">mongodb-core.</span>sspi
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>2_4_support.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>2_6_support.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>3_2_support.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Binary.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Code.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.DBRef.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Decimal128.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Double.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Int32.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Long.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.ObjectID.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Symbol.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Timestamp.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>BSON.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Connection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Cursor.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>GSSAPI.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Logger.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>MongoCR.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Mongos.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Plain.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Query.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>ReadPreference.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>ReplSet.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>ScramSHA1.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>Server.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>X509.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>command_result.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>commands</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>pool.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>replset_state.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>shared</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>smoke_plugin</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>sspi.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.2_4_support">module mongodb-core.2_4_support</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.2_4_support">
            function <span class="apidocSignatureSpan">mongodb-core.</span>2_4_support
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.2_4_support.prototype">module mongodb-core.2_4_support.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.prototype.command">
            function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>command
            <span class="apidocSignatureSpan">(bson, ns, cmd, cursorState, topology, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.prototype.getMore">
            function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>getMore
            <span class="apidocSignatureSpan">(bson, ns, cursorState, batchSize, raw, connection, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.prototype.insert">
            function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>insert
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.prototype.killCursor">
            function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>killCursor
            <span class="apidocSignatureSpan">(bson, ns, cursorId, pool, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>remove
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_4_support.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>update
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.2_6_support">module mongodb-core.2_6_support</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.2_6_support">
            function <span class="apidocSignatureSpan">mongodb-core.</span>2_6_support
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.2_6_support.prototype">module mongodb-core.2_6_support.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.prototype.command">
            function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>command
            <span class="apidocSignatureSpan">(bson, ns, cmd, cursorState, topology, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.prototype.getMore">
            function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>getMore
            <span class="apidocSignatureSpan">(bson, ns, cursorState, batchSize, raw, connection, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.prototype.insert">
            function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>insert
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.prototype.killCursor">
            function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>killCursor
            <span class="apidocSignatureSpan">(bson, ns, cursorId, pool, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>remove
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.2_6_support.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>update
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.3_2_support">module mongodb-core.3_2_support</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.3_2_support">
            function <span class="apidocSignatureSpan">mongodb-core.</span>3_2_support
            <span class="apidocSignatureSpan">(legacyWireProtocol)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.3_2_support.prototype">module mongodb-core.3_2_support.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.prototype.command">
            function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>command
            <span class="apidocSignatureSpan">(bson, ns, cmd, cursorState, topology, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.prototype.getMore">
            function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>getMore
            <span class="apidocSignatureSpan">(bson, ns, cursorState, batchSize, raw, connection, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.prototype.insert">
            function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>insert
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.prototype.killCursor">
            function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>killCursor
            <span class="apidocSignatureSpan">(bson, ns, cursorId, pool, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>remove
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.3_2_support.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>update
            <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON">module mongodb-core.BSON</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">mongodb-core.BSON.</span>native</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.BSON">
            function <span class="apidocSignatureSpan">mongodb-core.</span>BSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.BSONRegExp">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSONRegExp
            <span class="apidocSignatureSpan">(pattern, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Binary
            <span class="apidocSignatureSpan">(buffer, subType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Code">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Code
            <span class="apidocSignatureSpan">(code, scope)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.DBRef">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>DBRef
            <span class="apidocSignatureSpan">(namespace, oid, db)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Decimal128">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Decimal128
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Double">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Double
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Int32">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Int32
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Long
            <span class="apidocSignatureSpan">(low, high)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Map">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Map
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.MaxKey">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MaxKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.MinKey">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MinKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>ObjectID
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectId">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>ObjectId
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Symbol
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Timestamp
            <span class="apidocSignatureSpan">(low, high)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_BINARY_SUBTYPE_BYTE_ARRAY</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_BINARY_SUBTYPE_DEFAULT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_BINARY_SUBTYPE_FUNCTION</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_BINARY_SUBTYPE_MD5</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_BINARY_SUBTYPE_USER_DEFINED</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_BINARY_SUBTYPE_UUID</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_ARRAY</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_BINARY</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_BOOLEAN</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_CODE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_CODE_W_SCOPE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_DATE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_INT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_LONG</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_MAX_KEY</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_MIN_KEY</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_NULL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_NUMBER</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_OBJECT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_OID</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_REGEXP</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_STRING</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_SYMBOL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_DATA_TIMESTAMP</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_INT32_MAX</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_INT32_MIN</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_INT64_MAX</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSON_INT64_MIN</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>JS_INT_MAX</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.</span>JS_INT_MIN</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.BSONRegExp">module mongodb-core.BSON.BSONRegExp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.BSONRegExp.BSONRegExp">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSONRegExp
            <span class="apidocSignatureSpan">(pattern, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Binary">module mongodb-core.BSON.Binary</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.Binary">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Binary
            <span class="apidocSignatureSpan">(buffer, subType)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>BUFFER_SIZE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_BYTE_ARRAY</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_DEFAULT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_FUNCTION</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_MD5</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_USER_DEFINED</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_UUID</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.</span>SUBTYPE_UUID_OLD</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Binary.prototype">module mongodb-core.BSON.Binary.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.length">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>length
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.put">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>put
            <span class="apidocSignatureSpan">(byte_value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.read">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>read
            <span class="apidocSignatureSpan">(position, length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>toString
            <span class="apidocSignatureSpan">(format)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.value">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>value
            <span class="apidocSignatureSpan">(asRaw)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Binary.prototype.write">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>write
            <span class="apidocSignatureSpan">(string, offset)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Code">module mongodb-core.BSON.Code</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Code.Code">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Code
            <span class="apidocSignatureSpan">(code, scope)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Code.prototype">module mongodb-core.BSON.Code.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Code.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Code.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.DBRef">module mongodb-core.BSON.DBRef</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.DBRef.DBRef">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>DBRef
            <span class="apidocSignatureSpan">(namespace, oid, db)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.DBRef.prototype">module mongodb-core.BSON.DBRef.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.DBRef.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.DBRef.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Decimal128">module mongodb-core.BSON.Decimal128</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Decimal128.Decimal128">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Decimal128
            <span class="apidocSignatureSpan">(bytes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Decimal128.fromString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Decimal128.</span>fromString
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Decimal128.prototype">module mongodb-core.BSON.Decimal128.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Decimal128.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Decimal128.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Decimal128.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Decimal128.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Double">module mongodb-core.BSON.Double</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Double.Double">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Double
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Double.prototype">module mongodb-core.BSON.Double.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Double.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Double.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Double.prototype.valueOf">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Double.prototype.</span>valueOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Int32">module mongodb-core.BSON.Int32</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Int32.Int32">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Int32
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Int32.prototype">module mongodb-core.BSON.Int32.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Int32.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Int32.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Int32.prototype.valueOf">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Int32.prototype.</span>valueOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Long">module mongodb-core.BSON.Long</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.Long">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Long
            <span class="apidocSignatureSpan">(low, high)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.fromBits">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromBits
            <span class="apidocSignatureSpan">(lowBits, highBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.fromInt">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromInt
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.fromNumber">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromNumber
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.fromString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromString
            <span class="apidocSignatureSpan">(str, opt_radix)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_16_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_24_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_31_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_32_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_48_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_63_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_64_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>INT_CACHE_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>MAX_VALUE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>MIN_VALUE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>NEG_ONE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>ONE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>TWO_PWR_24_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>ZERO</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Long.prototype">module mongodb-core.BSON.Long.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.add">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>add
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.and">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>and
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.compare">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>compare
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.div">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>div
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.equals">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>equals
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.getHighBits">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getHighBits
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.getLowBits">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getLowBits
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.getLowBitsUnsigned">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getLowBitsUnsigned
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.getNumBitsAbs">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getNumBitsAbs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.greaterThan">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>greaterThan
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.greaterThanOrEqual">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>greaterThanOrEqual
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.isNegative">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>isNegative
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.isOdd">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>isOdd
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.isZero">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>isZero
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.lessThan">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>lessThan
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.lessThanOrEqual">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>lessThanOrEqual
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.modulo">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>modulo
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.multiply">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>multiply
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.negate">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>negate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.not">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>not
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.notEquals">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>notEquals
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.or">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>or
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.shiftLeft">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>shiftLeft
            <span class="apidocSignatureSpan">(numBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.shiftRight">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>shiftRight
            <span class="apidocSignatureSpan">(numBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.shiftRightUnsigned">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>shiftRightUnsigned
            <span class="apidocSignatureSpan">(numBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.subtract">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>subtract
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.toInt">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toInt
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.toNumber">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toString
            <span class="apidocSignatureSpan">(opt_radix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Long.prototype.xor">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>xor
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Map">module mongodb-core.BSON.Map</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Map.Map">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Map
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.MaxKey">module mongodb-core.BSON.MaxKey</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.MaxKey.MaxKey">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MaxKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.MinKey">module mongodb-core.BSON.MinKey</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.MinKey.MinKey">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MinKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.ObjectID">module mongodb-core.BSON.ObjectID</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.ObjectID">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>ObjectID
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.ObjectId">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>ObjectId
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.createFromHexString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>createFromHexString
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.createFromTime">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>createFromTime
            <span class="apidocSignatureSpan">(time)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.createPk">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>createPk
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.isValid">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>isValid
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>index</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.ObjectID.prototype">module mongodb-core.BSON.ObjectID.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.equals">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>equals
            <span class="apidocSignatureSpan">(otherId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.generate">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>generate
            <span class="apidocSignatureSpan">(time)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.getInc">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>getInc
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.getTimestamp">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>getTimestamp
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.get_inc">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>get_inc
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.inspect">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>inspect
            <span class="apidocSignatureSpan">(format)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.toHexString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>toHexString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>toString
            <span class="apidocSignatureSpan">(format)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Symbol">module mongodb-core.BSON.Symbol</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol.Symbol">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Symbol
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Symbol.prototype">module mongodb-core.BSON.Symbol.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.inspect">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>inspect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.valueOf">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>valueOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Timestamp">module mongodb-core.BSON.Timestamp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.Timestamp">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Timestamp
            <span class="apidocSignatureSpan">(low, high)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.fromBits">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromBits
            <span class="apidocSignatureSpan">(lowBits, highBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.fromInt">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromInt
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.fromNumber">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromNumber
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.fromString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromString
            <span class="apidocSignatureSpan">(str, opt_radix)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_16_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_24_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_31_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_32_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_48_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_63_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_64_DBL_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>INT_CACHE_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>MAX_VALUE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>MIN_VALUE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>NEG_ONE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>ONE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>TWO_PWR_24_</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>ZERO</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.Timestamp.prototype">module mongodb-core.BSON.Timestamp.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.add">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>add
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.and">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>and
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.compare">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>compare
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.div">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>div
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.equals">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>equals
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getHighBits">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getHighBits
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getLowBits">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getLowBits
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getLowBitsUnsigned">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getLowBitsUnsigned
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getNumBitsAbs">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getNumBitsAbs
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.greaterThan">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>greaterThan
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.greaterThanOrEqual">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>greaterThanOrEqual
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.isNegative">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>isNegative
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.isOdd">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>isOdd
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.isZero">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>isZero
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.lessThan">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>lessThan
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.lessThanOrEqual">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>lessThanOrEqual
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.modulo">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>modulo
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.multiply">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>multiply
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.negate">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>negate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.not">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>not
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.notEquals">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>notEquals
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.or">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>or
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftLeft">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>shiftLeft
            <span class="apidocSignatureSpan">(numBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftRight">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>shiftRight
            <span class="apidocSignatureSpan">(numBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftRightUnsigned">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>shiftRightUnsigned
            <span class="apidocSignatureSpan">(numBits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.subtract">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>subtract
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toInt">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toInt
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toNumber">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toString
            <span class="apidocSignatureSpan">(opt_radix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.xor">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>xor
            <span class="apidocSignatureSpan">(other)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.BSON.prototype">module mongodb-core.BSON.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.prototype.calculateObjectSize">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>calculateObjectSize
            <span class="apidocSignatureSpan">(object, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.prototype.deserialize">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>deserialize
            <span class="apidocSignatureSpan">(buffer, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.prototype.deserializeStream">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>deserializeStream
            <span class="apidocSignatureSpan">(data, startIndex, numberOfDocuments, documents, docStartIndex, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.prototype.serialize">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>serialize
            <span class="apidocSignatureSpan">(object, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.BSON.prototype.serializeWithBufferAndIndex">
            function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>serializeWithBufferAndIndex
            <span class="apidocSignatureSpan">(object, finalBuffer, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Connection">module mongodb-core.Connection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.Connection">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Connection
            <span class="apidocSignatureSpan">(messageHandler, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.connections">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>connections
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.disableConnectionAccounting">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>disableConnectionAccounting
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.enableConnectionAccounting">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>enableConnectionAccounting
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.super_">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Connection.prototype">module mongodb-core.Connection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.connect">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>connect
            <span class="apidocSignatureSpan">(_options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.destroy">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.isConnected">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>isConnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.resetSocketTimeout">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>resetSocketTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.setSocketTimeout">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>setSocketTimeout
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.unref">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>unref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Connection.prototype.write">
            function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>write
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Cursor">module mongodb-core.Cursor</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.Cursor">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Cursor
            <span class="apidocSignatureSpan">(bson, ns, cmd, options, topology, topologyOptions)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Cursor.prototype">module mongodb-core.Cursor.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype._find">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>_find
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype._getmore">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>_getmore
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype._killcursor">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>_killcursor
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.bufferedCount">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>bufferedCount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.clone">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>clone
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.cursorBatchSize">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>cursorBatchSize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.cursorLimit">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>cursorLimit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.cursorSkip">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>cursorSkip
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.isDead">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>isDead
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.isKilled">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>isKilled
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.isNotified">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>isNotified
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.kill">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>kill
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.next">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>next
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.readBufferedDocuments">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>readBufferedDocuments
            <span class="apidocSignatureSpan">(number)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.rewind">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>rewind
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.setCursorBatchSize">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>setCursorBatchSize
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.setCursorLimit">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>setCursorLimit
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Cursor.prototype.setCursorSkip">
            function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>setCursorSkip
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.GSSAPI">module mongodb-core.GSSAPI</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.GSSAPI.GSSAPI">
            function <span class="apidocSignatureSpan">mongodb-core.</span>GSSAPI
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.GSSAPI.prototype">module mongodb-core.GSSAPI.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.GSSAPI.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.GSSAPI.prototype.</span>auth
            <span class="apidocSignatureSpan">(server, connections, db, username, password, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.GSSAPI.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.GSSAPI.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.GSSAPI.prototype.reauthenticate">
            function <span class="apidocSignatureSpan">mongodb-core.GSSAPI.prototype.</span>reauthenticate
            <span class="apidocSignatureSpan">(server, connections, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Logger">module mongodb-core.Logger</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.Logger">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Logger
            <span class="apidocSignatureSpan">(className, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.currentLogger">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>currentLogger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.filter">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>filter
            <span class="apidocSignatureSpan">(type, values)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.reset">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>reset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.setCurrentLogger">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>setCurrentLogger
            <span class="apidocSignatureSpan">(logger)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.setLevel">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>setLevel
            <span class="apidocSignatureSpan">(_level)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Logger.prototype">module mongodb-core.Logger.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.debug">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>debug
            <span class="apidocSignatureSpan">(message, object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.error">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>error
            <span class="apidocSignatureSpan">(message, object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.info">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>info
            <span class="apidocSignatureSpan">(message, object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.isDebug">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isDebug
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.isError">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.isInfo">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isInfo
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.isWarn">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isWarn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Logger.prototype.warn">
            function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>warn
            <span class="apidocSignatureSpan">(message, object)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.MongoCR">module mongodb-core.MongoCR</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoCR.MongoCR">
            function <span class="apidocSignatureSpan">mongodb-core.</span>MongoCR
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.MongoCR.prototype">module mongodb-core.MongoCR.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoCR.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.MongoCR.prototype.</span>auth
            <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoCR.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.MongoCR.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoCR.prototype.reauthenticate">
            function <span class="apidocSignatureSpan">mongodb-core.MongoCR.prototype.</span>reauthenticate
            <span class="apidocSignatureSpan">(server, connections, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.MongoError">module mongodb-core.MongoError</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoError.MongoError">
            function <span class="apidocSignatureSpan">mongodb-core.</span>MongoError
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.MongoError.create">
            function <span class="apidocSignatureSpan">mongodb-core.MongoError.</span>create
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Mongos">module mongodb-core.Mongos</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.Mongos">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Mongos
            <span class="apidocSignatureSpan">(seedlist, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.super_">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Mongos.prototype">module mongodb-core.Mongos.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>auth
            <span class="apidocSignatureSpan">(mechanism, db)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.command">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>command
            <span class="apidocSignatureSpan">(ns, cmd, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.connect">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>connect
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.connections">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>connections
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.cursor">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>cursor
            <span class="apidocSignatureSpan">(ns, cmd, cursorOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.destroy">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>destroy
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.getConnection">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>getConnection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.getServer">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>getServer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.insert">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>insert
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.isConnected">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>isConnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.isDestroyed">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>isDestroyed
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.lastIsMaster">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>lastIsMaster
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>remove
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.unref">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>unref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Mongos.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>update
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>parserType</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>type</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Plain">module mongodb-core.Plain</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Plain.Plain">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Plain
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Plain.prototype">module mongodb-core.Plain.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Plain.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.Plain.prototype.</span>auth
            <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Plain.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.Plain.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Plain.prototype.reauthenticate">
            function <span class="apidocSignatureSpan">mongodb-core.Plain.prototype.</span>reauthenticate
            <span class="apidocSignatureSpan">(server, connections, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Query">module mongodb-core.Query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Query.Query">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Query
            <span class="apidocSignatureSpan">(bson, ns, query, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Query.getRequestId">
            function <span class="apidocSignatureSpan">mongodb-core.Query.</span>getRequestId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Query.nextRequestId">
            function <span class="apidocSignatureSpan">mongodb-core.Query.</span>nextRequestId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Query.prototype">module mongodb-core.Query.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Query.prototype.incRequestId">
            function <span class="apidocSignatureSpan">mongodb-core.Query.prototype.</span>incRequestId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Query.prototype.toBin">
            function <span class="apidocSignatureSpan">mongodb-core.Query.prototype.</span>toBin
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.ReadPreference">module mongodb-core.ReadPreference</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReadPreference.ReadPreference">
            function <span class="apidocSignatureSpan">mongodb-core.</span>ReadPreference
            <span class="apidocSignatureSpan">(preference, tags, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.ReadPreference.</span>nearest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.ReadPreference.</span>primary</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.ReadPreference.</span>primaryPreferred</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.ReadPreference.</span>secondary</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mongodb-core.ReadPreference.</span>secondaryPreferred</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.ReadPreference.prototype">module mongodb-core.ReadPreference.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReadPreference.prototype.equals">
            function <span class="apidocSignatureSpan">mongodb-core.ReadPreference.prototype.</span>equals
            <span class="apidocSignatureSpan">(readPreference)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReadPreference.prototype.slaveOk">
            function <span class="apidocSignatureSpan">mongodb-core.ReadPreference.prototype.</span>slaveOk
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReadPreference.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.ReadPreference.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.ReplSet">module mongodb-core.ReplSet</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.ReplSet">
            function <span class="apidocSignatureSpan">mongodb-core.</span>ReplSet
            <span class="apidocSignatureSpan">(seedlist, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.super_">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.ReplSet.prototype">module mongodb-core.ReplSet.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>auth
            <span class="apidocSignatureSpan">(mechanism, db)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.command">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>command
            <span class="apidocSignatureSpan">(ns, cmd, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.connect">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>connect
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.connections">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>connections
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.cursor">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>cursor
            <span class="apidocSignatureSpan">(ns, cmd, cursorOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.destroy">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>destroy
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.getConnection">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.getServer">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>getServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.getServers">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>getServers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.insert">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>insert
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.isConnected">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>isConnected
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.isDestroyed">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>isDestroyed
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.lastIsMaster">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>lastIsMaster
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>remove
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.unref">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>unref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ReplSet.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>update
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>parserType</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>type</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.ScramSHA1">module mongodb-core.ScramSHA1</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ScramSHA1.ScramSHA1">
            function <span class="apidocSignatureSpan">mongodb-core.</span>ScramSHA1
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.ScramSHA1.prototype">module mongodb-core.ScramSHA1.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ScramSHA1.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.ScramSHA1.prototype.</span>auth
            <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ScramSHA1.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.ScramSHA1.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.ScramSHA1.prototype.reauthenticate">
            function <span class="apidocSignatureSpan">mongodb-core.ScramSHA1.prototype.</span>reauthenticate
            <span class="apidocSignatureSpan">(server, connections, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Server">module mongodb-core.Server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.Server">
            function <span class="apidocSignatureSpan">mongodb-core.</span>Server
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.disableServerAccounting">
            function <span class="apidocSignatureSpan">mongodb-core.Server.</span>disableServerAccounting
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.enableServerAccounting">
            function <span class="apidocSignatureSpan">mongodb-core.Server.</span>enableServerAccounting
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.servers">
            function <span class="apidocSignatureSpan">mongodb-core.Server.</span>servers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.super_">
            function <span class="apidocSignatureSpan">mongodb-core.Server.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.Server.prototype">module mongodb-core.Server.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>auth
            <span class="apidocSignatureSpan">(mechanism, db)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.command">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>command
            <span class="apidocSignatureSpan">(ns, cmd, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.connect">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>connect
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.connections">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>connections
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.cursor">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>cursor
            <span class="apidocSignatureSpan">(ns, cmd, cursorOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.destroy">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>destroy
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.equals">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>equals
            <span class="apidocSignatureSpan">(server)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.getConnection">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>getConnection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.getDescription">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>getDescription
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.getServer">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>getServer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.insert">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>insert
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.isConnected">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>isConnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.isDestroyed">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>isDestroyed
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.lastIsMaster">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>lastIsMaster
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>remove
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.unref">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>unref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.Server.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>update
            <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>parserType</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.X509">module mongodb-core.X509</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.X509.X509">
            function <span class="apidocSignatureSpan">mongodb-core.</span>X509
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.X509.prototype">module mongodb-core.X509.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.X509.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.X509.prototype.</span>auth
            <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.X509.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.X509.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.X509.prototype.reauthenticate">
            function <span class="apidocSignatureSpan">mongodb-core.X509.prototype.</span>reauthenticate
            <span class="apidocSignatureSpan">(server, connections, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.command_result">module mongodb-core.command_result</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.command_result.command_result">
            function <span class="apidocSignatureSpan">mongodb-core.</span>command_result
            <span class="apidocSignatureSpan">(result, connection, message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.command_result.prototype">module mongodb-core.command_result.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.command_result.prototype.toJSON">
            function <span class="apidocSignatureSpan">mongodb-core.command_result.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.command_result.prototype.toString">
            function <span class="apidocSignatureSpan">mongodb-core.command_result.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.commands">module mongodb-core.commands</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.commands.GetMore">
            function <span class="apidocSignatureSpan">mongodb-core.commands.</span>GetMore
            <span class="apidocSignatureSpan">(bson, ns, cursorId, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.commands.KillCursor">
            function <span class="apidocSignatureSpan">mongodb-core.commands.</span>KillCursor
            <span class="apidocSignatureSpan">(bson, cursorIds)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.commands.Query">
            function <span class="apidocSignatureSpan">mongodb-core.commands.</span>Query
            <span class="apidocSignatureSpan">(bson, ns, query, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.commands.Response">
            function <span class="apidocSignatureSpan">mongodb-core.commands.</span>Response
            <span class="apidocSignatureSpan">(bson, data, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.pool">module mongodb-core.pool</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.pool">
            function <span class="apidocSignatureSpan">mongodb-core.</span>pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool._execute">
            function <span class="apidocSignatureSpan">mongodb-core.pool.</span>_execute
            <span class="apidocSignatureSpan">(self)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.super_">
            function <span class="apidocSignatureSpan">mongodb-core.pool.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.pool.prototype">module mongodb-core.pool.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.allConnections">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>allConnections
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>auth
            <span class="apidocSignatureSpan">(mechanism)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.connect">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.destroy">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>destroy
            <span class="apidocSignatureSpan">(force)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.get">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.isConnected">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>isConnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.isDestroyed">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>isDestroyed
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.isDisconnected">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>isDisconnected
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.socketCount">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>socketCount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.unref">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>unref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.pool.prototype.write">
            function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>write
            <span class="apidocSignatureSpan">(commands, options, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.replset_state">module mongodb-core.replset_state</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.replset_state">
            function <span class="apidocSignatureSpan">mongodb-core.</span>replset_state
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.super_">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.replset_state.prototype">module mongodb-core.replset_state.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.allServers">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>allServers
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.destroy">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>destroy
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.get">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>get
            <span class="apidocSignatureSpan">(host)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.hasPrimary">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasPrimary
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.hasPrimaryAndSecondary">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasPrimaryAndSecondary
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.hasPrimaryOrSecondary">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasPrimaryOrSecondary
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.hasSecondary">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasSecondary
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.pickServer">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>pickServer
            <span class="apidocSignatureSpan">(readPreference)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.remove">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>remove
            <span class="apidocSignatureSpan">(server, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.update">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>update
            <span class="apidocSignatureSpan">(server)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.updateSecondariesMaxStaleness">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>updateSecondariesMaxStaleness
            <span class="apidocSignatureSpan">(haInterval)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.replset_state.prototype.updateServerMaxStaleness">
            function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>updateServerMaxStaleness
            <span class="apidocSignatureSpan">(server, haInterval)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.shared">module mongodb-core.shared</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.assign">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>assign
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.clone">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>clone
            <span class="apidocSignatureSpan">(object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.cloneOptions">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>cloneOptions
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.createClientInfo">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>createClientInfo
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.emitServerDescriptionChanged">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>emitServerDescriptionChanged
            <span class="apidocSignatureSpan">(self, description)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.emitTopologyDescriptionChanged">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>emitTopologyDescriptionChanged
            <span class="apidocSignatureSpan">(self, description)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.getTopologyType">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>getTopologyType
            <span class="apidocSignatureSpan">(self, ismaster)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.shared.inquireServerState">
            function <span class="apidocSignatureSpan">mongodb-core.shared.</span>inquireServerState
            <span class="apidocSignatureSpan">(self)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.smoke_plugin">module mongodb-core.smoke_plugin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.smoke_plugin.attachToRunner">
            function <span class="apidocSignatureSpan">mongodb-core.smoke_plugin.</span>attachToRunner
            <span class="apidocSignatureSpan">(runner, outputFile)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.sspi">module mongodb-core.sspi</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.sspi.sspi">
            function <span class="apidocSignatureSpan">mongodb-core.</span>sspi
            <span class="apidocSignatureSpan">(bson)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.sspi.prototype">module mongodb-core.sspi.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.sspi.prototype.auth">
            function <span class="apidocSignatureSpan">mongodb-core.sspi.prototype.</span>auth
            <span class="apidocSignatureSpan">(server, connections, db, username, password, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.sspi.prototype.logout">
            function <span class="apidocSignatureSpan">mongodb-core.sspi.prototype.</span>logout
            <span class="apidocSignatureSpan">(dbName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.sspi.prototype.reauthenticate">
            function <span class="apidocSignatureSpan">mongodb-core.sspi.prototype.</span>reauthenticate
            <span class="apidocSignatureSpan">(server, connections, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mongodb-core.utils">module mongodb-core.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.utils.copy">
            function <span class="apidocSignatureSpan">mongodb-core.utils.</span>copy
            <span class="apidocSignatureSpan">(fObj, tObj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.utils.debugOptions">
            function <span class="apidocSignatureSpan">mongodb-core.utils.</span>debugOptions
            <span class="apidocSignatureSpan">(debugFields, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.utils.getProperty">
            function <span class="apidocSignatureSpan">mongodb-core.utils.</span>getProperty
            <span class="apidocSignatureSpan">(obj, propName, fieldName, values, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.utils.getSingleProperty">
            function <span class="apidocSignatureSpan">mongodb-core.utils.</span>getSingleProperty
            <span class="apidocSignatureSpan">(obj, name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.utils.retrieveBSON">
            function <span class="apidocSignatureSpan">mongodb-core.utils.</span>retrieveBSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mongodb-core.utils.setProperty">
            function <span class="apidocSignatureSpan">mongodb-core.utils.</span>setProperty
            <span class="apidocSignatureSpan">(obj, prop, flag, values)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core" id="apidoc.module.mongodb-core">module mongodb-core</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support" id="apidoc.element.mongodb-core.2_4_support">
        function <span class="apidocSignatureSpan">mongodb-core.</span>2_4_support
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">2_4_support = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support" id="apidoc.element.mongodb-core.2_6_support">
        function <span class="apidocSignatureSpan">mongodb-core.</span>2_6_support
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">2_6_support = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support" id="apidoc.element.mongodb-core.3_2_support">
        function <span class="apidocSignatureSpan">mongodb-core.</span>3_2_support
        <span class="apidocSignatureSpan">(legacyWireProtocol)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">3_2_support = function (legacyWireProtocol) {
  this.legacyWireProtocol = legacyWireProtocol;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON" id="apidoc.element.mongodb-core.BSON">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">BSON = function () {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.BSONRegExp" id="apidoc.element.mongodb-core.BSON.BSONRegExp">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.BSONRegExp
        <span class="apidocSignatureSpan">(pattern, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BSONRegExp(pattern, options) {
  if(!(this instanceof BSONRegExp)) return new BSONRegExp();

  // Execute
  this._bsontype = &#x27;BSONRegExp&#x27;;
  this.pattern = pattern || &#x27;&#x27;;
  this.options = options || &#x27;&#x27;;

  // Validate options
  for(var i = 0; i &#x3c; this.options.length; i++) {
    if(!(this.options[i] == &#x27;i&#x27;
      || this.options[i] == &#x27;m&#x27;
      || this.options[i] == &#x27;x&#x27;
      || this.options[i] == &#x27;l&#x27;
      || this.options[i] == &#x27;s&#x27;
      || this.options[i] == &#x27;u&#x27;
    )) {
      throw new Error(&#x27;the regular expression options [&#x27; + this.options[i] + &#x22;] is not supported&#x22;);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary" id="apidoc.element.mongodb-core.BSON.Binary">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Binary
        <span class="apidocSignatureSpan">(buffer, subType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Binary(buffer, subType) {
  if(!(this instanceof Binary)) return new Binary(buffer, subType);

  this._bsontype = &#x27;Binary&#x27;;

  if(buffer instanceof Number) {
    this.sub_type = buffer;
    this.position = 0;
  } else {
    this.sub_type = subType == null ? BSON_BINARY_SUBTYPE_DEFAULT : subType;
    this.position = 0;
  }

  if(buffer != null &#x26;&#x26; !(buffer instanceof Number)) {
    // Only accept Buffer, Uint8Array or Arrays
    if(typeof buffer == &#x27;string&#x27;) {
      // Different ways of writing the length of the string for the different types
      if(typeof Buffer != &#x27;undefined&#x27;) {
        this.buffer = new Buffer(buffer);
      } else if(typeof Uint8Array != &#x27;undefined&#x27; || (Object.prototype.toString.call(buffer) == &#x27;[object Array]&#x27;)) {
        this.buffer = writeStringToArray(buffer);
      } else {
        throw new Error(&#x22;only String, Buffer, Uint8Array or Array accepted&#x22;);
      }
    } else {
      this.buffer = buffer;
    }
    this.position = buffer.length;
  } else {
    if(typeof Buffer != &#x27;undefined&#x27;) {
      this.buffer =  new Buffer(Binary.BUFFER_SIZE);
    } else if(typeof Uint8Array != &#x27;undefined&#x27;){
      this.buffer = new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE));
    } else {
      this.buffer = new Array(Binary.BUFFER_SIZE);
    }
    // Set position to start of buffer
    this.position = 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Code" id="apidoc.element.mongodb-core.BSON.Code">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Code
        <span class="apidocSignatureSpan">(code, scope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Code(code, scope) {
  if(!(this instanceof Code)) return new Code(code, scope);
  this._bsontype = &#x27;Code&#x27;;
  this.code = code;
  this.scope = scope;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.DBRef" id="apidoc.element.mongodb-core.BSON.DBRef">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.DBRef
        <span class="apidocSignatureSpan">(namespace, oid, db)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DBRef(namespace, oid, db) {
  if(!(this instanceof DBRef)) return new DBRef(namespace, oid, db);

  this._bsontype = &#x27;DBRef&#x27;;
  this.namespace = namespace;
  this.oid = oid;
  this.db = db;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Decimal128" id="apidoc.element.mongodb-core.BSON.Decimal128">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Decimal128
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">BSON.Decimal128 = function (bytes) {
  this._bsontype = &#x27;Decimal128&#x27;;
  this.bytes = bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Double" id="apidoc.element.mongodb-core.BSON.Double">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Double
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Double(value) {
  if(!(this instanceof Double)) return new Double(value);

  this._bsontype = &#x27;Double&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Int32" id="apidoc.element.mongodb-core.BSON.Int32">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Int32
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">BSON.Int32 = function (value) {
  if(!(this instanceof Int32)) return new Int32(value);

  this._bsontype = &#x27;Int32&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long" id="apidoc.element.mongodb-core.BSON.Long">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Long
        <span class="apidocSignatureSpan">(low, high)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Long(low, high) {
  if(!(this instanceof Long)) return new Long(low, high);

  this._bsontype = &#x27;Long&#x27;;
<span class="apidocCodeCommentSpan">  /**
   * @type {number}
   * @ignore
   */
</span>  this.low_ = low | 0;  // force into 32 signed bits.

  /**
   * @type {number}
   * @ignore
   */
  this.high_ = high | 0;  // force into 32 signed bits.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Map" id="apidoc.element.mongodb-core.BSON.Map">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Map
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Map() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.MaxKey" id="apidoc.element.mongodb-core.BSON.MaxKey">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.MaxKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MaxKey() {
  if(!(this instanceof MaxKey)) return new MaxKey();

  this._bsontype = &#x27;MaxKey&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.MinKey" id="apidoc.element.mongodb-core.BSON.MinKey">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.MinKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MinKey() {
  if(!(this instanceof MinKey)) return new MinKey();

  this._bsontype = &#x27;MinKey&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID" id="apidoc.element.mongodb-core.BSON.ObjectID">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.ObjectID
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ObjectID(id) {
  // Duck-typing to support ObjectId from different npm packages
  if(id instanceof ObjectID) return id;
  if(!(this instanceof ObjectID)) return new ObjectID(id);

  this._bsontype = &#x27;ObjectID&#x27;;

  // The most common usecase (blank id, new objectId instance)
  if(id == null || typeof id == &#x27;number&#x27;) {
    // Generate a new id
    this.id = this.generate(id);
    // If we are caching the hex string
    if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
    // Return the object
    return;
  }

  // Check if the passed in id is valid
  var valid = ObjectID.isValid(id);

  // Throw an error if it&#x27;s not a valid setup
  if(!valid &#x26;&#x26; id != null){
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24 &#x26;&#x26; hasBufferType) {
    return new ObjectID(new Buffer(id, &#x27;hex&#x27;));
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24) {
    return ObjectID.createFromHexString(id);
  } else if(id != null &#x26;&#x26; id.length === 12) {
    // assume 12 byte string
    this.id = id;
  } else if(id != null &#x26;&#x26; id.toHexString) {
    // Duck-typing to support ObjectId from different npm packages
    return id;
  } else {
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  }

  if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol" id="apidoc.element.mongodb-core.BSON.Symbol">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Symbol
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Symbol(value) {
  if(!(this instanceof Symbol)) return new Symbol(value);
  this._bsontype = &#x27;Symbol&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp" id="apidoc.element.mongodb-core.BSON.Timestamp">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON.Timestamp
        <span class="apidocSignatureSpan">(low, high)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Timestamp(low, high) {
  if(!(this instanceof Timestamp)) return new Timestamp(low, high);
  this._bsontype = &#x27;Timestamp&#x27;;
<span class="apidocCodeCommentSpan">  /**
   * @type {number}
   * @ignore
   */
</span>  this.low_ = low | 0;  // force into 32 signed bits.

  /**
   * @type {number}
   * @ignore
   */
  this.high_ = high | 0;  // force into 32 signed bits.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection" id="apidoc.element.mongodb-core.Connection">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Connection
        <span class="apidocSignatureSpan">(messageHandler, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Connection = function (messageHandler, options) {
  // Add event listener
  EventEmitter.call(this);
  // Set empty if no options passed
  this.options = options || {};
  // Identification information
  this.id = _id++;
  // Logger instance
  this.logger = Logger(&#x27;Connection&#x27;, options);
  // No bson parser passed in
  if(!options.bson) throw new Error(&#x22;must pass in valid bson parser&#x22;);
  // Get bson parser
  this.bson = options.bson;
  // Grouping tag used for debugging purposes
  this.tag = options.tag;
  // Message handler
  this.messageHandler = messageHandler;

  // Max BSON message size
  this.maxBsonMessageSize = options.maxBsonMessageSize || (1024 * 1024 * 16 * 4);
  // Debug information
  if(this.logger.isDebug()) this.logger.debug(f(&#x27;creating connection %s with options [%s]&#x27;, this.id, JSON.stringify(debugOptions
(debugFields, options))));

  // Default options
  this.port = options.port || 27017;
  this.host = options.host || &#x27;localhost&#x27;;
  this.keepAlive = typeof options.keepAlive == &#x27;boolean&#x27; ? options.keepAlive : true;
  this.keepAliveInitialDelay = options.keepAliveInitialDelay || 0;
  this.noDelay = typeof options.noDelay == &#x27;boolean&#x27; ? options.noDelay : true;
  this.connectionTimeout = options.connectionTimeout || 0;
  this.socketTimeout = options.socketTimeout || 0;

  // If connection was destroyed
  this.destroyed = false;

  // Check if we have a domain socket
  this.domainSocket = this.host.indexOf(&#x27;\/&#x27;) != -1;

  // Serialize commands using function
  this.singleBufferSerializtion = typeof options.singleBufferSerializtion == &#x27;boolean&#x27; ? options.singleBufferSerializtion : true
;
  this.serializationFunction = this.singleBufferSerializtion ? &#x27;toBinUnified&#x27; : &#x27;toBin&#x27;;

  // SSL options
  this.ca = options.ca || null;
  this.crl = options.crl || null;
  this.cert = options.cert || null;
  this.key = options.key || null;
  this.passphrase = options.passphrase || null;
  this.ssl = typeof options.ssl == &#x27;boolean&#x27; ? options.ssl : false;
  this.rejectUnauthorized = typeof options.rejectUnauthorized == &#x27;boolean&#x27; ? options.rejectUnauthorized : true;
  this.checkServerIdentity = typeof options.checkServerIdentity == &#x27;boolean&#x27;
    || typeof options.checkServerIdentity == &#x27;function&#x27; ? options.checkServerIdentity : true;

  // If ssl not enabled
  if(!this.ssl) this.rejectUnauthorized = false;

  // Response options
  this.responseOptions = {
    promoteLongs: typeof options.promoteLongs == &#x27;boolean&#x27; ?  options.promoteLongs : true,
    promoteValues: typeof options.promoteValues == &#x27;boolean&#x27; ? options.promoteValues : true,
    promoteBuffers: typeof options.promoteBuffers == &#x27;boolean&#x27; ? options.promoteBuffers: false
  }

  // Flushing
  this.flushing = false;
  this.queue = [];

  // Internal state
  this.connection = null;
  this.writeStream = null;

  // Create hash method
  var hash = crypto.createHash(&#x27;sha1&#x27;);
  hash.update(f(&#x27;%s:%s&#x27;, this.host, this.port));

  // Create a hash name
  this.hashedName = hash.digest(&#x27;hex&#x27;);

  // All operations in flight on the connection
  this.workItems = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor" id="apidoc.element.mongodb-core.Cursor">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Cursor
        <span class="apidocSignatureSpan">(bson, ns, cmd, options, topology, topologyOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Cursor = function (bson, ns, cmd, options, topology, topologyOptions) {
  options = options || {};

  // Cursor pool
  this.pool = null;
  // Cursor server
  this.server = null;

  // Do we have a not connected handler
  this.disconnectHandler = options.disconnectHandler;

  // Set local values
  this.bson = bson;
  this.ns = ns;
  this.cmd = cmd;
  this.options = options;
  this.topology = topology;

  // All internal state
  this.cursorState = {
      cursorId: null
    , cmd: cmd
    , documents: options.documents || []
    , cursorIndex: 0
    , dead: false
    , killed: false
    , init: false
    , notified: false
    , limit: options.limit || cmd.limit || 0
    , skip: options.skip || cmd.skip || 0
    , batchSize: options.batchSize || cmd.batchSize || 1000
    , currentLimit: 0
    // Result field name if not a cursor (contains the array of results)
    , transforms: options.transforms
  }

  // Add promoteLong to cursor state
  if(typeof topologyOptions.promoteLongs == &#x27;boolean&#x27;) {
    this.cursorState.promoteLongs = topologyOptions.promoteLongs;
  } else if(typeof options.promoteLongs == &#x27;boolean&#x27;) {
    this.cursorState.promoteLongs = options.promoteLongs;
  }

  // Add promoteValues to cursor state
  if(typeof topologyOptions.promoteValues == &#x27;boolean&#x27;) {
    this.cursorState.promoteValues = topologyOptions.promoteValues;
  } else if(typeof options.promoteValues == &#x27;boolean&#x27;) {
    this.cursorState.promoteValues = options.promoteValues;
  }

  // Add promoteBuffers to cursor state
  if(typeof topologyOptions.promoteBuffers == &#x27;boolean&#x27;) {
    this.cursorState.promoteBuffers = topologyOptions.promoteBuffers;
  } else if(typeof options.promoteBuffers == &#x27;boolean&#x27;) {
    this.cursorState.promoteBuffers = options.promoteBuffers;
  }

  // Logger
  this.logger = Logger(&#x27;Cursor&#x27;, topologyOptions);

  //
  // Did we pass in a cursor id
  if(typeof cmd == &#x27;number&#x27;) {
    this.cursorState.cursorId = Long.fromNumber(cmd);
    this.cursorState.lastCursorId = this.cursorState.cursorId;
  } else if(cmd instanceof Long) {
    this.cursorState.cursorId = cmd;
    this.cursorState.lastCursorId = cmd;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.GSSAPI" id="apidoc.element.mongodb-core.GSSAPI">
        function <span class="apidocSignatureSpan">mongodb-core.</span>GSSAPI
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">GSSAPI = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger" id="apidoc.element.mongodb-core.Logger">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Logger
        <span class="apidocSignatureSpan">(className, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Logger = function (className, options) {
  if(!(this instanceof Logger)) return new Logger(className, options);
  options = options || {};

  // Current reference
  this.className = className;

  // Current logger
  if(options.logger) {
    currentLogger = options.logger;
  } else if(currentLogger == null) {
    currentLogger = console.log;
  }

  // Set level of logging, default is error
  if(options.loggerLevel) {
    level = options.loggerLevel || &#x27;error&#x27;;
  }

  // Add all class names
  if(filteredClasses[this.className] == null) classFilters[this.className] =  true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.MongoCR" id="apidoc.element.mongodb-core.MongoCR">
        function <span class="apidocSignatureSpan">mongodb-core.</span>MongoCR
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">MongoCR = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.MongoError" id="apidoc.element.mongodb-core.MongoError">
        function <span class="apidocSignatureSpan">mongodb-core.</span>MongoError
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MongoError(message) {
  this.name = &#x27;MongoError&#x27;;
  this.message = message;
  Error.captureStackTrace(this, MongoError);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos" id="apidoc.element.mongodb-core.Mongos">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Mongos
        <span class="apidocSignatureSpan">(seedlist, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Mongos = function (seedlist, options) {
  options = options || {};

  // Get replSet Id
  this.id = id++;

  // Internal state
  this.s = {
    options: assign({}, options),
    // BSON instance
    bson: options.bson || new BSON([BSON.Binary, BSON.Code, BSON.DBRef, BSON.Decimal128,
      BSON.Double, BSON.Int32, BSON.Long, BSON.Map, BSON.MaxKey, BSON.MinKey,
      BSON.ObjectId, BSON.BSONRegExp, BSON.Symbol, BSON.Timestamp]),
    // Factory overrides
    Cursor: options.cursorFactory || BasicCursor,
    // Logger instance
    logger: Logger(&#x27;Mongos&#x27;, options),
    // Seedlist
    seedlist: seedlist,
    // Ha interval
    haInterval: options.haInterval ? options.haInterval : 10000,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Server selection index
    index: 0,
    // Connect function options passed in
    connectOptions: {},
    // Are we running in debug mode
    debug: typeof options.debug == &#x27;boolean&#x27; ? options.debug : false,
    // localThresholdMS
    localThresholdMS: options.localThresholdMS || 15,
    // Client info
    clientInfo: createClientInfo(options),
    // Authentication context
    authenticationContexts: [],
  }

  // Set the client info
  this.s.options.clientInfo = createClientInfo(options);

  // Log info warning if the socketTimeout &#x3c; haInterval as it will cause
  // a lot of recycled connections to happen.
  if(this.s.logger.isWarn()
    &#x26;&#x26; this.s.options.socketTimeout != 0
    &#x26;&#x26; this.s.options.socketTimeout &#x3c; this.s.haInterval) {
      this.s.logger.warn(f(&#x27;warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections
 due to socket timeouts&#x27;
        , this.s.options.socketTimeout, this.s.haInterval));
  }

  // All the authProviders
  this.authProviders = options.authProviders || {
      &#x27;mongocr&#x27;: new MongoCR(this.s.bson), &#x27;x509&#x27;: new X509(this.s.bson)
    , &#x27;plain&#x27;: new Plain(this.s.bson), &#x27;gssapi&#x27;: new GSSAPI(this.s.bson)
    , &#x27;sspi&#x27;: new SSPI(this.s.bson), &#x27;scram-sha-1&#x27;: new ScramSHA1(this.s.bson)
  }

  // Disconnected state
  this.state = DISCONNECTED;

  // Current proxies we are connecting to
  this.connectingProxies = [];
  // Currently connected proxies
  this.connectedProxies = [];
  // Disconnected proxies
  this.disconnectedProxies = [];
  // Are we authenticating
  this.authenticating = false;
  // Index of proxy to run operations against
  this.index = 0;
  // High availability timeout id
  this.haTimeoutId = null;
  // Last ismaster
  this.ismaster = null;

  // Add event listener
  EventEmitter.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Plain" id="apidoc.element.mongodb-core.Plain">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Plain
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Plain = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Query" id="apidoc.element.mongodb-core.Query">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Query
        <span class="apidocSignatureSpan">(bson, ns, query, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query = function (bson, ns, query, options) {
  var self = this;
  // Basic options needed to be passed in
  if(ns == null) throw new Error(&#x22;ns must be specified for query&#x22;);
  if(query == null) throw new Error(&#x22;query must be specified for query&#x22;);

  // Validate that we are not passing 0x00 in the collection name
  if(!!~ns.indexOf(&#x22;\x00&#x22;)) {
    throw new Error(&#x22;namespace cannot contain a null character&#x22;);
  }

  // Basic options
  this.bson = bson;
  this.ns = ns;
  this.query = query;

  // Ensure empty options
  this.options = options || {};

  // Additional options
  this.numberToSkip = options.numberToSkip || 0;
  this.numberToReturn = options.numberToReturn || 0;
  this.returnFieldSelector = options.returnFieldSelector || null;
  this.requestId = Query.getRequestId();

  // Serialization option
  this.serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27; ? options.serializeFunctions : false;
  this.ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27; ? options.ignoreUndefined : false;
  this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;
  this.checkKeys = typeof options.checkKeys == &#x27;boolean&#x27; ? options.checkKeys : true;
  this.batchSize = self.numberToReturn;

  // Flags
  this.tailable = false;
  this.slaveOk = typeof options.slaveOk == &#x27;boolean&#x27;? options.slaveOk : false;
  this.oplogReplay = false;
  this.noCursorTimeout = false;
  this.awaitData = false;
  this.exhaust = false;
  this.partial = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReadPreference" id="apidoc.element.mongodb-core.ReadPreference">
        function <span class="apidocSignatureSpan">mongodb-core.</span>ReadPreference
        <span class="apidocSignatureSpan">(preference, tags, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ReadPreference = function (preference, tags, options) {
  this.preference = preference;
  this.tags = tags;
  this.options = options;

  // Add the maxStalenessSeconds value to the read Preference
  if(this.options &#x26;&#x26; this.options.maxStalenessSeconds != null) {
    this.options = options;
    this.maxStalenessSeconds = this.options.maxStalenessSeconds &#x3e;= 0
      ? this.options.maxStalenessSeconds : null;
  } else if(tags &#x26;&#x26; typeof tags == &#x27;object&#x27;) {
    this.options = tags, tags = null;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet" id="apidoc.element.mongodb-core.ReplSet">
        function <span class="apidocSignatureSpan">mongodb-core.</span>ReplSet
        <span class="apidocSignatureSpan">(seedlist, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ReplSet = function (seedlist, options) {
  var self = this;
  options = options || {};

  // Validate seedlist
  if(!Array.isArray(seedlist)) throw new MongoError(&#x22;seedlist must be an array&#x22;);
  // Validate list
  if(seedlist.length == 0) throw new MongoError(&#x22;seedlist must contain at least one entry&#x22;);
  // Validate entries
  seedlist.forEach(function(e) {
    if(typeof e.host != &#x27;string&#x27; || typeof e.port != &#x27;number&#x27;)
      throw new MongoError(&#x22;seedlist entry must contain a host and port&#x22;);
  });

  // Add event listener
  EventEmitter.call(this);

  // Get replSet Id
  this.id = id++;

  // Get the localThresholdMS
  var localThresholdMS = options.localThresholdMS || 15;
  // Backward compatibility
  if(options.acceptableLatency) localThresholdMS = options.acceptableLatency;

  // Create a logger
  var logger = Logger(&#x27;ReplSet&#x27;, options);

  // Internal state
  this.s = {
    options: assign({}, options),
    // BSON instance
    bson: options.bson || new BSON([BSON.Binary, BSON.Code, BSON.DBRef, BSON.Decimal128,
      BSON.Double, BSON.Int32, BSON.Long, BSON.Map, BSON.MaxKey, BSON.MinKey,
      BSON.ObjectId, BSON.BSONRegExp, BSON.Symbol, BSON.Timestamp]),
    // Factory overrides
    Cursor: options.cursorFactory || BasicCursor,
    // Logger instance
    logger: logger,
    // Seedlist
    seedlist: seedlist,
    // Replicaset state
    replicaSetState: new ReplSetState({
      id: this.id, setName: options.setName,
      acceptableLatency: localThresholdMS,
      heartbeatFrequencyMS: options.haInterval ? options.haInterval : 10000,
      logger: logger
    }),
    // Current servers we are connecting to
    connectingServers: [],
    // Ha interval
    haInterval: options.haInterval ? options.haInterval : 10000,
    // Minimum heartbeat frequency used if we detect a server close
    minHeartbeatFrequencyMS: 500,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Server selection index
    index: 0,
    // Connect function options passed in
    connectOptions: {},
    // Are we running in debug mode
    debug: typeof options.debug == &#x27;boolean&#x27; ? options.debug : false,
    // Client info
    clientInfo: createClientInfo(options),
    // Authentication context
    authenticationContexts: [],
  }

  // Add handler for topology change
  this.s.replicaSetState.on(&#x27;topologyDescriptionChanged&#x27;, function(r) { self.emit(&#x27;topologyDescriptionChanged&#x27;, r); });

  // Log info warning if the socketTimeout &#x3c; haInterval as it will cause
  // a lot of recycled connections to happen.
  if(this.s.logger.isWarn()
    &#x26;&#x26; this.s.options.socketTimeout != 0
    &#x26;&#x26; this.s.options.socketTimeout &#x3c; this.s.haInterval) {
      this.s.logger.warn(f(&#x27;warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections
 due to socket timeouts&#x27;
        , this.s.options.socketTimeout, this.s.haInterval));
  }

  // All the authProviders
  this.authProviders = options.authProviders || {
      &#x27;mongocr&#x27;: new MongoCR(this.s.bson), &#x27;x509&#x27;: new X509(this.s.bson)
    , &#x27;plain&#x27;: new Plain(this.s.bson), &#x27;gssapi&#x27;: new GSSAPI(this.s.bson)
    , &#x27;sspi&#x27;: new SSPI(this.s.bson), &#x27;scram-sha-1&#x27;: new ScramSHA1(this.s.bson)
  }

  // Add forwarding of events from state handler
  var types = [&#x27;joined&#x27;, &#x27;left&#x27;];
  types.forEach(function(x) {
    self.s.replicaSetState.on(x, function(t, s) {
      self.emit(x, t, s);
    });
  });

  // Connect stat
  this.initialConnectState = {
    connect: false, fullsetup: false, all: false
  }

  // Disconnected state
  this.state = DISCONNECTED;
  this.haTimeoutId = null;
  // Are we authenticating
  this.authenticating = false;
  // Last ismaster
  this.ismaster = null;
  // Contains the intervalId
  this.intervalIds = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ScramSHA1" id="apidoc.element.mongodb-core.ScramSHA1">
        function <span class="apidocSignatureSpan">mongodb-core.</span>ScramSHA1
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ScramSHA1 = function (bson) {
  this.bson = bson;
  this.authStore = [];
  this.id = id++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server" id="apidoc.element.mongodb-core.Server">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Server = function (options) {
  options = options || {};

  // Add event listener
  EventEmitter.call(this);

  // Server instance id
  this.id = id++;

  // Internal state
  this.s = {
    // Options
    options: options,
    // Logger
    logger: Logger(&#x27;Server&#x27;, options),
    // Factory overrides
    Cursor: options.cursorFactory || BasicCursor,
    // BSON instance
    bson: options.bson || new BSON([BSON.Binary, BSON.Code, BSON.DBRef, BSON.Decimal128,
      BSON.Double, BSON.Int32, BSON.Long, BSON.Map, BSON.MaxKey, BSON.MinKey,
      BSON.ObjectId, BSON.BSONRegExp, BSON.Symbol, BSON.Timestamp]),
    // Pool
    pool: null,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Monitor thread (keeps the connection alive)
    monitoring: typeof options.monitoring == &#x27;boolean&#x27; ? options.monitoring : true,
    // Is the server in a topology
    inTopology: typeof options.inTopology == &#x27;boolean&#x27; ? options.inTopology : false,
    // Monitoring timeout
    monitoringInterval: typeof options.monitoringInterval == &#x27;number&#x27;
      ? options.monitoringInterval
      : 5000,
    // Topology id
    topologyId: -1
  }

  // Curent ismaster
  this.ismaster = null;
  // Current ping time
  this.lastIsMasterMS = -1;
  // The monitoringProcessId
  this.monitoringProcessId = null;
  // Initial connection
  this.initalConnect = true;
  // Wire protocol handler, default to oldest known protocol handler
  // this gets changed when the first ismaster is called.
  this.wireProtocolHandler = new PreTwoSixWireProtocolSupport();
  // Default type
  this._type = &#x27;server&#x27;;
  // Set the client info
  this.clientInfo = createClientInfo(options);

  // Max Stalleness values
  // last time we updated the ismaster state
  this.lastUpdateTime = 0;
  // Last write time
  this.lastWriteDate = 0;
  // Stalleness
  this.staleness = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.X509" id="apidoc.element.mongodb-core.X509">
        function <span class="apidocSignatureSpan">mongodb-core.</span>X509
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">X509 = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.command_result" id="apidoc.element.mongodb-core.command_result">
        function <span class="apidocSignatureSpan">mongodb-core.</span>command_result
        <span class="apidocSignatureSpan">(result, connection, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command_result = function (result, connection, message) {
  this.result = result;
  this.connection = connection;
  this.message = message;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool" id="apidoc.element.mongodb-core.pool">
        function <span class="apidocSignatureSpan">mongodb-core.</span>pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pool = function (options) {
  // Add event listener
  EventEmitter.call(this);
  // Add the options
  this.options = assign({
    // Host and port settings
    host: &#x27;localhost&#x27;,
    port: 27017,
    // Pool default max size
    size: 5,
    // socket settings
    connectionTimeout: 30000,
    socketTimeout: 30000,
    keepAlive: true,
    keepAliveInitialDelay: 0,
    noDelay: true,
    // SSL Settings
    ssl: false, checkServerIdentity: true,
    ca: null, crl: null, cert: null, key: null, passPhrase: null,
    rejectUnauthorized: false,
    promoteLongs: true,
    promoteValues: true,
    promoteBuffers: false,
    // Reconnection options
    reconnect: true,
    reconnectInterval: 1000,
    reconnectTries: 30,
    // Enable domains
    domainsEnabled: false
  }, options);

  // Identification information
  this.id = _id++;
  // Current reconnect retries
  this.retriesLeft = this.options.reconnectTries;
  this.reconnectId = null;
  // No bson parser passed in
  if(!options.bson || (options.bson
    &#x26;&#x26; (typeof options.bson.serialize != &#x27;function&#x27;
    || typeof options.bson.deserialize != &#x27;function&#x27;))) {
      throw new Error(&#x22;must pass in valid bson parser&#x22;);
  }

  // Logger instance
  this.logger = Logger(&#x27;Pool&#x27;, options);
  // Pool state
  this.state = DISCONNECTED;
  // Connections
  this.availableConnections = [];
  this.inUseConnections = [];
  this.connectingConnections = [];
  // Currently executing
  this.executing = false;
  // Operation work queue
  this.queue = [];

  // All the authProviders
  this.authProviders = options.authProviders || {
      &#x27;mongocr&#x27;: new MongoCR(options.bson), &#x27;x509&#x27;: new X509(options.bson)
    , &#x27;plain&#x27;: new Plain(options.bson), &#x27;gssapi&#x27;: new GSSAPI(options.bson)
    , &#x27;sspi&#x27;: new SSPI(options.bson), &#x27;scram-sha-1&#x27;: new ScramSHA1(options.bson)
  }

  // Contains the reconnect connection
  this.reconnectConnection = null;

  // Are we currently authenticating
  this.authenticating = false;
  this.loggingout = false;
  this.nonAuthenticatedConnections = [];
  this.authenticatingTimestamp = null;
  // Number of consecutive timeouts caught
  this.numberOfConsecutiveTimeouts = 0;
  // Current pool Index
  this.connectionIndex = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state" id="apidoc.element.mongodb-core.replset_state">
        function <span class="apidocSignatureSpan">mongodb-core.</span>replset_state
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replset_state = function (options) {
  options = options || {};
  // Add event listener
  EventEmitter.call(this);
  // Topology state
  this.topologyType = TopologyType.ReplicaSetNoPrimary;
  this.setName = options.setName;

  // Server set
  this.set = {};

  // Unpacked options
  this.id = options.id;
  this.setName = options.setName;

  // Replicaset logger
  this.logger = options.logger || Logger(&#x27;ReplSet&#x27;, options);

  // Server selection index
  this.index = 0;
  // Acceptable latency
  this.acceptableLatency = options.acceptableLatency || 15;

  // heartbeatFrequencyMS
  this.heartbeatFrequencyMS = options.heartbeatFrequencyMS || 10000;

  // Server side
  this.primary = null;
  this.secondaries = [];
  this.arbiters = [];
  this.passives = [];
  this.ghosts = [];
  // Current unknown hosts
  this.unknownServers = [];
  // In set status
  this.set = {};
  // Status
  this.maxElectionId = null;
  this.maxSetVersion = 0;
  // Description of the Replicaset
  this.replicasetDescription = {
    &#x22;topologyType&#x22;: &#x22;Unknown&#x22;, &#x22;servers&#x22;: []
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.sspi" id="apidoc.element.mongodb-core.sspi">
        function <span class="apidocSignatureSpan">mongodb-core.</span>sspi
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sspi = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.2_4_support" id="apidoc.module.mongodb-core.2_4_support">module mongodb-core.2_4_support</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.2_4_support" id="apidoc.element.mongodb-core.2_4_support.2_4_support">
        function <span class="apidocSignatureSpan">mongodb-core.</span>2_4_support
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">2_4_support = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.2_4_support.prototype" id="apidoc.module.mongodb-core.2_4_support.prototype">module mongodb-core.2_4_support.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.prototype.command" id="apidoc.element.mongodb-core.2_4_support.prototype.command">
        function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>command
        <span class="apidocSignatureSpan">(bson, ns, cmd, cursorState, topology, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (bson, ns, cmd, cursorState, topology, options) {
  // Establish type of command
  if(cmd.find) {
    return setupClassicFind(bson, ns, cmd, cursorState, topology, options)
  } else if(cursorState.cursorId != null) {
    return;
  } else if(cmd) {
    return setupCommand(bson, ns, cmd, cursorState, topology, options);
  } else {
    throw new MongoError(f(&#x22;command %s does not return a cursor&#x22;, JSON.stringify(cmd)));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Add event listeners
server.on(&#x27;connect&#x27;, function(_server) {
  console.log(&#x27;connected&#x27;);

  // Execute the ismaster command
  _server.<span class="apidocCodeKeywordSpan">command</span>(&#x27;system.$cmd&#x27;, {ismaster: true}, function(err, result) {

// Perform a document insert
_server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(2, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.prototype.getMore" id="apidoc.element.mongodb-core.2_4_support.prototype.getMore">
        function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>getMore
        <span class="apidocSignatureSpan">(bson, ns, cursorState, batchSize, raw, connection, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMore = function (bson, ns, cursorState, batchSize, raw, connection, options, callback) {
  // Create getMore command
  var getMore = new GetMore(bson, ns, cursorState.cursorId, {numberToReturn: batchSize});

  // Query callback
  var queryCallback = function(err, result) {
    if(err) return callback(err);
    // Get the raw message
    var r = result.message;

    // If we have a timed out query or a cursor that was killed
    if((r.responseFlags &#x26; (1 &#x3c;&#x3c; 0)) != 0) {
      return callback(new MongoError(&#x22;cursor does not exist, was killed or timed out&#x22;), null);
    }

    // Ensure we have a Long valie cursor id
    var cursorId = typeof r.cursorId == &#x27;number&#x27;
      ? Long.fromNumber(r.cursorId)
      : r.cursorId;

    // Set all the values
    cursorState.documents = r.documents;
    cursorState.cursorId = cursorId;

    // Return
    callback(null, null, r.connection);
  }

  // Contains any query options
  var queryOptions = {};

  // If we have a raw query decorate the function
  if(raw) {
    queryOptions.raw = raw;
  }

  // Check if we need to promote longs
  if(typeof cursorState.promoteLongs == &#x27;boolean&#x27;) {
    queryOptions.promoteLongs = cursorState.promoteLongs;
  }

  if(typeof cursorState.promoteValues == &#x27;boolean&#x27;) {
    queryOptions.promoteValues = cursorState.promoteValues;
  }

  if(typeof cursorState.promoteBuffers == &#x27;boolean&#x27;) {
    queryOptions.promoteBuffers = cursorState.promoteBuffers;
  }

  // Write out the getMore command
  connection.write(getMore, queryOptions, queryCallback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  batchSize = this.cursorState.limit - this.cursorState.currentLimit;
}

// Default pool
var pool = this.server.s.pool;

// We have a wire protocol handler
this.server.wireProtocolHandler.<span class="apidocCodeKeywordSpan">getMore</span>(this.bson, this.ns, this.cursorState, batchSize
, raw, pool, this.options, callback);
}

Cursor.prototype._killcursor = function(callback) {
// Set cursor to dead
this.cursorState.dead = true;
this.cursorState.killed = true;
// Remove documents
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.prototype.insert" id="apidoc.element.mongodb-core.2_4_support.prototype.insert">
        function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>insert
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (pool, ismaster, ns, bson, ops, options, callback) {
  options = options || {};
  // Default is ordered execution
  var ordered = typeof options.ordered == &#x27;boolean&#x27; ? options.ordered : true;
  ops = Array.isArray(ops) ? ops :[ops];

  // If we have more than a 1000 ops fails
  if(ops.length &#x3e; 1000) return callback(new MongoError(&#x22;exceeded maximum write batch size of 1000&#x22;));

  // Write concern
  var writeConcern = options.writeConcern || {w:1};

  // We are unordered
  if(!ordered || writeConcern.w == 0) {
    return executeUnordered(&#x27;insert&#x27;, Insert, ismaster, ns, bson, pool, ops, options, callback);
  }

  return executeOrdered(&#x27;insert&#x27;, Insert, ismaster, ns, bson, pool, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     });
//   }
// }

server.on(&#x27;connect&#x27;, function(_server) {
// console.log(&#x22;===== connect&#x22;)
setInterval(function() {
  _server.<span class="apidocCodeKeywordSpan">insert</span>(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.auth(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.prototype.killCursor" id="apidoc.element.mongodb-core.2_4_support.prototype.killCursor">
        function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>killCursor
        <span class="apidocSignatureSpan">(bson, ns, cursorId, pool, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">killCursor = function (bson, ns, cursorId, pool, callback) {
  // Create a kill cursor command
  var killCursor = new KillCursor(bson, [cursorId]);
  // Execute the kill cursor command
  if(pool &#x26;&#x26; pool.isConnected()) {
    pool.write(killCursor, {
      immediateRelease:true, noResponse: true
    });
  }

  // Callback
  if(typeof callback == &#x27;function&#x27;) callback(null, null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   if(callback) callback(null, null);
   return;
 }

 // Default pool
 var pool = this.server.s.pool;
 // Execute command
 this.server.wireProtocolHandler.<span class="apidocCodeKeywordSpan">killCursor</span>(this.bson, this.ns, this.cursorState.cursorId
, pool, callback);
}

/**
* Clone the cursor
* @method
* @return {Cursor}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.prototype.remove" id="apidoc.element.mongodb-core.2_4_support.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>remove
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (pool, ismaster, ns, bson, ops, options, callback) {
  options = options || {};
  // Default is ordered execution
  var ordered = typeof options.ordered == &#x27;boolean&#x27; ? options.ordered : true;
  ops = Array.isArray(ops) ? ops :[ops];

  // Write concern
  var writeConcern = options.writeConcern || {w:1};

  // We are unordered
  if(!ordered || writeConcern.w == 0) {
    return executeUnordered(&#x27;remove&#x27;, Remove, ismaster, ns, bson, pool, ops, options, callback);
  }

  return executeOrdered(&#x27;remove&#x27;, Remove, ismaster, ns, bson, pool, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_4_support.prototype.update" id="apidoc.element.mongodb-core.2_4_support.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.2_4_support.prototype.</span>update
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (pool, ismaster, ns, bson, ops, options, callback) {
  options = options || {};
  // Default is ordered execution
  var ordered = typeof options.ordered == &#x27;boolean&#x27; ? options.ordered : true;
  ops = Array.isArray(ops) ? ops :[ops];

  // Write concern
  var writeConcern = options.writeConcern || {w:1};

  // We are unordered
  if(!ordered || writeConcern.w == 0) {
    return executeUnordered(&#x27;update&#x27;, Update, ismaster, ns, bson, pool, ops, options, callback);
  }

  return executeOrdered(&#x27;update&#x27;, Update, ismaster, ns, bson, pool, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.2_6_support" id="apidoc.module.mongodb-core.2_6_support">module mongodb-core.2_6_support</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.2_6_support" id="apidoc.element.mongodb-core.2_6_support.2_6_support">
        function <span class="apidocSignatureSpan">mongodb-core.</span>2_6_support
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">2_6_support = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.2_6_support.prototype" id="apidoc.module.mongodb-core.2_6_support.prototype">module mongodb-core.2_6_support.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.prototype.command" id="apidoc.element.mongodb-core.2_6_support.prototype.command">
        function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>command
        <span class="apidocSignatureSpan">(bson, ns, cmd, cursorState, topology, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (bson, ns, cmd, cursorState, topology, options) {
  // Establish type of command
  if(cmd.find) {
    return setupClassicFind(bson, ns, cmd, cursorState, topology, options)
  } else if(cursorState.cursorId != null) {
    return;
  } else if(cmd) {
    return setupCommand(bson, ns, cmd, cursorState, topology, options);
  } else {
    throw new MongoError(f(&#x22;command %s does not return a cursor&#x22;, JSON.stringify(cmd)));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Add event listeners
server.on(&#x27;connect&#x27;, function(_server) {
  console.log(&#x27;connected&#x27;);

  // Execute the ismaster command
  _server.<span class="apidocCodeKeywordSpan">command</span>(&#x27;system.$cmd&#x27;, {ismaster: true}, function(err, result) {

// Perform a document insert
_server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(2, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.prototype.getMore" id="apidoc.element.mongodb-core.2_6_support.prototype.getMore">
        function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>getMore
        <span class="apidocSignatureSpan">(bson, ns, cursorState, batchSize, raw, connection, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMore = function (bson, ns, cursorState, batchSize, raw, connection, options, callback) {
  // Create getMore command
  var getMore = new GetMore(bson, ns, cursorState.cursorId, {numberToReturn: batchSize});

  // Query callback
  var queryCallback = function(err, result) {
    if(err) return callback(err);
    // Get the raw message
    var r = result.message;

    // If we have a timed out query or a cursor that was killed
    if((r.responseFlags &#x26; (1 &#x3c;&#x3c; 0)) != 0) {
      return callback(new MongoError(&#x22;cursor does not exist, was killed or timed out&#x22;), null);
    }

    // Ensure we have a Long valie cursor id
    var cursorId = typeof r.cursorId == &#x27;number&#x27;
      ? Long.fromNumber(r.cursorId)
      : r.cursorId;

    // Set all the values
    cursorState.documents = r.documents;
    cursorState.cursorId = cursorId;

    // Return
    callback(null, null, r.connection);
  }

  // Contains any query options
  var queryOptions = {};

  // If we have a raw query decorate the function
  if(raw) {
    queryOptions.raw = raw;
  }

  // Check if we need to promote longs
  if(typeof cursorState.promoteLongs == &#x27;boolean&#x27;) {
    queryOptions.promoteLongs = cursorState.promoteLongs;
  }

  if(typeof cursorState.promoteValues == &#x27;boolean&#x27;) {
    queryOptions.promoteValues = cursorState.promoteValues;
  }

  if(typeof cursorState.promoteBuffers == &#x27;boolean&#x27;) {
    queryOptions.promoteBuffers = cursorState.promoteBuffers;
  }

  // Write out the getMore command
  connection.write(getMore, queryOptions, queryCallback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  batchSize = this.cursorState.limit - this.cursorState.currentLimit;
}

// Default pool
var pool = this.server.s.pool;

// We have a wire protocol handler
this.server.wireProtocolHandler.<span class="apidocCodeKeywordSpan">getMore</span>(this.bson, this.ns, this.cursorState, batchSize
, raw, pool, this.options, callback);
}

Cursor.prototype._killcursor = function(callback) {
// Set cursor to dead
this.cursorState.dead = true;
this.cursorState.killed = true;
// Remove documents
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.prototype.insert" id="apidoc.element.mongodb-core.2_6_support.prototype.insert">
        function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>insert
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (pool, ismaster, ns, bson, ops, options, callback) {
  executeWrite(pool, bson, &#x27;insert&#x27;, &#x27;documents&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     });
//   }
// }

server.on(&#x27;connect&#x27;, function(_server) {
// console.log(&#x22;===== connect&#x22;)
setInterval(function() {
  _server.<span class="apidocCodeKeywordSpan">insert</span>(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.auth(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.prototype.killCursor" id="apidoc.element.mongodb-core.2_6_support.prototype.killCursor">
        function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>killCursor
        <span class="apidocSignatureSpan">(bson, ns, cursorId, pool, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">killCursor = function (bson, ns, cursorId, pool, callback) {
  // Create a kill cursor command
  var killCursor = new KillCursor(bson, [cursorId]);
  // Execute the kill cursor command
  if(pool &#x26;&#x26; pool.isConnected()) {
    pool.write(killCursor, {
      immediateRelease:true, noResponse: true
    });
  }

  // Callback
  if(typeof callback == &#x27;function&#x27;) callback(null, null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   if(callback) callback(null, null);
   return;
 }

 // Default pool
 var pool = this.server.s.pool;
 // Execute command
 this.server.wireProtocolHandler.<span class="apidocCodeKeywordSpan">killCursor</span>(this.bson, this.ns, this.cursorState.cursorId
, pool, callback);
}

/**
* Clone the cursor
* @method
* @return {Cursor}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.prototype.remove" id="apidoc.element.mongodb-core.2_6_support.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>remove
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (pool, ismaster, ns, bson, ops, options, callback) {
  executeWrite(pool, bson, &#x27;delete&#x27;, &#x27;deletes&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.2_6_support.prototype.update" id="apidoc.element.mongodb-core.2_6_support.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.2_6_support.prototype.</span>update
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (pool, ismaster, ns, bson, ops, options, callback) {
  executeWrite(pool, bson, &#x27;update&#x27;, &#x27;updates&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.3_2_support" id="apidoc.module.mongodb-core.3_2_support">module mongodb-core.3_2_support</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.3_2_support" id="apidoc.element.mongodb-core.3_2_support.3_2_support">
        function <span class="apidocSignatureSpan">mongodb-core.</span>3_2_support
        <span class="apidocSignatureSpan">(legacyWireProtocol)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">3_2_support = function (legacyWireProtocol) {
  this.legacyWireProtocol = legacyWireProtocol;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.3_2_support.prototype" id="apidoc.module.mongodb-core.3_2_support.prototype">module mongodb-core.3_2_support.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.prototype.command" id="apidoc.element.mongodb-core.3_2_support.prototype.command">
        function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>command
        <span class="apidocSignatureSpan">(bson, ns, cmd, cursorState, topology, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (bson, ns, cmd, cursorState, topology, options) {
  options = options || {}
  // Check if this is a wire protocol command or not
  var wireProtocolCommand = typeof options.wireProtocolCommand == &#x27;boolean&#x27; ? options.wireProtocolCommand : true;

  // Establish type of command
  if(cmd.find &#x26;&#x26; wireProtocolCommand) {
    // Create the find command
    var query = executeFindCommand(bson, ns, cmd, cursorState, topology, options)
    // Mark the cmd as virtual
    cmd.virtual = false;
    // Signal the documents are in the firstBatch value
    query.documentsReturnedIn = &#x27;firstBatch&#x27;;
    // Return the query
    return query;
  } else if(cursorState.cursorId != null) {
    return;
  } else if(cmd) {
    return setupCommand(bson, ns, cmd, cursorState, topology, options);
  } else {
    throw new MongoError(f(&#x22;command %s does not return a cursor&#x22;, JSON.stringify(cmd)));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Add event listeners
server.on(&#x27;connect&#x27;, function(_server) {
  console.log(&#x27;connected&#x27;);

  // Execute the ismaster command
  _server.<span class="apidocCodeKeywordSpan">command</span>(&#x27;system.$cmd&#x27;, {ismaster: true}, function(err, result) {

// Perform a document insert
_server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(2, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.prototype.getMore" id="apidoc.element.mongodb-core.3_2_support.prototype.getMore">
        function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>getMore
        <span class="apidocSignatureSpan">(bson, ns, cursorState, batchSize, raw, connection, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMore = function (bson, ns, cursorState, batchSize, raw, connection, options, callback) {
  options = options || {};
  // Build command namespace
  var parts = ns.split(/\./);
  // Command namespace
  var commandns = f(&#x27;%s.$cmd&#x27;, parts.shift());

  // Create getMore command
  var getMoreCmd = {
    getMore: cursorState.cursorId,
    collection: parts.join(&#x27;.&#x27;),
    batchSize: Math.abs(batchSize)
  }

  if(cursorState.cmd.tailable
    &#x26;&#x26; typeof cursorState.cmd.maxAwaitTimeMS == &#x27;number&#x27;) {
    getMoreCmd.maxTimeMS = cursorState.cmd.maxAwaitTimeMS;
  }

  // Build Query object
  var query = new Query(bson, commandns, getMoreCmd, {
      numberToSkip: 0, numberToReturn: -1
    , checkKeys: false, returnFieldSelector: null
  });

  // Set query flags
  query.slaveOk = true;

  // Query callback
  var queryCallback = function(err, result) {
    if(err) return callback(err);
    // Get the raw message
    var r = result.message;

    // If we have a timed out query or a cursor that was killed
    if((r.responseFlags &#x26; (1 &#x3c;&#x3c; 0)) != 0) {
      return callback(new MongoError(&#x22;cursor killed or timed out&#x22;), null);
    }

    // Raw, return all the extracted documents
    if(raw) {
      cursorState.documents = r.documents;
      cursorState.cursorId = r.cursorId;
      return callback(null, r.documents);
    }

    // We have an error detected
    if(r.documents[0].ok == 0) {
      return callback(MongoError.create(r.documents[0]));
    }

    // Ensure we have a Long valid cursor id
    var cursorId = typeof r.documents[0].cursor.id == &#x27;number&#x27;
      ? Long.fromNumber(r.documents[0].cursor.id)
      : r.documents[0].cursor.id;

    // Set all the values
    cursorState.documents = r.documents[0].cursor.nextBatch;
    cursorState.cursorId = cursorId;

    // Return the result
    callback(null, r.documents[0], r.connection);
  }

  // Query options
  var queryOptions = { command: true };

  // If we have a raw query decorate the function
  if(raw) {
    queryOptions.raw = raw;
  }

  // Add the result field needed
  queryOptions.documentsReturnedIn = &#x27;nextBatch&#x27;;

  // Check if we need to promote longs
  if(typeof cursorState.promoteLongs == &#x27;boolean&#x27;) {
    queryOptions.promoteLongs = cursorState.promoteLongs;
  }

  if(typeof cursorState.promoteValues == &#x27;boolean&#x27;) {
    queryOptions.promoteValues = cursorState.promoteValues;
  }

  if(typeof cursorState.promoteBuffers == &#x27;boolean&#x27;) {
    queryOptions.promoteBuffers = cursorState.promoteBuffers;
  }

  // Write out the getMore command
  connection.write(query, queryOptions, queryCallback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  batchSize = this.cursorState.limit - this.cursorState.currentLimit;
}

// Default pool
var pool = this.server.s.pool;

// We have a wire protocol handler
this.server.wireProtocolHandler.<span class="apidocCodeKeywordSpan">getMore</span>(this.bson, this.ns, this.cursorState, batchSize
, raw, pool, this.options, callback);
}

Cursor.prototype._killcursor = function(callback) {
// Set cursor to dead
this.cursorState.dead = true;
this.cursorState.killed = true;
// Remove documents
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.prototype.insert" id="apidoc.element.mongodb-core.3_2_support.prototype.insert">
        function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>insert
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (pool, ismaster, ns, bson, ops, options, callback) {
  executeWrite(pool, bson, &#x27;insert&#x27;, &#x27;documents&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     });
//   }
// }

server.on(&#x27;connect&#x27;, function(_server) {
// console.log(&#x22;===== connect&#x22;)
setInterval(function() {
  _server.<span class="apidocCodeKeywordSpan">insert</span>(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.auth(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.prototype.killCursor" id="apidoc.element.mongodb-core.3_2_support.prototype.killCursor">
        function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>killCursor
        <span class="apidocSignatureSpan">(bson, ns, cursorId, pool, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">killCursor = function (bson, ns, cursorId, pool, callback) {
  // Build command namespace
  var parts = ns.split(/\./);
  // Command namespace
  var commandns = f(&#x27;%s.$cmd&#x27;, parts.shift());
  // Create getMore command
  var killcursorCmd = {
    killCursors: parts.join(&#x27;.&#x27;),
    cursors: [cursorId]
  }

  // Build Query object
  var query = new Query(bson, commandns, killcursorCmd, {
      numberToSkip: 0, numberToReturn: -1
    , checkKeys: false, returnFieldSelector: null
  });

  // Set query flags
  query.slaveOk = true;

  // Kill cursor callback
  var killCursorCallback = function(err, result) {
    if(err) {
      if(typeof callback != &#x27;function&#x27;) return;
      return callback(err);
    }

    // Result
    var r = result.message;
    // If we have a timed out query or a cursor that was killed
    if((r.responseFlags &#x26; (1 &#x3c;&#x3c; 0)) != 0) {
      if(typeof callback != &#x27;function&#x27;) return;
      return callback(new MongoError(&#x22;cursor killed or timed out&#x22;), null);
    }

    if(!Array.isArray(r.documents) || r.documents.length == 0) {
      if(typeof callback != &#x27;function&#x27;) return;
      return callback(new MongoError(f(&#x27;invalid killCursors result returned for cursor id %s&#x27;, cursorId)));
    }

    // Return the result
    if(typeof callback == &#x27;function&#x27;) {
      callback(null, r.documents[0]);
    }
  }

  // Execute the kill cursor command
  if(pool &#x26;&#x26; pool.isConnected()) {
    pool.write(query, {
      command: true
    }, killCursorCallback);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   if(callback) callback(null, null);
   return;
 }

 // Default pool
 var pool = this.server.s.pool;
 // Execute command
 this.server.wireProtocolHandler.<span class="apidocCodeKeywordSpan">killCursor</span>(this.bson, this.ns, this.cursorState.cursorId
, pool, callback);
}

/**
* Clone the cursor
* @method
* @return {Cursor}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.prototype.remove" id="apidoc.element.mongodb-core.3_2_support.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>remove
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (pool, ismaster, ns, bson, ops, options, callback) {
  executeWrite(pool, bson, &#x27;delete&#x27;, &#x27;deletes&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.3_2_support.prototype.update" id="apidoc.element.mongodb-core.3_2_support.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.3_2_support.prototype.</span>update
        <span class="apidocSignatureSpan">(pool, ismaster, ns, bson, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (pool, ismaster, ns, bson, ops, options, callback) {
  executeWrite(pool, bson, &#x27;update&#x27;, &#x27;updates&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON" id="apidoc.module.mongodb-core.BSON">module mongodb-core.BSON</a></h1>




    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.BSON" id="apidoc.element.mongodb-core.BSON.BSON">
        function <span class="apidocSignatureSpan">mongodb-core.</span>BSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">BSON = function () {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.BSONRegExp" id="apidoc.element.mongodb-core.BSON.BSONRegExp">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSONRegExp
        <span class="apidocSignatureSpan">(pattern, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BSONRegExp(pattern, options) {
  if(!(this instanceof BSONRegExp)) return new BSONRegExp();

  // Execute
  this._bsontype = &#x27;BSONRegExp&#x27;;
  this.pattern = pattern || &#x27;&#x27;;
  this.options = options || &#x27;&#x27;;

  // Validate options
  for(var i = 0; i &#x3c; this.options.length; i++) {
    if(!(this.options[i] == &#x27;i&#x27;
      || this.options[i] == &#x27;m&#x27;
      || this.options[i] == &#x27;x&#x27;
      || this.options[i] == &#x27;l&#x27;
      || this.options[i] == &#x27;s&#x27;
      || this.options[i] == &#x27;u&#x27;
    )) {
      throw new Error(&#x27;the regular expression options [&#x27; + this.options[i] + &#x22;] is not supported&#x22;);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary" id="apidoc.element.mongodb-core.BSON.Binary">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Binary
        <span class="apidocSignatureSpan">(buffer, subType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Binary(buffer, subType) {
  if(!(this instanceof Binary)) return new Binary(buffer, subType);

  this._bsontype = &#x27;Binary&#x27;;

  if(buffer instanceof Number) {
    this.sub_type = buffer;
    this.position = 0;
  } else {
    this.sub_type = subType == null ? BSON_BINARY_SUBTYPE_DEFAULT : subType;
    this.position = 0;
  }

  if(buffer != null &#x26;&#x26; !(buffer instanceof Number)) {
    // Only accept Buffer, Uint8Array or Arrays
    if(typeof buffer == &#x27;string&#x27;) {
      // Different ways of writing the length of the string for the different types
      if(typeof Buffer != &#x27;undefined&#x27;) {
        this.buffer = new Buffer(buffer);
      } else if(typeof Uint8Array != &#x27;undefined&#x27; || (Object.prototype.toString.call(buffer) == &#x27;[object Array]&#x27;)) {
        this.buffer = writeStringToArray(buffer);
      } else {
        throw new Error(&#x22;only String, Buffer, Uint8Array or Array accepted&#x22;);
      }
    } else {
      this.buffer = buffer;
    }
    this.position = buffer.length;
  } else {
    if(typeof Buffer != &#x27;undefined&#x27;) {
      this.buffer =  new Buffer(Binary.BUFFER_SIZE);
    } else if(typeof Uint8Array != &#x27;undefined&#x27;){
      this.buffer = new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE));
    } else {
      this.buffer = new Array(Binary.BUFFER_SIZE);
    }
    // Set position to start of buffer
    this.position = 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Code" id="apidoc.element.mongodb-core.BSON.Code">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Code
        <span class="apidocSignatureSpan">(code, scope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Code(code, scope) {
  if(!(this instanceof Code)) return new Code(code, scope);
  this._bsontype = &#x27;Code&#x27;;
  this.code = code;
  this.scope = scope;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.DBRef" id="apidoc.element.mongodb-core.BSON.DBRef">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>DBRef
        <span class="apidocSignatureSpan">(namespace, oid, db)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DBRef(namespace, oid, db) {
  if(!(this instanceof DBRef)) return new DBRef(namespace, oid, db);

  this._bsontype = &#x27;DBRef&#x27;;
  this.namespace = namespace;
  this.oid = oid;
  this.db = db;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Decimal128" id="apidoc.element.mongodb-core.BSON.Decimal128">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Decimal128
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Decimal128 = function (bytes) {
  this._bsontype = &#x27;Decimal128&#x27;;
  this.bytes = bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Double" id="apidoc.element.mongodb-core.BSON.Double">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Double
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Double(value) {
  if(!(this instanceof Double)) return new Double(value);

  this._bsontype = &#x27;Double&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Int32" id="apidoc.element.mongodb-core.BSON.Int32">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Int32
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Int32 = function (value) {
  if(!(this instanceof Int32)) return new Int32(value);

  this._bsontype = &#x27;Int32&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long" id="apidoc.element.mongodb-core.BSON.Long">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Long
        <span class="apidocSignatureSpan">(low, high)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Long(low, high) {
  if(!(this instanceof Long)) return new Long(low, high);

  this._bsontype = &#x27;Long&#x27;;
<span class="apidocCodeCommentSpan">  /**
   * @type {number}
   * @ignore
   */
</span>  this.low_ = low | 0;  // force into 32 signed bits.

  /**
   * @type {number}
   * @ignore
   */
  this.high_ = high | 0;  // force into 32 signed bits.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Map" id="apidoc.element.mongodb-core.BSON.Map">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Map
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Map() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.MaxKey" id="apidoc.element.mongodb-core.BSON.MaxKey">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MaxKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MaxKey() {
  if(!(this instanceof MaxKey)) return new MaxKey();

  this._bsontype = &#x27;MaxKey&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.MinKey" id="apidoc.element.mongodb-core.BSON.MinKey">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MinKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MinKey() {
  if(!(this instanceof MinKey)) return new MinKey();

  this._bsontype = &#x27;MinKey&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID" id="apidoc.element.mongodb-core.BSON.ObjectID">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>ObjectID
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ObjectID(id) {
  // Duck-typing to support ObjectId from different npm packages
  if(id instanceof ObjectID) return id;
  if(!(this instanceof ObjectID)) return new ObjectID(id);

  this._bsontype = &#x27;ObjectID&#x27;;

  // The most common usecase (blank id, new objectId instance)
  if(id == null || typeof id == &#x27;number&#x27;) {
    // Generate a new id
    this.id = this.generate(id);
    // If we are caching the hex string
    if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
    // Return the object
    return;
  }

  // Check if the passed in id is valid
  var valid = ObjectID.isValid(id);

  // Throw an error if it&#x27;s not a valid setup
  if(!valid &#x26;&#x26; id != null){
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24 &#x26;&#x26; hasBufferType) {
    return new ObjectID(new Buffer(id, &#x27;hex&#x27;));
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24) {
    return ObjectID.createFromHexString(id);
  } else if(id != null &#x26;&#x26; id.length === 12) {
    // assume 12 byte string
    this.id = id;
  } else if(id != null &#x26;&#x26; id.toHexString) {
    // Duck-typing to support ObjectId from different npm packages
    return id;
  } else {
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  }

  if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectId" id="apidoc.element.mongodb-core.BSON.ObjectId">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>ObjectId
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ObjectID(id) {
  // Duck-typing to support ObjectId from different npm packages
  if(id instanceof ObjectID) return id;
  if(!(this instanceof ObjectID)) return new ObjectID(id);

  this._bsontype = &#x27;ObjectID&#x27;;

  // The most common usecase (blank id, new objectId instance)
  if(id == null || typeof id == &#x27;number&#x27;) {
    // Generate a new id
    this.id = this.generate(id);
    // If we are caching the hex string
    if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
    // Return the object
    return;
  }

  // Check if the passed in id is valid
  var valid = ObjectID.isValid(id);

  // Throw an error if it&#x27;s not a valid setup
  if(!valid &#x26;&#x26; id != null){
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24 &#x26;&#x26; hasBufferType) {
    return new ObjectID(new Buffer(id, &#x27;hex&#x27;));
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24) {
    return ObjectID.createFromHexString(id);
  } else if(id != null &#x26;&#x26; id.length === 12) {
    // assume 12 byte string
    this.id = id;
  } else if(id != null &#x26;&#x26; id.toHexString) {
    // Duck-typing to support ObjectId from different npm packages
    return id;
  } else {
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  }

  if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol" id="apidoc.element.mongodb-core.BSON.Symbol">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Symbol
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Symbol(value) {
  if(!(this instanceof Symbol)) return new Symbol(value);
  this._bsontype = &#x27;Symbol&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp" id="apidoc.element.mongodb-core.BSON.Timestamp">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Timestamp
        <span class="apidocSignatureSpan">(low, high)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Timestamp(low, high) {
  if(!(this instanceof Timestamp)) return new Timestamp(low, high);
  this._bsontype = &#x27;Timestamp&#x27;;
<span class="apidocCodeCommentSpan">  /**
   * @type {number}
   * @ignore
   */
</span>  this.low_ = low | 0;  // force into 32 signed bits.

  /**
   * @type {number}
   * @ignore
   */
  this.high_ = high | 0;  // force into 32 signed bits.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.BSONRegExp" id="apidoc.module.mongodb-core.BSON.BSONRegExp">module mongodb-core.BSON.BSONRegExp</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.BSONRegExp.BSONRegExp" id="apidoc.element.mongodb-core.BSON.BSONRegExp.BSONRegExp">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>BSONRegExp
        <span class="apidocSignatureSpan">(pattern, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BSONRegExp(pattern, options) {
  if(!(this instanceof BSONRegExp)) return new BSONRegExp();

  // Execute
  this._bsontype = &#x27;BSONRegExp&#x27;;
  this.pattern = pattern || &#x27;&#x27;;
  this.options = options || &#x27;&#x27;;

  // Validate options
  for(var i = 0; i &#x3c; this.options.length; i++) {
    if(!(this.options[i] == &#x27;i&#x27;
      || this.options[i] == &#x27;m&#x27;
      || this.options[i] == &#x27;x&#x27;
      || this.options[i] == &#x27;l&#x27;
      || this.options[i] == &#x27;s&#x27;
      || this.options[i] == &#x27;u&#x27;
    )) {
      throw new Error(&#x27;the regular expression options [&#x27; + this.options[i] + &#x22;] is not supported&#x22;);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Binary" id="apidoc.module.mongodb-core.BSON.Binary">module mongodb-core.BSON.Binary</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.Binary" id="apidoc.element.mongodb-core.BSON.Binary.Binary">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Binary
        <span class="apidocSignatureSpan">(buffer, subType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Binary(buffer, subType) {
  if(!(this instanceof Binary)) return new Binary(buffer, subType);

  this._bsontype = &#x27;Binary&#x27;;

  if(buffer instanceof Number) {
    this.sub_type = buffer;
    this.position = 0;
  } else {
    this.sub_type = subType == null ? BSON_BINARY_SUBTYPE_DEFAULT : subType;
    this.position = 0;
  }

  if(buffer != null &#x26;&#x26; !(buffer instanceof Number)) {
    // Only accept Buffer, Uint8Array or Arrays
    if(typeof buffer == &#x27;string&#x27;) {
      // Different ways of writing the length of the string for the different types
      if(typeof Buffer != &#x27;undefined&#x27;) {
        this.buffer = new Buffer(buffer);
      } else if(typeof Uint8Array != &#x27;undefined&#x27; || (Object.prototype.toString.call(buffer) == &#x27;[object Array]&#x27;)) {
        this.buffer = writeStringToArray(buffer);
      } else {
        throw new Error(&#x22;only String, Buffer, Uint8Array or Array accepted&#x22;);
      }
    } else {
      this.buffer = buffer;
    }
    this.position = buffer.length;
  } else {
    if(typeof Buffer != &#x27;undefined&#x27;) {
      this.buffer =  new Buffer(Binary.BUFFER_SIZE);
    } else if(typeof Uint8Array != &#x27;undefined&#x27;){
      this.buffer = new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE));
    } else {
      this.buffer = new Array(Binary.BUFFER_SIZE);
    }
    // Set position to start of buffer
    this.position = 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Binary.prototype" id="apidoc.module.mongodb-core.BSON.Binary.prototype">module mongodb-core.BSON.Binary.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.length" id="apidoc.element.mongodb-core.BSON.Binary.prototype.length">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>length
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function length() {
  return this.position;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.put" id="apidoc.element.mongodb-core.BSON.Binary.prototype.put">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>put
        <span class="apidocSignatureSpan">(byte_value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function put(byte_value) {
  // If it&#x27;s a string and a has more than one character throw an error
  if(byte_value[&#x27;length&#x27;] != null &#x26;&#x26; typeof byte_value != &#x27;number&#x27; &#x26;&#x26; byte_value.length != 1) throw new Error(&#x22;only accepts single
 character String, Uint8Array or Array&#x22;);
  if(typeof byte_value != &#x27;number&#x27; &#x26;&#x26; byte_value &#x3c; 0 || byte_value &#x3e; 255) throw new Error(&#x22;only accepts number in a valid unsigned
 byte range 0-255&#x22;);

  // Decode the byte value once
  var decoded_byte = null;
  if(typeof byte_value == &#x27;string&#x27;) {
    decoded_byte = byte_value.charCodeAt(0);
  } else if(byte_value[&#x27;length&#x27;] != null) {
    decoded_byte = byte_value[0];
  } else {
    decoded_byte = byte_value;
  }

  if(this.buffer.length &#x3e; this.position) {
    this.buffer[this.position++] = decoded_byte;
  } else {
    if(typeof Buffer != &#x27;undefined&#x27; &#x26;&#x26; Buffer.isBuffer(this.buffer)) {
      // Create additional overflow buffer
      var buffer = new Buffer(Binary.BUFFER_SIZE + this.buffer.length);
      // Combine the two buffers together
      this.buffer.copy(buffer, 0, 0, this.buffer.length);
      this.buffer = buffer;
      this.buffer[this.position++] = decoded_byte;
    } else {
      var buffer = null;
      // Create a new buffer (typed or normal array)
      if(Object.prototype.toString.call(this.buffer) == &#x27;[object Uint8Array]&#x27;) {
        buffer = new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE + this.buffer.length));
      } else {
        buffer = new Array(Binary.BUFFER_SIZE + this.buffer.length);
      }

      // We need to copy all the content to the new array
      for(var i = 0; i &#x3c; this.buffer.length; i++) {
        buffer[i] = this.buffer[i];
      }

      // Reassign the buffer
      this.buffer = buffer;
      // Write the byte
      this.buffer[this.position++] = decoded_byte;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.read" id="apidoc.element.mongodb-core.BSON.Binary.prototype.read">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>read
        <span class="apidocSignatureSpan">(position, length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function read(position, length) {
  length = length &#x26;&#x26; length &#x3e; 0
    ? length
    : this.position;

  // Let&#x27;s return the data based on the type we have
  if(this.buffer[&#x27;slice&#x27;]) {
    return this.buffer.slice(position, position + length);
  } else {
    // Create a buffer to keep the result
    var buffer = typeof Uint8Array != &#x27;undefined&#x27; ? new Uint8Array(new ArrayBuffer(length)) : new Array(length);
    for(var i = 0; i &#x3c; length; i++) {
      buffer[i] = this.buffer[position++];
    }
  }
  // Return the buffer
  return buffer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Binary.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.buffer != null ? this.buffer.toString(&#x27;base64&#x27;) : &#x27;&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.toString" id="apidoc.element.mongodb-core.BSON.Binary.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>toString
        <span class="apidocSignatureSpan">(format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (format) {
  return this.buffer != null ? this.buffer.slice(0, this.position).toString(format) : &#x27;&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.value" id="apidoc.element.mongodb-core.BSON.Binary.prototype.value">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>value
        <span class="apidocSignatureSpan">(asRaw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function value(asRaw) {
  asRaw = asRaw == null ? false : asRaw;

  // Optimize to serialize for the situation where the data == size of buffer
  if(asRaw &#x26;&#x26; typeof Buffer != &#x27;undefined&#x27; &#x26;&#x26; Buffer.isBuffer(this.buffer) &#x26;&#x26; this.buffer.length == this.position)
    return this.buffer;

  // If it&#x27;s a node.js buffer object
  if(typeof Buffer != &#x27;undefined&#x27; &#x26;&#x26; Buffer.isBuffer(this.buffer)) {
    return asRaw ? this.buffer.slice(0, this.position) : this.buffer.toString(&#x27;binary&#x27;, 0, this.position);
  } else {
    if(asRaw) {
      // we support the slice command use it
      if(this.buffer[&#x27;slice&#x27;] != null) {
        return this.buffer.slice(0, this.position);
      } else {
        // Create a new buffer to copy content to
        var newBuffer = Object.prototype.toString.call(this.buffer) == &#x27;[object Uint8Array]&#x27; ? new Uint8Array(new ArrayBuffer(this
.position)) : new Array(this.position);
        // Copy content
        for(var i = 0; i &#x3c; this.position; i++) {
          newBuffer[i] = this.buffer[i];
        }
        // Return the buffer
        return newBuffer;
      }
    } else {
      return convertArraytoUtf8BinaryString(this.buffer, 0, this.position);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return callback(errorObject, false);
  }

  return;
}

// Get the dictionary
var dict = parsePayload(r.result.payload.<span class="apidocCodeKeywordSpan">value</span>())

// Unpack dictionary
var iterations = parseInt(dict.i, 10);
var salt = dict.s;
var rnonce = dict.r;

// Set up start of proof
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Binary.prototype.write" id="apidoc.element.mongodb-core.BSON.Binary.prototype.write">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Binary.prototype.</span>write
        <span class="apidocSignatureSpan">(string, offset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function write(string, offset) {
  offset = typeof offset == &#x27;number&#x27; ? offset : this.position;

  // If the buffer is to small let&#x27;s extend the buffer
  if(this.buffer.length &#x3c; offset + string.length) {
    var buffer = null;
    // If we are in node.js
    if(typeof Buffer != &#x27;undefined&#x27; &#x26;&#x26; Buffer.isBuffer(this.buffer)) {
      buffer = new Buffer(this.buffer.length + string.length);
      this.buffer.copy(buffer, 0, 0, this.buffer.length);
    } else if(Object.prototype.toString.call(this.buffer) == &#x27;[object Uint8Array]&#x27;) {
      // Create a new buffer
      buffer = new Uint8Array(new ArrayBuffer(this.buffer.length + string.length))
      // Copy the content
      for(var i = 0; i &#x3c; this.position; i++) {
        buffer[i] = this.buffer[i];
      }
    }

    // Assign the new buffer
    this.buffer = buffer;
  }

  if(typeof Buffer != &#x27;undefined&#x27; &#x26;&#x26; Buffer.isBuffer(string) &#x26;&#x26; Buffer.isBuffer(this.buffer)) {
    string.copy(this.buffer, offset, 0, string.length);
    this.position = (offset + string.length) &#x3e; this.position ? (offset + string.length) : this.position;
    // offset = string.length
  } else if(typeof Buffer != &#x27;undefined&#x27; &#x26;&#x26; typeof string == &#x27;string&#x27; &#x26;&#x26; Buffer.isBuffer(this.buffer)) {
    this.buffer.write(string, offset, &#x27;binary&#x27;);
    this.position = (offset + string.length) &#x3e; this.position ? (offset + string.length) : this.position;
    // offset = string.length;
  } else if(Object.prototype.toString.call(string) == &#x27;[object Uint8Array]&#x27;
    || Object.prototype.toString.call(string) == &#x27;[object Array]&#x27; &#x26;&#x26; typeof string != &#x27;string&#x27;) {
    for(var i = 0; i &#x3c; string.length; i++) {
      this.buffer[offset++] = string[i];
    }

    this.position = offset &#x3e; this.position ? offset : this.position;
  } else if(typeof string == &#x27;string&#x27;) {
    for(var i = 0; i &#x3c; string.length; i++) {
      this.buffer[offset++] = string.charCodeAt(i);
    }

    this.position = offset &#x3e; this.position ? offset : this.position;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// Add promote values if defined
if(typeof self.cursorState.promoteBuffers == &#x27;boolean&#x27;) {
  queryOptions.promoteBuffers = self.cursorState.promoteBuffers;
}
// Write the initial command out
self.server.s.pool.<span class="apidocCodeKeywordSpan">write</span>(self.query, queryOptions, queryCallback);
}

Cursor.prototype._getmore = function(callback) {
if(this.logger.isDebug()) this.logger.debug(f(&#x27;schedule getMore call for query [%s]&#x27;, JSON.stringify(this.query)))
// Determine if it&#x27;s a raw query
var raw = this.options.raw || this.cmd.raw;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Code" id="apidoc.module.mongodb-core.BSON.Code">module mongodb-core.BSON.Code</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Code.Code" id="apidoc.element.mongodb-core.BSON.Code.Code">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Code
        <span class="apidocSignatureSpan">(code, scope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Code(code, scope) {
  if(!(this instanceof Code)) return new Code(code, scope);
  this._bsontype = &#x27;Code&#x27;;
  this.code = code;
  this.scope = scope;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Code.prototype" id="apidoc.module.mongodb-core.BSON.Code.prototype">module mongodb-core.BSON.Code.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Code.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Code.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Code.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return {scope:this.scope, code:this.code};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.DBRef" id="apidoc.module.mongodb-core.BSON.DBRef">module mongodb-core.BSON.DBRef</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.DBRef.DBRef" id="apidoc.element.mongodb-core.BSON.DBRef.DBRef">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>DBRef
        <span class="apidocSignatureSpan">(namespace, oid, db)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DBRef(namespace, oid, db) {
  if(!(this instanceof DBRef)) return new DBRef(namespace, oid, db);

  this._bsontype = &#x27;DBRef&#x27;;
  this.namespace = namespace;
  this.oid = oid;
  this.db = db;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.DBRef.prototype" id="apidoc.module.mongodb-core.BSON.DBRef.prototype">module mongodb-core.BSON.DBRef.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.DBRef.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.DBRef.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.DBRef.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return {
    &#x27;$ref&#x27;:this.namespace,
    &#x27;$id&#x27;:this.oid,
    &#x27;$db&#x27;:this.db == null ? &#x27;&#x27; : this.db
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Decimal128" id="apidoc.module.mongodb-core.BSON.Decimal128">module mongodb-core.BSON.Decimal128</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Decimal128.Decimal128" id="apidoc.element.mongodb-core.BSON.Decimal128.Decimal128">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Decimal128
        <span class="apidocSignatureSpan">(bytes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Decimal128 = function (bytes) {
  this._bsontype = &#x27;Decimal128&#x27;;
  this.bytes = bytes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Decimal128.fromString" id="apidoc.element.mongodb-core.BSON.Decimal128.fromString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Decimal128.</span>fromString
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromString = function (string) {
  // Parse state tracking
  var isNegative = false;
  var sawRadix = false;
  var foundNonZero = false;

  // Total number of significant digits (no leading or trailing zero)
  var significantDigits = 0;
  // Total number of significand digits read
  var nDigitsRead = 0;
  // Total number of digits (no leading zeros)
  var nDigits = 0;
  // The number of the digits after radix
  var radixPosition = 0;
  // The index of the first non-zero in *str*
  var firstNonZero = 0;

  // Digits Array
  var digits = [0];
  // The number of digits in digits
  var nDigitsStored = 0;
  // Insertion pointer for digits
  var digitsInsert = 0;
  // The index of the first non-zero digit
  var firstDigit = 0;
  // The index of the last digit
  var lastDigit = 0;

  // Exponent
  var exponent = 0;
  // loop index over array
  var i = 0;
  // The high 17 digits of the significand
  var significandHigh = [0, 0];
  // The low 17 digits of the significand
  var significandLow = [0, 0];
  // The biased exponent
  var biasedExponent = 0;

  // Read index
  var index = 0;

  // Trim the string
  string = string.trim();

  // Results
  var stringMatch = string.match(PARSE_STRING_REGEXP);
  var infMatch = string.match(PARSE_INF_REGEXP);
  var nanMatch = string.match(PARSE_NAN_REGEXP);

  // Validate the string
  if(!stringMatch
    &#x26;&#x26; ! infMatch
    &#x26;&#x26; ! nanMatch || string.length == 0) {
      throw new Error(&#x22;&#x22; + string + &#x22; not a valid Decimal128 string&#x22;);
  }

  // Check if we have an illegal exponent format
  if(stringMatch &#x26;&#x26; stringMatch[4] &#x26;&#x26; stringMatch[2] === undefined) {
    throw new Error(&#x22;&#x22; + string + &#x22; not a valid Decimal128 string&#x22;);
  }

  // Get the negative or positive sign
  if(string[index] == &#x27;+&#x27; || string[index] == &#x27;-&#x27;) {
    isNegative = string[index++] == &#x27;-&#x27;;
  }

  // Check if user passed Infinity or NaN
  if(!isDigit(string[index]) &#x26;&#x26; string[index] != &#x27;.&#x27;) {
    if(string[index] == &#x27;i&#x27; || string[index] == &#x27;I&#x27;) {
      return new Decimal128(new Buffer(isNegative ? INF_NEGATIVE_BUFFER : INF_POSITIVE_BUFFER));
    } else if(string[index] == &#x27;N&#x27;) {
      return new Decimal128(new Buffer(NAN_BUFFER));
    }
  }

  // Read all the digits
  while(isDigit(string[index]) || string[index] == &#x27;.&#x27;) {
    if(string[index] == &#x27;.&#x27;) {
      if(sawRadix) {
        return new Decimal128(new Buffer(NAN_BUFFER));
      }

      sawRadix = true;
      index = index + 1;
      continue;
    }

    if(nDigitsStored &#x3c; 34) {
      if(string[index] != &#x27;0&#x27; || foundNonZero) {
        if(!foundNonZero) {
          firstNonZero = nDigitsRead;
        }

        foundNonZero = true;

        // Only store 34 digits
        digits[digitsInsert++] = parseInt(string[index], 10);
        nDigitsStored = nDigitsStored + 1;
      }
    }

    if(foundNonZero) {
      nDigits = nDigits + 1;
    }

    if(sawRadix) {
      radixPosition = radixPosition + 1;
    }

    nDigitsRead = nDigitsRead + 1;
    index = index + 1;
  }

  if(sawRadix &#x26;&#x26; !nDigitsRead) {
    throw new Error(&#x22;&#x22; + string + &#x22; not a valid Decimal128 string&#x22;);
  }

  // Read exponent if exists
  if(string[index] == &#x27;e&#x27; || string[index] == &#x27;E&#x27;) {
    // Read exponent digits
    var match = string.substr(++index).match(EXPONENT_REGEX);

    // No digits read
    if(!match || !match[2]) {
      return new Decimal128(new Buffer(NAN_BUFFER));
    }

    // Get exponent
    exponent = parseInt(match[0], 10);

    // Adjust the index
    index = index + match[0].length;
  }

  // Return not a number
  if(string[index]) {
    return new Decimal128(new Buffer(NAN_BUFFER));
  }

  // Done reading input
  // Find first non-zero digit in digits
  firstDigit = 0;

  if(!nDigitsStored) {
    firstDigit = 0;
    lastDigit = 0;
    digits[0] = 0;
    nDigits = 1;
    nDigitsStored = 1;
    significantDigits = 0;
  } else {
    lastDigit = nDigitsStored - 1;
    significantDigits = nDigits;

    if(exponent != 0 &#x26;&#x26; significantDigits != 1) {
      while(string[firstNonZero + significantDigits - 1] == &#x27;0&#x27;) {
        significantDigits = significantDigits - 1;
      }
    }
  }

  // Normalization of ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Decimal128.prototype" id="apidoc.module.mongodb-core.BSON.Decimal128.prototype">module mongodb-core.BSON.Decimal128.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Decimal128.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Decimal128.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Decimal128.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return { &#x22;$numberDecimal&#x22;: this.toString() };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Decimal128.prototype.toString" id="apidoc.element.mongodb-core.BSON.Decimal128.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Decimal128.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  // Note: bits in this routine are referred to starting at 0,
  // from the sign bit, towards the coefficient.

  // bits 0 - 31
  var high;
  // bits 32 - 63
  var midh;
  // bits 64 - 95
  var midl;
  // bits 96 - 127
  var low;
  // bits 1 - 5
  var combination;
  // decoded biased exponent (14 bits)
  var biased_exponent;
  // the number of significand digits
  var significand_digits = 0;
  // the base-10 digits in the significand
  var significand = new Array(36);
  for(var i = 0; i &#x3c; significand.length; i++) significand[i] = 0;
  // read pointer into significand
  var index = 0;

  // unbiased exponent
  var exponent;
  // the exponent if scientific notation is used
  var scientific_exponent;

  // true if the number is zero
  var is_zero = false;

  // the most signifcant significand bits (50-46)
  var significand_msb;
  // temporary storage for significand decoding
  var significand128 = {parts: new Array(4)};
  // indexing variables
  var i;
  var j, k;

  // Output string
  var string = [];

  // Unpack index
  var index = 0;

  // Buffer reference
  var buffer = this.bytes;

  // Unpack the low 64bits into a long
  low = buffer[index++] | buffer[index++] &#x3c;&#x3c; 8 | buffer[index++] &#x3c;&#x3c; 16 | buffer[index++] &#x3c;&#x3c; 24;
  midl = buffer[index++] | buffer[index++] &#x3c;&#x3c; 8 | buffer[index++] &#x3c;&#x3c; 16 | buffer[index++] &#x3c;&#x3c; 24;

  // Unpack the high 64bits into a long
  midh = buffer[index++] | buffer[index++] &#x3c;&#x3c; 8 | buffer[index++] &#x3c;&#x3c; 16 | buffer[index++] &#x3c;&#x3c; 24;
  high = buffer[index++] | buffer[index++] &#x3c;&#x3c; 8 | buffer[index++] &#x3c;&#x3c; 16 | buffer[index++] &#x3c;&#x3c; 24;

  // Unpack index
  var index = 0;

  // Create the state of the decimal
  var dec = {
    low: new Long(low, midl),
    high: new Long(midh, high) };

  if(dec.high.lessThan(Long.ZERO)) {
    string.push(&#x27;-&#x27;);
  }

  // Decode combination field and exponent
  combination = (high &#x3e;&#x3e; 26) &#x26; COMBINATION_MASK;

  if((combination &#x3e;&#x3e; 3) == 3) {
    // Check for &#x27;special&#x27; values
    if(combination == COMBINATION_INFINITY) {
      return string.join(&#x27;&#x27;) + &#x22;Infinity&#x22;;
    } else if(combination == COMBINATION_NAN) {
      return &#x22;NaN&#x22;;
    } else {
      biased_exponent = (high &#x3e;&#x3e; 15) &#x26; EXPONENT_MASK;
      significand_msb = 0x08 + ((high &#x3e;&#x3e; 14) &#x26; 0x01);
    }
  } else {
    significand_msb = (high &#x3e;&#x3e; 14) &#x26; 0x07;
    biased_exponent = (high &#x3e;&#x3e; 17) &#x26; EXPONENT_MASK;
  }

  exponent = biased_exponent - EXPONENT_BIAS;

  // Create string of significand digits

  // Convert the 114-bit binary number represented by
  // (significand_high, significand_low) to at most 34 decimal
  // digits through modulo and division.
  significand128.parts[0] = (high &#x26; 0x3fff) + ((significand_msb &#x26; 0xf) &#x3c;&#x3c; 14);
  significand128.parts[1] = midh;
  significand128.parts[2] = midl;
  significand128.parts[3] = low;

  if(significand128.parts[0] == 0 &#x26;&#x26; significand128.parts[1] == 0
    &#x26;&#x26; significand128.parts[2] == 0 &#x26;&#x26; significand128.parts[3] == 0) {
      is_zero = true;
  } else {
    for(var k = 3; k &#x3e;= 0; k--) {
      var least_digits = 0;
      // Peform the divide
      var result = divideu128(significand128);
      significand128 = result.quotient;
      least_digits = result.rem.low_;

      // We now have the 9 least significant digits (in base 2).
      // Convert and output to string.
      if(!least_digits) continue;

      for(var j = 8; j &#x3e;= 0; j--) {
        // significand[k * 9 + j] = Math.round(least_digits % 10);
        significand[k * 9 + j] = least_digits % 10;
        // least_digits = Math.round(least_digits / 10);
        least_digits = Math.floor(least_digits / 10);
      }
    }
  }

  // Output format options:
  // Scientific - [-]d.dddE(+/-)dd or [-]dE(+/-)dd
  // Regular    - ddd.ddd

  if(is_zero) {
    significand_digits = 1;
    significand[index] = 0;
  } else {
    significand_digits = 36;
    var i = 0;

    while(!significand[index]) {
      i++;
      significand_digits = significand_digits - 1;
      index = index + 1;
    }
  }

  scientific_exponent = significand_digits - 1 + exponent;

  // The scientific exponent checks are dictated by the string conversion
  // ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Double" id="apidoc.module.mongodb-core.BSON.Double">module mongodb-core.BSON.Double</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Double.Double" id="apidoc.element.mongodb-core.BSON.Double.Double">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Double
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Double(value) {
  if(!(this instanceof Double)) return new Double(value);

  this._bsontype = &#x27;Double&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Double.prototype" id="apidoc.module.mongodb-core.BSON.Double.prototype">module mongodb-core.BSON.Double.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Double.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Double.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Double.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Double.prototype.valueOf" id="apidoc.element.mongodb-core.BSON.Double.prototype.valueOf">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Double.prototype.</span>valueOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">valueOf = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Int32" id="apidoc.module.mongodb-core.BSON.Int32">module mongodb-core.BSON.Int32</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Int32.Int32" id="apidoc.element.mongodb-core.BSON.Int32.Int32">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Int32
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Int32 = function (value) {
  if(!(this instanceof Int32)) return new Int32(value);

  this._bsontype = &#x27;Int32&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Int32.prototype" id="apidoc.module.mongodb-core.BSON.Int32.prototype">module mongodb-core.BSON.Int32.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Int32.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Int32.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Int32.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Int32.prototype.valueOf" id="apidoc.element.mongodb-core.BSON.Int32.prototype.valueOf">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Int32.prototype.</span>valueOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">valueOf = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Long" id="apidoc.module.mongodb-core.BSON.Long">module mongodb-core.BSON.Long</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.Long" id="apidoc.element.mongodb-core.BSON.Long.Long">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Long
        <span class="apidocSignatureSpan">(low, high)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Long(low, high) {
  if(!(this instanceof Long)) return new Long(low, high);

  this._bsontype = &#x27;Long&#x27;;
<span class="apidocCodeCommentSpan">  /**
   * @type {number}
   * @ignore
   */
</span>  this.low_ = low | 0;  // force into 32 signed bits.

  /**
   * @type {number}
   * @ignore
   */
  this.high_ = high | 0;  // force into 32 signed bits.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.fromBits" id="apidoc.element.mongodb-core.BSON.Long.fromBits">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromBits
        <span class="apidocSignatureSpan">(lowBits, highBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromBits = function (lowBits, highBits) {
  return new Long(lowBits, highBits);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.fromInt" id="apidoc.element.mongodb-core.BSON.Long.fromInt">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromInt
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromInt = function (value) {
  if (-128 &#x3c;= value &#x26;&#x26; value &#x3c; 128) {
    var cachedObj = Long.INT_CACHE_[value];
    if (cachedObj) {
      return cachedObj;
    }
  }

  var obj = new Long(value | 0, value &#x3c; 0 ? -1 : 0);
  if (-128 &#x3c;= value &#x26;&#x26; value &#x3c; 128) {
    Long.INT_CACHE_[value] = obj;
  }
  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.fromNumber" id="apidoc.element.mongodb-core.BSON.Long.fromNumber">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromNumber
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromNumber = function (value) {
  if (isNaN(value) || !isFinite(value)) {
    return Long.ZERO;
  } else if (value &#x3c;= -Long.TWO_PWR_63_DBL_) {
    return Long.MIN_VALUE;
  } else if (value + 1 &#x3e;= Long.TWO_PWR_63_DBL_) {
    return Long.MAX_VALUE;
  } else if (value &#x3c; 0) {
    return Long.fromNumber(-value).negate();
  } else {
    return new Long(
               (value % Long.TWO_PWR_32_DBL_) | 0,
               (value / Long.TWO_PWR_32_DBL_) | 0);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Logger
  this.logger = Logger(&#x27;Cursor&#x27;, topologyOptions);

  //
  // Did we pass in a cursor id
  if(typeof cmd == &#x27;number&#x27;) {
    this.cursorState.cursorId = Long.<span class="apidocCodeKeywordSpan">fromNumber</span>(cmd);
    this.cursorState.lastCursorId = this.cursorState.cursorId;
  } else if(cmd instanceof Long) {
    this.cursorState.cursorId = cmd;
    this.cursorState.lastCursorId = cmd;
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.fromString" id="apidoc.element.mongodb-core.BSON.Long.fromString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.</span>fromString
        <span class="apidocSignatureSpan">(str, opt_radix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromString = function (str, opt_radix) {
  if (str.length == 0) {
    throw Error(&#x27;number format error: empty string&#x27;);
  }

  var radix = opt_radix || 10;
  if (radix &#x3c; 2 || 36 &#x3c; radix) {
    throw Error(&#x27;radix out of range: &#x27; + radix);
  }

  if (str.charAt(0) == &#x27;-&#x27;) {
    return Long.fromString(str.substring(1), radix).negate();
  } else if (str.indexOf(&#x27;-&#x27;) &#x3e;= 0) {
    throw Error(&#x27;number format error: interior &#x22;-&#x22; character: &#x27; + str);
  }

  // Do several (8) digits each time through the loop, so as to
  // minimize the calls to the very expensive emulated div.
  var radixToPower = Long.fromNumber(Math.pow(radix, 8));

  var result = Long.ZERO;
  for (var i = 0; i &#x3c; str.length; i += 8) {
    var size = Math.min(8, str.length - i);
    var value = parseInt(str.substring(i, i + size), radix);
    if (size &#x3c; 8) {
      var power = Long.fromNumber(Math.pow(radix, size));
      result = result.multiply(power).add(Long.fromNumber(value));
    } else {
      result = result.multiply(radixToPower);
      result = result.add(Long.fromNumber(value));
    }
  }
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Long.prototype" id="apidoc.module.mongodb-core.BSON.Long.prototype">module mongodb-core.BSON.Long.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.add" id="apidoc.element.mongodb-core.BSON.Long.prototype.add">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>add
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (other) {
  // Divide each number into 4 chunks of 16 bits, and then sum the chunks.

  var a48 = this.high_ &#x3e;&#x3e;&#x3e; 16;
  var a32 = this.high_ &#x26; 0xFFFF;
  var a16 = this.low_ &#x3e;&#x3e;&#x3e; 16;
  var a00 = this.low_ &#x26; 0xFFFF;

  var b48 = other.high_ &#x3e;&#x3e;&#x3e; 16;
  var b32 = other.high_ &#x26; 0xFFFF;
  var b16 = other.low_ &#x3e;&#x3e;&#x3e; 16;
  var b00 = other.low_ &#x26; 0xFFFF;

  var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
  c00 += a00 + b00;
  c16 += c00 &#x3e;&#x3e;&#x3e; 16;
  c00 &#x26;= 0xFFFF;
  c16 += a16 + b16;
  c32 += c16 &#x3e;&#x3e;&#x3e; 16;
  c16 &#x26;= 0xFFFF;
  c32 += a32 + b32;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c48 += a48 + b48;
  c48 &#x26;= 0xFFFF;
  return Long.fromBits((c16 &#x3c;&#x3c; 16) | c00, (c48 &#x3c;&#x3c; 16) | c32);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
Mongos.prototype.insert = function(ns, ops, options, callback) {
if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

// Not connected but we have a disconnecthandler
if(!this.isConnected() &#x26;&#x26; this.s.disconnectHandler != null) {
  return this.s.disconnectHandler.<span class="apidocCodeKeywordSpan">add</span>(&#x27;insert&#x27;, ns, ops, options, callback);
}

// No mongos proxy available
if(!this.isConnected()) {
  return callback(new MongoError(&#x27;no mongos proxy available&#x27;));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.and" id="apidoc.element.mongodb-core.BSON.Long.prototype.and">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>and
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">and = function (other) {
  return Long.fromBits(this.low_ &#x26; other.low_, this.high_ &#x26; other.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.compare" id="apidoc.element.mongodb-core.BSON.Long.prototype.compare">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>compare
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compare = function (other) {
  if (this.equals(other)) {
    return 0;
  }

  var thisNeg = this.isNegative();
  var otherNeg = other.isNegative();
  if (thisNeg &#x26;&#x26; !otherNeg) {
    return -1;
  }
  if (!thisNeg &#x26;&#x26; otherNeg) {
    return 1;
  }

  // at this point, the signs are the same, so subtraction will not overflow
  if (this.subtract(other).isNegative()) {
    return -1;
  } else {
    return 1;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var b = new Buffer(id2.toHexString(), &#x27;hex&#x27;);

if(a === b) {
  return 0;
}

if(typeof Buffer.compare === &#x27;function&#x27;) {
  return Buffer.<span class="apidocCodeKeywordSpan">compare</span>(a, b);
}

var x = a.length;
var y = b.length;
var len = Math.min(x, y);

for (var i = 0; i &#x3c; len; i++) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.div" id="apidoc.element.mongodb-core.BSON.Long.prototype.div">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>div
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">div = function (other) {
  if (other.isZero()) {
    throw Error(&#x27;division by zero&#x27;);
  } else if (this.isZero()) {
    return Long.ZERO;
  }

  if (this.equals(Long.MIN_VALUE)) {
    if (other.equals(Long.ONE) ||
        other.equals(Long.NEG_ONE)) {
      return Long.MIN_VALUE;  // recall that -MIN_VALUE == MIN_VALUE
    } else if (other.equals(Long.MIN_VALUE)) {
      return Long.ONE;
    } else {
      // At this point, we have |other| &#x3e;= 2, so |this/other| &#x3c; |MIN_VALUE|.
      var halfThis = this.shiftRight(1);
      var approx = halfThis.div(other).shiftLeft(1);
      if (approx.equals(Long.ZERO)) {
        return other.isNegative() ? Long.ONE : Long.NEG_ONE;
      } else {
        var rem = this.subtract(other.multiply(approx));
        var result = approx.add(rem.div(other));
        return result;
      }
    }
  } else if (other.equals(Long.MIN_VALUE)) {
    return Long.ZERO;
  }

  if (this.isNegative()) {
    if (other.isNegative()) {
      return this.negate().div(other.negate());
    } else {
      return this.negate().div(other).negate();
    }
  } else if (other.isNegative()) {
    return this.div(other.negate()).negate();
  }

  // Repeat the following until the remainder is less than other:  find a
  // floating-point that approximates remainder / other *from below*, add this
  // into the result, and subtract it from the remainder.  It is critical that
  // the approximate value is less than or equal to the real value so that the
  // remainder never becomes negative.
  var res = Long.ZERO;
  var rem = this;
  while (rem.greaterThanOrEqual(other)) {
    // Approximate the result of division. This may be a little greater or
    // smaller than the actual value.
    var approx = Math.max(1, Math.floor(rem.toNumber() / other.toNumber()));

    // We will tweak the approximate result by changing it in the 48-th digit or
    // the smallest non-fractional digit, whichever is larger.
    var log2 = Math.ceil(Math.log(approx) / Math.LN2);
    var delta = (log2 &#x3c;= 48) ? 1 : Math.pow(2, log2 - 48);

    // Decrease the approximation until it is smaller than the remainder.  Note
    // that if it is too large, the product overflows and is negative.
    var approxRes = Long.fromNumber(approx);
    var approxRem = approxRes.multiply(other);
    while (approxRem.isNegative() || approxRem.greaterThan(rem)) {
      approx -= delta;
      approxRes = Long.fromNumber(approx);
      approxRem = approxRes.multiply(other);
    }

    // We know the answer can&#x27;t be zero... and actually, zero would cause
    // infinite recursion since we would make no progress.
    if (approxRes.isZero()) {
      approxRes = Long.ONE;
    }

    res = res.add(approxRes);
    rem = rem.subtract(approxRem);
  }
  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.equals" id="apidoc.element.mongodb-core.BSON.Long.prototype.equals">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>equals
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equals = function (other) {
  return (this.high_ == other.high_) &#x26;&#x26; (this.low_ == other.low_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  } else if(self.cursorState.limit &#x3e; 0 &#x26;&#x26; self.cursorState.currentLimit &#x3e;= self.cursorState.limit) {
    // Ensure we kill the cursor on the server
    self.kill();
    // Set cursor in dead and notified state
    return setCursorDeadAndNotified(self, callback);
  } else if(self.cursorState.cursorIndex == self.cursorState.documents.length
&#x26;&#x26; !Long.ZERO.<span class="apidocCodeKeywordSpan">equals</span>(self.cursorState.cursorId)) {
// Ensure an empty cursor state
self.cursorState.documents = [];
self.cursorState.cursorIndex = 0;

// Check if topology is destroyed
if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor&#x27
;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.getHighBits" id="apidoc.element.mongodb-core.BSON.Long.prototype.getHighBits">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getHighBits
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getHighBits = function () {
  return this.high_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// index = write32bit(index, _buffer, cursorId.getLowBits());
_buffer[index + 3] = (this.cursorId.getLowBits() &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.cursorId.getLowBits() &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.cursorId.getLowBits() &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.cursorId.getLowBits()) &#x26; 0xff;
index = index + 4;

// index = write32bit(index, _buffer, cursorId.<span class="apidocCodeKeywordSpan">getHighBits</span>());
_buffer[index + 3] = (this.cursorId.getHighBits() &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.cursorId.getHighBits() &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.cursorId.getHighBits() &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.cursorId.getHighBits()) &#x26; 0xff;
index = index + 4;

// Return buffer
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.getLowBits" id="apidoc.element.mongodb-core.BSON.Long.prototype.getLowBits">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getLowBits
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLowBits = function () {
  return this.low_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
_buffer[index + 3] = (this.numberToReturn &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.numberToReturn &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.numberToReturn &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.numberToReturn) &#x26; 0xff;
index = index + 4;

// Write cursor id
// index = write32bit(index, _buffer, cursorId.<span class="apidocCodeKeywordSpan">getLowBits</span>());
_buffer[index + 3] = (this.cursorId.getLowBits() &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.cursorId.getLowBits() &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.cursorId.getLowBits() &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.cursorId.getLowBits()) &#x26; 0xff;
index = index + 4;

// index = write32bit(index, _buffer, cursorId.getHighBits());
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.getLowBitsUnsigned" id="apidoc.element.mongodb-core.BSON.Long.prototype.getLowBitsUnsigned">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getLowBitsUnsigned
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLowBitsUnsigned = function () {
  return (this.low_ &#x3e;= 0) ?
      this.low_ : Long.TWO_PWR_32_DBL_ + this.low_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.getNumBitsAbs" id="apidoc.element.mongodb-core.BSON.Long.prototype.getNumBitsAbs">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>getNumBitsAbs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getNumBitsAbs = function () {
  if (this.isNegative()) {
    if (this.equals(Long.MIN_VALUE)) {
      return 64;
    } else {
      return this.negate().getNumBitsAbs();
    }
  } else {
    var val = this.high_ != 0 ? this.high_ : this.low_;
    for (var bit = 31; bit &#x3e; 0; bit--) {
      if ((val &#x26; (1 &#x3c;&#x3c; bit)) != 0) {
        break;
      }
    }
    return this.high_ != 0 ? bit + 33 : bit + 1;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.greaterThan" id="apidoc.element.mongodb-core.BSON.Long.prototype.greaterThan">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>greaterThan
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">greaterThan = function (other) {
  return this.compare(other) &#x3e; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.greaterThanOrEqual" id="apidoc.element.mongodb-core.BSON.Long.prototype.greaterThanOrEqual">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>greaterThanOrEqual
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">greaterThanOrEqual = function (other) {
  return this.compare(other) &#x3e;= 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.isNegative" id="apidoc.element.mongodb-core.BSON.Long.prototype.isNegative">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>isNegative
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isNegative = function () {
  return this.high_ &#x3c; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.isOdd" id="apidoc.element.mongodb-core.BSON.Long.prototype.isOdd">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>isOdd
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isOdd = function () {
  return (this.low_ &#x26; 1) == 1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.isZero" id="apidoc.element.mongodb-core.BSON.Long.prototype.isZero">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>isZero
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isZero = function () {
  return this.high_ == 0 &#x26;&#x26; this.low_ == 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Set cursor to dead
this.cursorState.dead = true;
this.cursorState.killed = true;
// Remove documents
this.cursorState.documents = [];

// If no cursor id just return
if(this.cursorState.cursorId == null || this.cursorState.cursorId.<span class="apidocCodeKeywordSpan">isZero</span>() || this.cursorState
.init == false) {
  if(callback) callback(null, null);
  return;
}

// Default pool
var pool = this.server.s.pool;
// Execute command
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.lessThan" id="apidoc.element.mongodb-core.BSON.Long.prototype.lessThan">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>lessThan
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lessThan = function (other) {
  return this.compare(other) &#x3c; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.lessThanOrEqual" id="apidoc.element.mongodb-core.BSON.Long.prototype.lessThanOrEqual">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>lessThanOrEqual
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lessThanOrEqual = function (other) {
  return this.compare(other) &#x3c;= 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.modulo" id="apidoc.element.mongodb-core.BSON.Long.prototype.modulo">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>modulo
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">modulo = function (other) {
  return this.subtract(this.div(other).multiply(other));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.multiply" id="apidoc.element.mongodb-core.BSON.Long.prototype.multiply">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>multiply
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">multiply = function (other) {
  if (this.isZero()) {
    return Long.ZERO;
  } else if (other.isZero()) {
    return Long.ZERO;
  }

  if (this.equals(Long.MIN_VALUE)) {
    return other.isOdd() ? Long.MIN_VALUE : Long.ZERO;
  } else if (other.equals(Long.MIN_VALUE)) {
    return this.isOdd() ? Long.MIN_VALUE : Long.ZERO;
  }

  if (this.isNegative()) {
    if (other.isNegative()) {
      return this.negate().multiply(other.negate());
    } else {
      return this.negate().multiply(other).negate();
    }
  } else if (other.isNegative()) {
    return this.multiply(other.negate()).negate();
  }

  // If both Longs are small, use float multiplication
  if (this.lessThan(Long.TWO_PWR_24_) &#x26;&#x26;
      other.lessThan(Long.TWO_PWR_24_)) {
    return Long.fromNumber(this.toNumber() * other.toNumber());
  }

  // Divide each Long into 4 chunks of 16 bits, and then add up 4x4 products.
  // We can skip products that would overflow.

  var a48 = this.high_ &#x3e;&#x3e;&#x3e; 16;
  var a32 = this.high_ &#x26; 0xFFFF;
  var a16 = this.low_ &#x3e;&#x3e;&#x3e; 16;
  var a00 = this.low_ &#x26; 0xFFFF;

  var b48 = other.high_ &#x3e;&#x3e;&#x3e; 16;
  var b32 = other.high_ &#x26; 0xFFFF;
  var b16 = other.low_ &#x3e;&#x3e;&#x3e; 16;
  var b00 = other.low_ &#x26; 0xFFFF;

  var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
  c00 += a00 * b00;
  c16 += c00 &#x3e;&#x3e;&#x3e; 16;
  c00 &#x26;= 0xFFFF;
  c16 += a16 * b00;
  c32 += c16 &#x3e;&#x3e;&#x3e; 16;
  c16 &#x26;= 0xFFFF;
  c16 += a00 * b16;
  c32 += c16 &#x3e;&#x3e;&#x3e; 16;
  c16 &#x26;= 0xFFFF;
  c32 += a32 * b00;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c32 += a16 * b16;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c32 += a00 * b32;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;
  c48 &#x26;= 0xFFFF;
  return Long.fromBits((c16 &#x3c;&#x3c; 16) | c00, (c48 &#x3c;&#x3c; 16) | c32);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.negate" id="apidoc.element.mongodb-core.BSON.Long.prototype.negate">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>negate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">negate = function () {
  if (this.equals(Long.MIN_VALUE)) {
    return Long.MIN_VALUE;
  } else {
    return this.not().add(Long.ONE);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.not" id="apidoc.element.mongodb-core.BSON.Long.prototype.not">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>not
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">not = function () {
  return Long.fromBits(~this.low_, ~this.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.notEquals" id="apidoc.element.mongodb-core.BSON.Long.prototype.notEquals">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>notEquals
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notEquals = function (other) {
  return (this.high_ != other.high_) || (this.low_ != other.low_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.or" id="apidoc.element.mongodb-core.BSON.Long.prototype.or">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>or
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">or = function (other) {
  return Long.fromBits(this.low_ | other.low_, this.high_ | other.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.shiftLeft" id="apidoc.element.mongodb-core.BSON.Long.prototype.shiftLeft">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>shiftLeft
        <span class="apidocSignatureSpan">(numBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shiftLeft = function (numBits) {
  numBits &#x26;= 63;
  if (numBits == 0) {
    return this;
  } else {
    var low = this.low_;
    if (numBits &#x3c; 32) {
      var high = this.high_;
      return Long.fromBits(
                 low &#x3c;&#x3c; numBits,
                 (high &#x3c;&#x3c; numBits) | (low &#x3e;&#x3e;&#x3e; (32 - numBits)));
    } else {
      return Long.fromBits(0, low &#x3c;&#x3c; (numBits - 32));
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.shiftRight" id="apidoc.element.mongodb-core.BSON.Long.prototype.shiftRight">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>shiftRight
        <span class="apidocSignatureSpan">(numBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shiftRight = function (numBits) {
  numBits &#x26;= 63;
  if (numBits == 0) {
    return this;
  } else {
    var high = this.high_;
    if (numBits &#x3c; 32) {
      var low = this.low_;
      return Long.fromBits(
                 (low &#x3e;&#x3e;&#x3e; numBits) | (high &#x3c;&#x3c; (32 - numBits)),
                 high &#x3e;&#x3e; numBits);
    } else {
      return Long.fromBits(
                 high &#x3e;&#x3e; (numBits - 32),
                 high &#x3e;= 0 ? 0 : -1);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.shiftRightUnsigned" id="apidoc.element.mongodb-core.BSON.Long.prototype.shiftRightUnsigned">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>shiftRightUnsigned
        <span class="apidocSignatureSpan">(numBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shiftRightUnsigned = function (numBits) {
  numBits &#x26;= 63;
  if (numBits == 0) {
    return this;
  } else {
    var high = this.high_;
    if (numBits &#x3c; 32) {
      var low = this.low_;
      return Long.fromBits(
                 (low &#x3e;&#x3e;&#x3e; numBits) | (high &#x3c;&#x3c; (32 - numBits)),
                 high &#x3e;&#x3e;&#x3e; numBits);
    } else if (numBits == 32) {
      return Long.fromBits(high, 0);
    } else {
      return Long.fromBits(high &#x3e;&#x3e;&#x3e; (numBits - 32), 0);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.subtract" id="apidoc.element.mongodb-core.BSON.Long.prototype.subtract">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>subtract
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">subtract = function (other) {
  return this.add(other.negate());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.toInt" id="apidoc.element.mongodb-core.BSON.Long.prototype.toInt">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toInt
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toInt = function () {
  return this.low_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Long.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.toNumber" id="apidoc.element.mongodb-core.BSON.Long.prototype.toNumber">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toNumber = function () {
  return this.high_ * Long.TWO_PWR_32_DBL_ +
         this.getLowBitsUnsigned();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.toString" id="apidoc.element.mongodb-core.BSON.Long.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>toString
        <span class="apidocSignatureSpan">(opt_radix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (opt_radix) {
  var radix = opt_radix || 10;
  if (radix &#x3c; 2 || 36 &#x3c; radix) {
    throw Error(&#x27;radix out of range: &#x27; + radix);
  }

  if (this.isZero()) {
    return &#x27;0&#x27;;
  }

  if (this.isNegative()) {
    if (this.equals(Long.MIN_VALUE)) {
      // We need to change the Long value before it can be negated, so we remove
      // the bottom-most digit in this base and then recurse to do the rest.
      var radixLong = Long.fromNumber(radix);
      var div = this.div(radixLong);
      var rem = div.multiply(radixLong).subtract(this);
      return div.toString(radix) + rem.toInt().toString(radix);
    } else {
      return &#x27;-&#x27; + this.negate().toString(radix);
    }
  }

  // Do several (6) digits each time through the loop, so as to
  // minimize the calls to the very expensive emulated div.
  var radixToPower = Long.fromNumber(Math.pow(radix, 6));

  var rem = this;
  var result = &#x27;&#x27;;
  while (true) {
    var remDiv = rem.div(radixToPower);
    var intval = rem.subtract(remDiv.multiply(radixToPower)).toInt();
    var digits = intval.toString(radix);

    rem = remDiv;
    if (rem.isZero()) {
      return digits + result;
    } else {
      while (digits.length &#x3c; 6) {
        digits = &#x27;0&#x27; + digits;
      }
      result = &#x27;&#x27; + digits + result;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Long.prototype.xor" id="apidoc.element.mongodb-core.BSON.Long.prototype.xor">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Long.prototype.</span>xor
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">xor = function (other) {
  return Long.fromBits(this.low_ ^ other.low_, this.high_ ^ other.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Map" id="apidoc.module.mongodb-core.BSON.Map">module mongodb-core.BSON.Map</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Map.Map" id="apidoc.element.mongodb-core.BSON.Map.Map">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Map
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Map() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.MaxKey" id="apidoc.module.mongodb-core.BSON.MaxKey">module mongodb-core.BSON.MaxKey</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.MaxKey.MaxKey" id="apidoc.element.mongodb-core.BSON.MaxKey.MaxKey">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MaxKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MaxKey() {
  if(!(this instanceof MaxKey)) return new MaxKey();

  this._bsontype = &#x27;MaxKey&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.MinKey" id="apidoc.module.mongodb-core.BSON.MinKey">module mongodb-core.BSON.MinKey</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.MinKey.MinKey" id="apidoc.element.mongodb-core.BSON.MinKey.MinKey">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>MinKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MinKey() {
  if(!(this instanceof MinKey)) return new MinKey();

  this._bsontype = &#x27;MinKey&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.ObjectID" id="apidoc.module.mongodb-core.BSON.ObjectID">module mongodb-core.BSON.ObjectID</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.ObjectID" id="apidoc.element.mongodb-core.BSON.ObjectID.ObjectID">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>ObjectID
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ObjectID(id) {
  // Duck-typing to support ObjectId from different npm packages
  if(id instanceof ObjectID) return id;
  if(!(this instanceof ObjectID)) return new ObjectID(id);

  this._bsontype = &#x27;ObjectID&#x27;;

  // The most common usecase (blank id, new objectId instance)
  if(id == null || typeof id == &#x27;number&#x27;) {
    // Generate a new id
    this.id = this.generate(id);
    // If we are caching the hex string
    if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
    // Return the object
    return;
  }

  // Check if the passed in id is valid
  var valid = ObjectID.isValid(id);

  // Throw an error if it&#x27;s not a valid setup
  if(!valid &#x26;&#x26; id != null){
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24 &#x26;&#x26; hasBufferType) {
    return new ObjectID(new Buffer(id, &#x27;hex&#x27;));
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24) {
    return ObjectID.createFromHexString(id);
  } else if(id != null &#x26;&#x26; id.length === 12) {
    // assume 12 byte string
    this.id = id;
  } else if(id != null &#x26;&#x26; id.toHexString) {
    // Duck-typing to support ObjectId from different npm packages
    return id;
  } else {
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  }

  if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.ObjectId" id="apidoc.element.mongodb-core.BSON.ObjectID.ObjectId">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>ObjectId
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ObjectID(id) {
  // Duck-typing to support ObjectId from different npm packages
  if(id instanceof ObjectID) return id;
  if(!(this instanceof ObjectID)) return new ObjectID(id);

  this._bsontype = &#x27;ObjectID&#x27;;

  // The most common usecase (blank id, new objectId instance)
  if(id == null || typeof id == &#x27;number&#x27;) {
    // Generate a new id
    this.id = this.generate(id);
    // If we are caching the hex string
    if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
    // Return the object
    return;
  }

  // Check if the passed in id is valid
  var valid = ObjectID.isValid(id);

  // Throw an error if it&#x27;s not a valid setup
  if(!valid &#x26;&#x26; id != null){
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24 &#x26;&#x26; hasBufferType) {
    return new ObjectID(new Buffer(id, &#x27;hex&#x27;));
  } else if(valid &#x26;&#x26; typeof id == &#x27;string&#x27; &#x26;&#x26; id.length == 24) {
    return ObjectID.createFromHexString(id);
  } else if(id != null &#x26;&#x26; id.length === 12) {
    // assume 12 byte string
    this.id = id;
  } else if(id != null &#x26;&#x26; id.toHexString) {
    // Duck-typing to support ObjectId from different npm packages
    return id;
  } else {
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  }

  if(ObjectID.cacheHexString) this.__id = this.toString(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.createFromHexString" id="apidoc.element.mongodb-core.BSON.ObjectID.createFromHexString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>createFromHexString
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createFromHexString(string) {
  // Throw an error if it&#x27;s not a valid setup
  if(typeof string === &#x27;undefined&#x27; || string != null &#x26;&#x26; string.length != 24) {
    throw new Error(&#x22;Argument passed in must be a single String of 12 bytes or a string of 24 hex characters&#x22;);
  }

  // Use Buffer.from method if available
  if(hasBufferType) return new ObjectID(new Buffer(string, &#x27;hex&#x27;));

  // Calculate lengths
  var array = new _Buffer(12);
  var n = 0;
  var i = 0;

  while (i &#x3c; 24) {
    array[n++] = decodeLookup[string.charCodeAt(i++)] &#x3c;&#x3c; 4 | decodeLookup[string.charCodeAt(i++)]
  }

  return new ObjectID(array);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.createFromTime" id="apidoc.element.mongodb-core.BSON.ObjectID.createFromTime">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>createFromTime
        <span class="apidocSignatureSpan">(time)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createFromTime(time) {
  var buffer = new Buffer([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
  // Encode time into first 4 bytes
  buffer[3] = time &#x26; 0xff;
  buffer[2] = (time &#x3e;&#x3e; 8) &#x26; 0xff;
  buffer[1] = (time &#x3e;&#x3e; 16) &#x26; 0xff;
  buffer[0] = (time &#x3e;&#x3e; 24) &#x26; 0xff;
  // Return the new objectId
  return new ObjectID(buffer);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.createPk" id="apidoc.element.mongodb-core.BSON.ObjectID.createPk">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>createPk
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPk() {
  return new ObjectID();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.isValid" id="apidoc.element.mongodb-core.BSON.ObjectID.isValid">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.</span>isValid
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isValid(id) {
  if(id == null) return false;

  if(typeof id == &#x27;number&#x27;) {
    return true;
  }

  if(typeof id == &#x27;string&#x27;) {
    return id.length == 12 || (id.length == 24 &#x26;&#x26; checkForHexRegExp.test(id));
  }

  if(id instanceof ObjectID) {
    return true;
  }

  if(id instanceof _Buffer) {
    return true;
  }

  // Duck-Typing detection of ObjectId like objects
  if(id.toHexString) {
    return id.id.length == 12 || (id.id.length == 24 &#x26;&#x26; checkForHexRegExp.test(id.id));
  }

  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.ObjectID.prototype" id="apidoc.module.mongodb-core.BSON.ObjectID.prototype">module mongodb-core.BSON.ObjectID.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.equals" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.equals">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>equals
        <span class="apidocSignatureSpan">(otherId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function equals(otherId) {
  var id;

  if(otherId instanceof ObjectID) {
    return this.toString() == otherId.toString();
  } else if(typeof otherId == &#x27;string&#x27; &#x26;&#x26; ObjectID.isValid(otherId) &#x26;&#x26; otherId.length == 12 &#x26;&#x26; this.id instanceof _Buffer) {
    return otherId === this.id.toString(&#x27;binary&#x27;);
  } else if(typeof otherId == &#x27;string&#x27; &#x26;&#x26; ObjectID.isValid(otherId) &#x26;&#x26; otherId.length == 24) {
    return otherId.toLowerCase() === this.toHexString();
  } else if(typeof otherId == &#x27;string&#x27; &#x26;&#x26; ObjectID.isValid(otherId) &#x26;&#x26; otherId.length == 12) {
    return otherId === this.id;
  } else if(otherId != null &#x26;&#x26; (otherId instanceof ObjectID || otherId.toHexString)) {
    return otherId.toHexString() === this.toHexString();
  } else {
    return false;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  } else if(self.cursorState.limit &#x3e; 0 &#x26;&#x26; self.cursorState.currentLimit &#x3e;= self.cursorState.limit) {
    // Ensure we kill the cursor on the server
    self.kill();
    // Set cursor in dead and notified state
    return setCursorDeadAndNotified(self, callback);
  } else if(self.cursorState.cursorIndex == self.cursorState.documents.length
&#x26;&#x26; !Long.ZERO.<span class="apidocCodeKeywordSpan">equals</span>(self.cursorState.cursorId)) {
// Ensure an empty cursor state
self.cursorState.documents = [];
self.cursorState.cursorIndex = 0;

// Check if topology is destroyed
if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor&#x27
;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.generate" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.generate">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>generate
        <span class="apidocSignatureSpan">(time)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generate = function (time) {
  if (&#x27;number&#x27; != typeof time) {
    time = ~~(Date.now()/1000);
  }

  // Use pid
  var pid = (typeof process === &#x27;undefined&#x27; ? Math.floor(Math.random() * 100000) : process.pid) % 0xFFFF;
  var inc = this.get_inc();
  // Buffer used
  var buffer = new Buffer(12);
  // Encode time
  buffer[3] = time &#x26; 0xff;
  buffer[2] = (time &#x3e;&#x3e; 8) &#x26; 0xff;
  buffer[1] = (time &#x3e;&#x3e; 16) &#x26; 0xff;
  buffer[0] = (time &#x3e;&#x3e; 24) &#x26; 0xff;
  // Encode machine
  buffer[6] = MACHINE_ID &#x26; 0xff;
  buffer[5] = (MACHINE_ID &#x3e;&#x3e; 8) &#x26; 0xff;
  buffer[4] = (MACHINE_ID &#x3e;&#x3e; 16) &#x26; 0xff;
  // Encode pid
  buffer[8] = pid &#x26; 0xff;
  buffer[7] = (pid &#x3e;&#x3e; 8) &#x26; 0xff;
  // Encode index
  buffer[11] = inc &#x26; 0xff;
  buffer[10] = (inc &#x3e;&#x3e; 8) &#x26; 0xff;
  buffer[9] = (inc &#x3e;&#x3e; 16) &#x26; 0xff;
  // Return the buffer
  return buffer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.getInc" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.getInc">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>getInc
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getInc = function () {
  return this.get_inc();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.getTimestamp" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.getTimestamp">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>getTimestamp
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTimestamp = function () {
  var timestamp = new Date();
  var time = this.id[3] | this.id[2] &#x3c;&#x3c; 8 | this.id[1] &#x3c;&#x3c; 16 | this.id[0] &#x3c;&#x3c; 24;
  timestamp.setTime(Math.floor(time) * 1000);
  return timestamp;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.get_inc" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.get_inc">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>get_inc
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get_inc = function () {
  return ObjectID.index = (ObjectID.index + 1) % 0xFFFFFF;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.inspect" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.inspect">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>inspect
        <span class="apidocSignatureSpan">(format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inspect = function (format) {
  // Is the id a buffer then use the buffer toString method to return the format
  if(this.id &#x26;&#x26; this.id.copy) {
    return this.id.toString(typeof format === &#x27;string&#x27; ? format : &#x27;hex&#x27;);
  }

  // if(this.buffer )
  return this.toHexString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.toHexString" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.toHexString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>toHexString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toHexString = function () {
  if(ObjectID.cacheHexString &#x26;&#x26; this.__id) return this.__id;

  var hexString = &#x27;&#x27;;
  if(!this.id || !this.id.length) {
    throw new Error(&#x27;invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is [&#x27; + JSON.stringify(this.id) + &#x27;]&#x27;);
  }

  if(this.id instanceof _Buffer) {
    hexString = convertToHex(this.id);
    if(ObjectID.cacheHexString) this.__id = hexString;
    return hexString;
  }

  for (var i = 0; i &#x3c; this.id.length; i++) {
    hexString += hexTable[this.id.charCodeAt(i)];
  }

  if(ObjectID.cacheHexString) this.__id = hexString;
  return hexString;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
self.set[serverName].setName = ismaster ? ismaster.setName : ismaster;
self.set[serverName].setVersion = ismaster ? ismaster.setVersion : ismaster;
// Add to the list
list.push(server);
}

function compareObjectIds(id1, id2) {
var a = new Buffer(id1.<span class="apidocCodeKeywordSpan">toHexString</span>(), &#x27;hex&#x27;);
var b = new Buffer(id2.toHexString(), &#x27;hex&#x27;);

if(a === b) {
  return 0;
}

if(typeof Buffer.compare === &#x27;function&#x27;) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.toHexString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.ObjectID.prototype.toString" id="apidoc.element.mongodb-core.BSON.ObjectID.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.ObjectID.prototype.</span>toString
        <span class="apidocSignatureSpan">(format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (format) {
  // Is the id a buffer then use the buffer toString method to return the format
  if(this.id &#x26;&#x26; this.id.copy) {
    return this.id.toString(typeof format === &#x27;string&#x27; ? format : &#x27;hex&#x27;);
  }

  // if(this.buffer )
  return this.toHexString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Symbol" id="apidoc.module.mongodb-core.BSON.Symbol">module mongodb-core.BSON.Symbol</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol.Symbol" id="apidoc.element.mongodb-core.BSON.Symbol.Symbol">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Symbol
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Symbol(value) {
  if(!(this instanceof Symbol)) return new Symbol(value);
  this._bsontype = &#x27;Symbol&#x27;;
  this.value = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Symbol.prototype" id="apidoc.module.mongodb-core.BSON.Symbol.prototype">module mongodb-core.BSON.Symbol.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.inspect" id="apidoc.element.mongodb-core.BSON.Symbol.prototype.inspect">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>inspect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inspect = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Symbol.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.toString" id="apidoc.element.mongodb-core.BSON.Symbol.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Symbol.prototype.valueOf" id="apidoc.element.mongodb-core.BSON.Symbol.prototype.valueOf">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Symbol.prototype.</span>valueOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">valueOf = function () {
  return this.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Timestamp" id="apidoc.module.mongodb-core.BSON.Timestamp">module mongodb-core.BSON.Timestamp</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.Timestamp" id="apidoc.element.mongodb-core.BSON.Timestamp.Timestamp">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.</span>Timestamp
        <span class="apidocSignatureSpan">(low, high)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Timestamp(low, high) {
  if(!(this instanceof Timestamp)) return new Timestamp(low, high);
  this._bsontype = &#x27;Timestamp&#x27;;
<span class="apidocCodeCommentSpan">  /**
   * @type {number}
   * @ignore
   */
</span>  this.low_ = low | 0;  // force into 32 signed bits.

  /**
   * @type {number}
   * @ignore
   */
  this.high_ = high | 0;  // force into 32 signed bits.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.fromBits" id="apidoc.element.mongodb-core.BSON.Timestamp.fromBits">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromBits
        <span class="apidocSignatureSpan">(lowBits, highBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromBits = function (lowBits, highBits) {
  return new Timestamp(lowBits, highBits);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.fromInt" id="apidoc.element.mongodb-core.BSON.Timestamp.fromInt">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromInt
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromInt = function (value) {
  if (-128 &#x3c;= value &#x26;&#x26; value &#x3c; 128) {
    var cachedObj = Timestamp.INT_CACHE_[value];
    if (cachedObj) {
      return cachedObj;
    }
  }

  var obj = new Timestamp(value | 0, value &#x3c; 0 ? -1 : 0);
  if (-128 &#x3c;= value &#x26;&#x26; value &#x3c; 128) {
    Timestamp.INT_CACHE_[value] = obj;
  }
  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.fromNumber" id="apidoc.element.mongodb-core.BSON.Timestamp.fromNumber">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromNumber
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromNumber = function (value) {
  if (isNaN(value) || !isFinite(value)) {
    return Timestamp.ZERO;
  } else if (value &#x3c;= -Timestamp.TWO_PWR_63_DBL_) {
    return Timestamp.MIN_VALUE;
  } else if (value + 1 &#x3e;= Timestamp.TWO_PWR_63_DBL_) {
    return Timestamp.MAX_VALUE;
  } else if (value &#x3c; 0) {
    return Timestamp.fromNumber(-value).negate();
  } else {
    return new Timestamp(
               (value % Timestamp.TWO_PWR_32_DBL_) | 0,
               (value / Timestamp.TWO_PWR_32_DBL_) | 0);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Logger
  this.logger = Logger(&#x27;Cursor&#x27;, topologyOptions);

  //
  // Did we pass in a cursor id
  if(typeof cmd == &#x27;number&#x27;) {
    this.cursorState.cursorId = Long.<span class="apidocCodeKeywordSpan">fromNumber</span>(cmd);
    this.cursorState.lastCursorId = this.cursorState.cursorId;
  } else if(cmd instanceof Long) {
    this.cursorState.cursorId = cmd;
    this.cursorState.lastCursorId = cmd;
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.fromString" id="apidoc.element.mongodb-core.BSON.Timestamp.fromString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.</span>fromString
        <span class="apidocSignatureSpan">(str, opt_radix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromString = function (str, opt_radix) {
  if (str.length == 0) {
    throw Error(&#x27;number format error: empty string&#x27;);
  }

  var radix = opt_radix || 10;
  if (radix &#x3c; 2 || 36 &#x3c; radix) {
    throw Error(&#x27;radix out of range: &#x27; + radix);
  }

  if (str.charAt(0) == &#x27;-&#x27;) {
    return Timestamp.fromString(str.substring(1), radix).negate();
  } else if (str.indexOf(&#x27;-&#x27;) &#x3e;= 0) {
    throw Error(&#x27;number format error: interior &#x22;-&#x22; character: &#x27; + str);
  }

  // Do several (8) digits each time through the loop, so as to
  // minimize the calls to the very expensive emulated div.
  var radixToPower = Timestamp.fromNumber(Math.pow(radix, 8));

  var result = Timestamp.ZERO;
  for (var i = 0; i &#x3c; str.length; i += 8) {
    var size = Math.min(8, str.length - i);
    var value = parseInt(str.substring(i, i + size), radix);
    if (size &#x3c; 8) {
      var power = Timestamp.fromNumber(Math.pow(radix, size));
      result = result.multiply(power).add(Timestamp.fromNumber(value));
    } else {
      result = result.multiply(radixToPower);
      result = result.add(Timestamp.fromNumber(value));
    }
  }
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.Timestamp.prototype" id="apidoc.module.mongodb-core.BSON.Timestamp.prototype">module mongodb-core.BSON.Timestamp.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.add" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.add">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>add
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (other) {
  // Divide each number into 4 chunks of 16 bits, and then sum the chunks.

  var a48 = this.high_ &#x3e;&#x3e;&#x3e; 16;
  var a32 = this.high_ &#x26; 0xFFFF;
  var a16 = this.low_ &#x3e;&#x3e;&#x3e; 16;
  var a00 = this.low_ &#x26; 0xFFFF;

  var b48 = other.high_ &#x3e;&#x3e;&#x3e; 16;
  var b32 = other.high_ &#x26; 0xFFFF;
  var b16 = other.low_ &#x3e;&#x3e;&#x3e; 16;
  var b00 = other.low_ &#x26; 0xFFFF;

  var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
  c00 += a00 + b00;
  c16 += c00 &#x3e;&#x3e;&#x3e; 16;
  c00 &#x26;= 0xFFFF;
  c16 += a16 + b16;
  c32 += c16 &#x3e;&#x3e;&#x3e; 16;
  c16 &#x26;= 0xFFFF;
  c32 += a32 + b32;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c48 += a48 + b48;
  c48 &#x26;= 0xFFFF;
  return Timestamp.fromBits((c16 &#x3c;&#x3c; 16) | c00, (c48 &#x3c;&#x3c; 16) | c32);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
Mongos.prototype.insert = function(ns, ops, options, callback) {
if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

// Not connected but we have a disconnecthandler
if(!this.isConnected() &#x26;&#x26; this.s.disconnectHandler != null) {
  return this.s.disconnectHandler.<span class="apidocCodeKeywordSpan">add</span>(&#x27;insert&#x27;, ns, ops, options, callback);
}

// No mongos proxy available
if(!this.isConnected()) {
  return callback(new MongoError(&#x27;no mongos proxy available&#x27;));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.and" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.and">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>and
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">and = function (other) {
  return Timestamp.fromBits(this.low_ &#x26; other.low_, this.high_ &#x26; other.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.compare" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.compare">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>compare
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compare = function (other) {
  if (this.equals(other)) {
    return 0;
  }

  var thisNeg = this.isNegative();
  var otherNeg = other.isNegative();
  if (thisNeg &#x26;&#x26; !otherNeg) {
    return -1;
  }
  if (!thisNeg &#x26;&#x26; otherNeg) {
    return 1;
  }

  // at this point, the signs are the same, so subtraction will not overflow
  if (this.subtract(other).isNegative()) {
    return -1;
  } else {
    return 1;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var b = new Buffer(id2.toHexString(), &#x27;hex&#x27;);

if(a === b) {
  return 0;
}

if(typeof Buffer.compare === &#x27;function&#x27;) {
  return Buffer.<span class="apidocCodeKeywordSpan">compare</span>(a, b);
}

var x = a.length;
var y = b.length;
var len = Math.min(x, y);

for (var i = 0; i &#x3c; len; i++) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.div" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.div">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>div
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">div = function (other) {
  if (other.isZero()) {
    throw Error(&#x27;division by zero&#x27;);
  } else if (this.isZero()) {
    return Timestamp.ZERO;
  }

  if (this.equals(Timestamp.MIN_VALUE)) {
    if (other.equals(Timestamp.ONE) ||
        other.equals(Timestamp.NEG_ONE)) {
      return Timestamp.MIN_VALUE;  // recall that -MIN_VALUE == MIN_VALUE
    } else if (other.equals(Timestamp.MIN_VALUE)) {
      return Timestamp.ONE;
    } else {
      // At this point, we have |other| &#x3e;= 2, so |this/other| &#x3c; |MIN_VALUE|.
      var halfThis = this.shiftRight(1);
      var approx = halfThis.div(other).shiftLeft(1);
      if (approx.equals(Timestamp.ZERO)) {
        return other.isNegative() ? Timestamp.ONE : Timestamp.NEG_ONE;
      } else {
        var rem = this.subtract(other.multiply(approx));
        var result = approx.add(rem.div(other));
        return result;
      }
    }
  } else if (other.equals(Timestamp.MIN_VALUE)) {
    return Timestamp.ZERO;
  }

  if (this.isNegative()) {
    if (other.isNegative()) {
      return this.negate().div(other.negate());
    } else {
      return this.negate().div(other).negate();
    }
  } else if (other.isNegative()) {
    return this.div(other.negate()).negate();
  }

  // Repeat the following until the remainder is less than other:  find a
  // floating-point that approximates remainder / other *from below*, add this
  // into the result, and subtract it from the remainder.  It is critical that
  // the approximate value is less than or equal to the real value so that the
  // remainder never becomes negative.
  var res = Timestamp.ZERO;
  var rem = this;
  while (rem.greaterThanOrEqual(other)) {
    // Approximate the result of division. This may be a little greater or
    // smaller than the actual value.
    var approx = Math.max(1, Math.floor(rem.toNumber() / other.toNumber()));

    // We will tweak the approximate result by changing it in the 48-th digit or
    // the smallest non-fractional digit, whichever is larger.
    var log2 = Math.ceil(Math.log(approx) / Math.LN2);
    var delta = (log2 &#x3c;= 48) ? 1 : Math.pow(2, log2 - 48);

    // Decrease the approximation until it is smaller than the remainder.  Note
    // that if it is too large, the product overflows and is negative.
    var approxRes = Timestamp.fromNumber(approx);
    var approxRem = approxRes.multiply(other);
    while (approxRem.isNegative() || approxRem.greaterThan(rem)) {
      approx -= delta;
      approxRes = Timestamp.fromNumber(approx);
      approxRem = approxRes.multiply(other);
    }

    // We know the answer can&#x27;t be zero... and actually, zero would cause
    // infinite recursion since we would make no progress.
    if (approxRes.isZero()) {
      approxRes = Timestamp.ONE;
    }

    res = res.add(approxRes);
    rem = rem.subtract(approxRem);
  }
  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.equals" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.equals">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>equals
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equals = function (other) {
  return (this.high_ == other.high_) &#x26;&#x26; (this.low_ == other.low_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  } else if(self.cursorState.limit &#x3e; 0 &#x26;&#x26; self.cursorState.currentLimit &#x3e;= self.cursorState.limit) {
    // Ensure we kill the cursor on the server
    self.kill();
    // Set cursor in dead and notified state
    return setCursorDeadAndNotified(self, callback);
  } else if(self.cursorState.cursorIndex == self.cursorState.documents.length
&#x26;&#x26; !Long.ZERO.<span class="apidocCodeKeywordSpan">equals</span>(self.cursorState.cursorId)) {
// Ensure an empty cursor state
self.cursorState.documents = [];
self.cursorState.cursorIndex = 0;

// Check if topology is destroyed
if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor&#x27
;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getHighBits" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.getHighBits">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getHighBits
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getHighBits = function () {
  return this.high_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// index = write32bit(index, _buffer, cursorId.getLowBits());
_buffer[index + 3] = (this.cursorId.getLowBits() &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.cursorId.getLowBits() &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.cursorId.getLowBits() &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.cursorId.getLowBits()) &#x26; 0xff;
index = index + 4;

// index = write32bit(index, _buffer, cursorId.<span class="apidocCodeKeywordSpan">getHighBits</span>());
_buffer[index + 3] = (this.cursorId.getHighBits() &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.cursorId.getHighBits() &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.cursorId.getHighBits() &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.cursorId.getHighBits()) &#x26; 0xff;
index = index + 4;

// Return buffer
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getLowBits" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.getLowBits">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getLowBits
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLowBits = function () {
  return this.low_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
_buffer[index + 3] = (this.numberToReturn &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.numberToReturn &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.numberToReturn &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.numberToReturn) &#x26; 0xff;
index = index + 4;

// Write cursor id
// index = write32bit(index, _buffer, cursorId.<span class="apidocCodeKeywordSpan">getLowBits</span>());
_buffer[index + 3] = (this.cursorId.getLowBits() &#x3e;&#x3e; 24) &#x26; 0xff;
_buffer[index + 2] = (this.cursorId.getLowBits() &#x3e;&#x3e; 16) &#x26; 0xff;
_buffer[index + 1] = (this.cursorId.getLowBits() &#x3e;&#x3e; 8) &#x26; 0xff;
_buffer[index] = (this.cursorId.getLowBits()) &#x26; 0xff;
index = index + 4;

// index = write32bit(index, _buffer, cursorId.getHighBits());
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getLowBitsUnsigned" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.getLowBitsUnsigned">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getLowBitsUnsigned
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLowBitsUnsigned = function () {
  return (this.low_ &#x3e;= 0) ?
      this.low_ : Timestamp.TWO_PWR_32_DBL_ + this.low_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.getNumBitsAbs" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.getNumBitsAbs">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>getNumBitsAbs
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getNumBitsAbs = function () {
  if (this.isNegative()) {
    if (this.equals(Timestamp.MIN_VALUE)) {
      return 64;
    } else {
      return this.negate().getNumBitsAbs();
    }
  } else {
    var val = this.high_ != 0 ? this.high_ : this.low_;
    for (var bit = 31; bit &#x3e; 0; bit--) {
      if ((val &#x26; (1 &#x3c;&#x3c; bit)) != 0) {
        break;
      }
    }
    return this.high_ != 0 ? bit + 33 : bit + 1;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.greaterThan" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.greaterThan">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>greaterThan
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">greaterThan = function (other) {
  return this.compare(other) &#x3e; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.greaterThanOrEqual" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.greaterThanOrEqual">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>greaterThanOrEqual
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">greaterThanOrEqual = function (other) {
  return this.compare(other) &#x3e;= 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.isNegative" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.isNegative">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>isNegative
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isNegative = function () {
  return this.high_ &#x3c; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.isOdd" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.isOdd">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>isOdd
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isOdd = function () {
  return (this.low_ &#x26; 1) == 1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.isZero" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.isZero">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>isZero
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isZero = function () {
  return this.high_ == 0 &#x26;&#x26; this.low_ == 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Set cursor to dead
this.cursorState.dead = true;
this.cursorState.killed = true;
// Remove documents
this.cursorState.documents = [];

// If no cursor id just return
if(this.cursorState.cursorId == null || this.cursorState.cursorId.<span class="apidocCodeKeywordSpan">isZero</span>() || this.cursorState
.init == false) {
  if(callback) callback(null, null);
  return;
}

// Default pool
var pool = this.server.s.pool;
// Execute command
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.lessThan" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.lessThan">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>lessThan
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lessThan = function (other) {
  return this.compare(other) &#x3c; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.lessThanOrEqual" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.lessThanOrEqual">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>lessThanOrEqual
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lessThanOrEqual = function (other) {
  return this.compare(other) &#x3c;= 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.modulo" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.modulo">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>modulo
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">modulo = function (other) {
  return this.subtract(this.div(other).multiply(other));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.multiply" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.multiply">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>multiply
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">multiply = function (other) {
  if (this.isZero()) {
    return Timestamp.ZERO;
  } else if (other.isZero()) {
    return Timestamp.ZERO;
  }

  if (this.equals(Timestamp.MIN_VALUE)) {
    return other.isOdd() ? Timestamp.MIN_VALUE : Timestamp.ZERO;
  } else if (other.equals(Timestamp.MIN_VALUE)) {
    return this.isOdd() ? Timestamp.MIN_VALUE : Timestamp.ZERO;
  }

  if (this.isNegative()) {
    if (other.isNegative()) {
      return this.negate().multiply(other.negate());
    } else {
      return this.negate().multiply(other).negate();
    }
  } else if (other.isNegative()) {
    return this.multiply(other.negate()).negate();
  }

  // If both Timestamps are small, use float multiplication
  if (this.lessThan(Timestamp.TWO_PWR_24_) &#x26;&#x26;
      other.lessThan(Timestamp.TWO_PWR_24_)) {
    return Timestamp.fromNumber(this.toNumber() * other.toNumber());
  }

  // Divide each Timestamp into 4 chunks of 16 bits, and then add up 4x4 products.
  // We can skip products that would overflow.

  var a48 = this.high_ &#x3e;&#x3e;&#x3e; 16;
  var a32 = this.high_ &#x26; 0xFFFF;
  var a16 = this.low_ &#x3e;&#x3e;&#x3e; 16;
  var a00 = this.low_ &#x26; 0xFFFF;

  var b48 = other.high_ &#x3e;&#x3e;&#x3e; 16;
  var b32 = other.high_ &#x26; 0xFFFF;
  var b16 = other.low_ &#x3e;&#x3e;&#x3e; 16;
  var b00 = other.low_ &#x26; 0xFFFF;

  var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
  c00 += a00 * b00;
  c16 += c00 &#x3e;&#x3e;&#x3e; 16;
  c00 &#x26;= 0xFFFF;
  c16 += a16 * b00;
  c32 += c16 &#x3e;&#x3e;&#x3e; 16;
  c16 &#x26;= 0xFFFF;
  c16 += a00 * b16;
  c32 += c16 &#x3e;&#x3e;&#x3e; 16;
  c16 &#x26;= 0xFFFF;
  c32 += a32 * b00;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c32 += a16 * b16;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c32 += a00 * b32;
  c48 += c32 &#x3e;&#x3e;&#x3e; 16;
  c32 &#x26;= 0xFFFF;
  c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;
  c48 &#x26;= 0xFFFF;
  return Timestamp.fromBits((c16 &#x3c;&#x3c; 16) | c00, (c48 &#x3c;&#x3c; 16) | c32);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.negate" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.negate">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>negate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">negate = function () {
  if (this.equals(Timestamp.MIN_VALUE)) {
    return Timestamp.MIN_VALUE;
  } else {
    return this.not().add(Timestamp.ONE);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.not" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.not">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>not
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">not = function () {
  return Timestamp.fromBits(~this.low_, ~this.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.notEquals" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.notEquals">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>notEquals
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notEquals = function (other) {
  return (this.high_ != other.high_) || (this.low_ != other.low_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.or" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.or">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>or
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">or = function (other) {
  return Timestamp.fromBits(this.low_ | other.low_, this.high_ | other.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftLeft" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftLeft">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>shiftLeft
        <span class="apidocSignatureSpan">(numBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shiftLeft = function (numBits) {
  numBits &#x26;= 63;
  if (numBits == 0) {
    return this;
  } else {
    var low = this.low_;
    if (numBits &#x3c; 32) {
      var high = this.high_;
      return Timestamp.fromBits(
                 low &#x3c;&#x3c; numBits,
                 (high &#x3c;&#x3c; numBits) | (low &#x3e;&#x3e;&#x3e; (32 - numBits)));
    } else {
      return Timestamp.fromBits(0, low &#x3c;&#x3c; (numBits - 32));
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftRight" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftRight">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>shiftRight
        <span class="apidocSignatureSpan">(numBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shiftRight = function (numBits) {
  numBits &#x26;= 63;
  if (numBits == 0) {
    return this;
  } else {
    var high = this.high_;
    if (numBits &#x3c; 32) {
      var low = this.low_;
      return Timestamp.fromBits(
                 (low &#x3e;&#x3e;&#x3e; numBits) | (high &#x3c;&#x3c; (32 - numBits)),
                 high &#x3e;&#x3e; numBits);
    } else {
      return Timestamp.fromBits(
                 high &#x3e;&#x3e; (numBits - 32),
                 high &#x3e;= 0 ? 0 : -1);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftRightUnsigned" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.shiftRightUnsigned">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>shiftRightUnsigned
        <span class="apidocSignatureSpan">(numBits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shiftRightUnsigned = function (numBits) {
  numBits &#x26;= 63;
  if (numBits == 0) {
    return this;
  } else {
    var high = this.high_;
    if (numBits &#x3c; 32) {
      var low = this.low_;
      return Timestamp.fromBits(
                 (low &#x3e;&#x3e;&#x3e; numBits) | (high &#x3c;&#x3c; (32 - numBits)),
                 high &#x3e;&#x3e;&#x3e; numBits);
    } else if (numBits == 32) {
      return Timestamp.fromBits(high, 0);
    } else {
      return Timestamp.fromBits(high &#x3e;&#x3e;&#x3e; (numBits - 32), 0);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.subtract" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.subtract">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>subtract
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">subtract = function (other) {
  return this.add(other.negate());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toInt" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.toInt">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toInt
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toInt = function () {
  return this.low_;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toJSON" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toNumber" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.toNumber">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toNumber = function () {
  return this.high_ * Timestamp.TWO_PWR_32_DBL_ +
         this.getLowBitsUnsigned();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.toString" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>toString
        <span class="apidocSignatureSpan">(opt_radix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (opt_radix) {
  var radix = opt_radix || 10;
  if (radix &#x3c; 2 || 36 &#x3c; radix) {
    throw Error(&#x27;radix out of range: &#x27; + radix);
  }

  if (this.isZero()) {
    return &#x27;0&#x27;;
  }

  if (this.isNegative()) {
    if (this.equals(Timestamp.MIN_VALUE)) {
      // We need to change the Timestamp value before it can be negated, so we remove
      // the bottom-most digit in this base and then recurse to do the rest.
      var radixTimestamp = Timestamp.fromNumber(radix);
      var div = this.div(radixTimestamp);
      var rem = div.multiply(radixTimestamp).subtract(this);
      return div.toString(radix) + rem.toInt().toString(radix);
    } else {
      return &#x27;-&#x27; + this.negate().toString(radix);
    }
  }

  // Do several (6) digits each time through the loop, so as to
  // minimize the calls to the very expensive emulated div.
  var radixToPower = Timestamp.fromNumber(Math.pow(radix, 6));

  var rem = this;
  var result = &#x27;&#x27;;
  while (true) {
    var remDiv = rem.div(radixToPower);
    var intval = rem.subtract(remDiv.multiply(radixToPower)).toInt();
    var digits = intval.toString(radix);

    rem = remDiv;
    if (rem.isZero()) {
      return digits + result;
    } else {
      while (digits.length &#x3c; 6) {
        digits = &#x27;0&#x27; + digits;
      }
      result = &#x27;&#x27; + digits + result;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.Timestamp.prototype.xor" id="apidoc.element.mongodb-core.BSON.Timestamp.prototype.xor">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.Timestamp.prototype.</span>xor
        <span class="apidocSignatureSpan">(other)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">xor = function (other) {
  return Timestamp.fromBits(this.low_ ^ other.low_, this.high_ ^ other.high_);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.BSON.prototype" id="apidoc.module.mongodb-core.BSON.prototype">module mongodb-core.BSON.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.prototype.calculateObjectSize" id="apidoc.element.mongodb-core.BSON.prototype.calculateObjectSize">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>calculateObjectSize
        <span class="apidocSignatureSpan">(object, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateObjectSize = function (object, options) {
	options = options || {};

	var serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27;
		? options.serializeFunctions : false;
	var ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27;
		? options.ignoreUndefined : true;

  return calculateObjectSize(object, serializeFunctions, ignoreUndefined);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.prototype.deserialize" id="apidoc.element.mongodb-core.BSON.prototype.deserialize">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>deserialize
        <span class="apidocSignatureSpan">(buffer, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deserialize = function (buffer, options) {
  return deserialize(buffer, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var document = this.data.slice(this.index, this.index + bsonSize);
// Set up field we wish to keep as raw
var fieldsAsRaw = {}
fieldsAsRaw[documentsReturnedIn] = true;
_options.fieldsAsRaw = fieldsAsRaw;

// Deserialize but keep the array of documents in non-parsed form
var doc = this.bson.<span class="apidocCodeKeywordSpan">deserialize</span>(document, _options);

// Get the documents
this.documents = doc.cursor[documentsReturnedIn];
this.numberReturned = this.documents.length;
// Ensure we have a Long valie cursor id
this.cursorId = typeof doc.cursor.id == &#x27;number&#x27;
  ? Long.fromNumber(doc.cursor.id)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.prototype.deserializeStream" id="apidoc.element.mongodb-core.BSON.prototype.deserializeStream">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>deserializeStream
        <span class="apidocSignatureSpan">(data, startIndex, numberOfDocuments, documents, docStartIndex, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deserializeStream = function (data, startIndex, numberOfDocuments, documents, docStartIndex, options) {
  options = options != null ? options : {};
  var index = startIndex;
  // Loop over all documents
  for(var i = 0; i &#x3c; numberOfDocuments; i++) {
    // Find size of the document
    var size = data[index] | data[index + 1] &#x3c;&#x3c; 8 | data[index + 2] &#x3c;&#x3c; 16 | data[index + 3] &#x3c;&#x3c; 24;
    // Update options with index
    options[&#x27;index&#x27;] = index;
    // Parse the document at this point
    documents[docStartIndex + i] = this.deserialize(data, options);
    // Adjust index by the document size
    index = index + size;
  }

  // Return object containing end index of parsing and list of documents
  return index;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.prototype.serialize" id="apidoc.element.mongodb-core.BSON.prototype.serialize">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>serialize
        <span class="apidocSignatureSpan">(object, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function serialize(object, options) {
	options = options || {};
	// Unpack the options
	var checkKeys = typeof options.checkKeys == &#x27;boolean&#x27;
		? options.checkKeys : false;
	var serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27;
		? options.serializeFunctions : false;
	var ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27;
		? options.ignoreUndefined : true;

	// Attempt to serialize
	var serializationIndex = serializer(buffer, object, checkKeys, 0, 0, serializeFunctions, ignoreUndefined, []);
	// Create the final buffer
	var finishedBuffer = new Buffer(serializationIndex);
	// Copy into the finished buffer
	buffer.copy(finishedBuffer, 0, 0, finishedBuffer.length);
	// Return the buffer
	return finishedBuffer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  + 4 // numberToReturn
);

// Add header to buffers
buffers.push(header);

// Serialize the query
var query = self.bson.<span class="apidocCodeKeywordSpan">serialize</span>(this.query, {
  checkKeys: this.checkKeys,
  serializeFunctions: this.serializeFunctions,
  ignoreUndefined: this.ignoreUndefined,
});

// Add query document
buffers.push(query);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.BSON.prototype.serializeWithBufferAndIndex" id="apidoc.element.mongodb-core.BSON.prototype.serializeWithBufferAndIndex">
        function <span class="apidocSignatureSpan">mongodb-core.BSON.prototype.</span>serializeWithBufferAndIndex
        <span class="apidocSignatureSpan">(object, finalBuffer, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeWithBufferAndIndex = function (object, finalBuffer, options) {
	options = options || {};
	// Unpack the options
	var checkKeys = typeof options.checkKeys == &#x27;boolean&#x27;
		? options.checkKeys : false;
	var serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27;
		? options.serializeFunctions : false;
	var ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27;
		? options.ignoreUndefined : true;
	var startIndex = typeof options.index == &#x27;number&#x27;
		? options.index : 0;

	// Attempt to serialize
	var serializationIndex = serializer(buffer, object, checkKeys, startIndex || 0, 0, serializeFunctions, ignoreUndefined);
	buffer.copy(finalBuffer, startIndex, 0, serializationIndex);

	// Return the index
	return serializationIndex - 1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Connection" id="apidoc.module.mongodb-core.Connection">module mongodb-core.Connection</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.Connection" id="apidoc.element.mongodb-core.Connection.Connection">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Connection
        <span class="apidocSignatureSpan">(messageHandler, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Connection = function (messageHandler, options) {
  // Add event listener
  EventEmitter.call(this);
  // Set empty if no options passed
  this.options = options || {};
  // Identification information
  this.id = _id++;
  // Logger instance
  this.logger = Logger(&#x27;Connection&#x27;, options);
  // No bson parser passed in
  if(!options.bson) throw new Error(&#x22;must pass in valid bson parser&#x22;);
  // Get bson parser
  this.bson = options.bson;
  // Grouping tag used for debugging purposes
  this.tag = options.tag;
  // Message handler
  this.messageHandler = messageHandler;

  // Max BSON message size
  this.maxBsonMessageSize = options.maxBsonMessageSize || (1024 * 1024 * 16 * 4);
  // Debug information
  if(this.logger.isDebug()) this.logger.debug(f(&#x27;creating connection %s with options [%s]&#x27;, this.id, JSON.stringify(debugOptions
(debugFields, options))));

  // Default options
  this.port = options.port || 27017;
  this.host = options.host || &#x27;localhost&#x27;;
  this.keepAlive = typeof options.keepAlive == &#x27;boolean&#x27; ? options.keepAlive : true;
  this.keepAliveInitialDelay = options.keepAliveInitialDelay || 0;
  this.noDelay = typeof options.noDelay == &#x27;boolean&#x27; ? options.noDelay : true;
  this.connectionTimeout = options.connectionTimeout || 0;
  this.socketTimeout = options.socketTimeout || 0;

  // If connection was destroyed
  this.destroyed = false;

  // Check if we have a domain socket
  this.domainSocket = this.host.indexOf(&#x27;\/&#x27;) != -1;

  // Serialize commands using function
  this.singleBufferSerializtion = typeof options.singleBufferSerializtion == &#x27;boolean&#x27; ? options.singleBufferSerializtion : true
;
  this.serializationFunction = this.singleBufferSerializtion ? &#x27;toBinUnified&#x27; : &#x27;toBin&#x27;;

  // SSL options
  this.ca = options.ca || null;
  this.crl = options.crl || null;
  this.cert = options.cert || null;
  this.key = options.key || null;
  this.passphrase = options.passphrase || null;
  this.ssl = typeof options.ssl == &#x27;boolean&#x27; ? options.ssl : false;
  this.rejectUnauthorized = typeof options.rejectUnauthorized == &#x27;boolean&#x27; ? options.rejectUnauthorized : true;
  this.checkServerIdentity = typeof options.checkServerIdentity == &#x27;boolean&#x27;
    || typeof options.checkServerIdentity == &#x27;function&#x27; ? options.checkServerIdentity : true;

  // If ssl not enabled
  if(!this.ssl) this.rejectUnauthorized = false;

  // Response options
  this.responseOptions = {
    promoteLongs: typeof options.promoteLongs == &#x27;boolean&#x27; ?  options.promoteLongs : true,
    promoteValues: typeof options.promoteValues == &#x27;boolean&#x27; ? options.promoteValues : true,
    promoteBuffers: typeof options.promoteBuffers == &#x27;boolean&#x27; ? options.promoteBuffers: false
  }

  // Flushing
  this.flushing = false;
  this.queue = [];

  // Internal state
  this.connection = null;
  this.writeStream = null;

  // Create hash method
  var hash = crypto.createHash(&#x27;sha1&#x27;);
  hash.update(f(&#x27;%s:%s&#x27;, this.host, this.port));

  // Create a hash name
  this.hashedName = hash.digest(&#x27;hex&#x27;);

  // All operations in flight on the connection
  this.workItems = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.connections" id="apidoc.element.mongodb-core.Connection.connections">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>connections
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connections = function () {
  return connections;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @method
* @return {Connection[]}
*/
Mongos.prototype.connections = function() {
 var connections = [];

 for(var i = 0; i &#x3c; this.connectedProxies.length; i++) {
   connections = connections.concat(this.connectedProxies[i].<span class="apidocCodeKeywordSpan">connections</span>());
 }

 return connections;
}

/**
* A mongos connect event, used to verify that the connection is up and running
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.disableConnectionAccounting" id="apidoc.element.mongodb-core.Connection.disableConnectionAccounting">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>disableConnectionAccounting
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disableConnectionAccounting = function () {
  connectionAccounting = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.enableConnectionAccounting" id="apidoc.element.mongodb-core.Connection.enableConnectionAccounting">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>enableConnectionAccounting
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enableConnectionAccounting = function () {
  connectionAccounting = true;
  connections = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.super_" id="apidoc.element.mongodb-core.Connection.super_">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Connection.prototype" id="apidoc.module.mongodb-core.Connection.prototype">module mongodb-core.Connection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.connect" id="apidoc.element.mongodb-core.Connection.prototype.connect">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>connect
        <span class="apidocSignatureSpan">(_options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (_options) {
  var self = this;
  _options = _options || {};
  // Set the connections
  if(connectionAccounting) addConnection(this.id, this);
  // Check if we are overriding the promoteLongs
  if(typeof _options.promoteLongs == &#x27;boolean&#x27;) {
    self.responseOptions.promoteLongs = _options.promoteLongs;
    self.responseOptions.promoteValues = _options.promoteValues;
    self.responseOptions.promoteBuffers = _options.promoteBuffers;
  }

  // Create new connection instance
  self.connection = self.domainSocket
    ? net.createConnection(self.host)
    : net.createConnection(self.port, self.host);

  // Set the options for the connection
  self.connection.setKeepAlive(self.keepAlive, self.keepAliveInitialDelay);
  self.connection.setTimeout(self.connectionTimeout);
  self.connection.setNoDelay(self.noDelay);

  // If we have ssl enabled
  if(self.ssl) {
    var sslOptions = {
        socket: self.connection
      , rejectUnauthorized: self.rejectUnauthorized
    }

    // Merge in options
    merge(sslOptions, this.options);
    merge(sslOptions, _options);

    // Set options for ssl
    if(self.ca) sslOptions.ca = self.ca;
    if(self.crl) sslOptions.crl = self.crl;
    if(self.cert) sslOptions.cert = self.cert;
    if(self.key) sslOptions.key = self.key;
    if(self.passphrase) sslOptions.passphrase = self.passphrase;

    // Override checkServerIdentity behavior
    if(self.checkServerIdentity == false) {
      // Skip the identiy check by retuning undefined as per node documents
      // https://nodejs.org/api/tls.html#tls_tls_connect_options_callback
      sslOptions.checkServerIdentity = function() {
        return undefined;
      }
    } else if(typeof self.checkServerIdentity == &#x27;function&#x27;) {
      sslOptions.checkServerIdentity = self.checkServerIdentity;
    }

    // Set default sni servername to be the same as host
    if(sslOptions.servername == null) {
      sslOptions.servername = self.host;
    }

    // Attempt SSL connection
    self.connection = tls.connect(self.port, self.host, sslOptions, function() {
      // Error on auth or skip
      if(self.connection.authorizationError &#x26;&#x26; self.rejectUnauthorized) {
        return self.emit(&#x22;error&#x22;, self.connection.authorizationError, self, {ssl:true});
      }

      // Set socket timeout instead of connection timeout
      self.connection.setTimeout(self.socketTimeout);
      // We are done emit connect
      self.emit(&#x27;connect&#x27;, self);
    });
    self.connection.setTimeout(self.connectionTimeout);
  } else {
    self.connection.on(&#x27;connect&#x27;, function() {
      // Set socket timeout instead of connection timeout
      self.connection.setTimeout(self.socketTimeout);
      // Emit connect event
      self.emit(&#x27;connect&#x27;, self);
    });
  }

  // Add handlers for events
  self.connection.once(&#x27;error&#x27;, errorHandler(self));
  self.connection.once(&#x27;timeout&#x27;, timeoutHandler(self));
  self.connection.once(&#x27;close&#x27;, closeHandler(self));
  self.connection.on(&#x27;data&#x27;, dataHandler(self));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //       // _server.destroy();
  //       // test.done();
  //     });
  //   });
  // });
});

server.<span class="apidocCodeKeywordSpan">connect</span>();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.destroy" id="apidoc.element.mongodb-core.Connection.prototype.destroy">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  // Set the connections
  if(connectionAccounting) deleteConnection(this.id);
  if(this.connection) {
    // Catch posssible exception thrown by node 0.10.x
    try { this.connection.end(); } catch (err) {}
    // Destroy connection
    this.connection.destroy();
  }

  this.destroyed = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//         console.log(&#x22;=========== joined :: &#x22; + _t + &#x22; :: &#x22; + _server.name)
//         executeCursors(_server, function() {
//         });
//       }
//     })
//
//     // var s = _server.s.replicaSetState.secondaries[0];
//     // s.<span class="apidocCodeKeywordSpan">destroy</span>({emitClose:true});
//     executeCursors(_server, function() {
//       console.log(&#x22;============== 0&#x22;)
//       // Attempt to force a server reconnect
//       var s = _server.s.replicaSetState.secondaries[0];
//       name = s.name;
//       s.destroy({emitClose:true});
//       // console.log(&#x22;============== 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.isConnected" id="apidoc.element.mongodb-core.Connection.prototype.isConnected">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>isConnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isConnected = function () {
  if(this.destroyed) return false;
  return !this.connection.destroyed &#x26;&#x26; this.connection.writable;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// We have a dead and killed cursor, attempting to call next should error
if(isCursorDeadAndKilled(self, callback)) return;

// We have just started the cursor
if(!self.cursorState.init) {
  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(!self.topology.<span class="apidocCodeKeywordSpan">isConnected</span>(self.options) &#x26;&#x26; self.disconnectHandler !=
null) {
    if (self.topology.isDestroyed()) {
      // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
      return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
    }
    return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.resetSocketTimeout" id="apidoc.element.mongodb-core.Connection.prototype.resetSocketTimeout">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>resetSocketTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resetSocketTimeout = function () {
  if(this.connection) {
    this.connection.setTimeout(this.socketTimeout);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Reset timeout counter
self.numberOfConsecutiveTimeouts = 0;

// Reset the connection timeout if we modified it for
// this operation
if(workItem.socketTimeout) {
  connection.<span class="apidocCodeKeywordSpan">resetSocketTimeout</span>();
}

// Log if debug enabled
if(self.logger.isDebug()) {
  self.logger.debug(f(&#x27;message [%s] received from %s:%s&#x27;
    , message.raw.toString(&#x27;hex&#x27;), self.options.host, self.options.port));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.setSocketTimeout" id="apidoc.element.mongodb-core.Connection.prototype.setSocketTimeout">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>setSocketTimeout
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setSocketTimeout = function (value) {
  if(this.connection) {
    this.connection.setTimeout(value);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// as long as there is an expected response
if (! workItem.noResponse) {
  connection.workItems.push(workItem);
}

// We have a custom socketTimeout
if(!workItem.immediateRelease &#x26;&#x26; typeof workItem.socketTimeout == &#x27;number&#x27;) {
  connection.<span class="apidocCodeKeywordSpan">setSocketTimeout</span>(workItem.socketTimeout);
}

// Put operation on the wire
if(Array.isArray(buffer)) {
  for(var i = 0; i &#x3c; buffer.length; i++) {
    connection.write(buffer[i])
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.toJSON" id="apidoc.element.mongodb-core.Connection.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return {id: this.id, host: this.host, port: this.port};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.toString" id="apidoc.element.mongodb-core.Connection.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  return &#x22;&#x22; + this.id;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.unref" id="apidoc.element.mongodb-core.Connection.prototype.unref">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>unref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unref = function () {
  if (this.connection) this.connection.unref();
  else {
    var self = this;
    this.once(&#x27;connect&#x27;, function() {
      self.connection.unref();
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Unref this connection
 * @method
 * @return {boolean}
 */
Connection.prototype.unref = function() {
  if (this.connection) this.connection.<span class="apidocCodeKeywordSpan">unref</span>();
  else {
    var self = this;
    this.once(&#x27;connect&#x27;, function() {
      self.connection.unref();
    });
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Connection.prototype.write" id="apidoc.element.mongodb-core.Connection.prototype.write">
        function <span class="apidocSignatureSpan">mongodb-core.Connection.prototype.</span>write
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (buffer) {
  var i;
  // Debug Log
  if(this.logger.isDebug()) {
    if(!Array.isArray(buffer)) {
      this.logger.debug(f(&#x27;writing buffer [%s] to %s:%s&#x27;, buffer.toString(&#x27;hex&#x27;), this.host, this.port));
    } else {
      for(i = 0; i &#x3c; buffer.length; i++)
        this.logger.debug(f(&#x27;writing buffer [%s] to %s:%s&#x27;, buffer[i].toString(&#x27;hex&#x27;), this.host, this.port));
    }
  }

  // Write out the command
  if(!Array.isArray(buffer)) return this.connection.write(buffer, &#x27;binary&#x27;);
  // Iterate over all buffers and write them in order to the socket
  for(i = 0; i &#x3c; buffer.length; i++) this.connection.write(buffer[i], &#x27;binary&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// Add promote values if defined
if(typeof self.cursorState.promoteBuffers == &#x27;boolean&#x27;) {
  queryOptions.promoteBuffers = self.cursorState.promoteBuffers;
}
// Write the initial command out
self.server.s.pool.<span class="apidocCodeKeywordSpan">write</span>(self.query, queryOptions, queryCallback);
}

Cursor.prototype._getmore = function(callback) {
if(this.logger.isDebug()) this.logger.debug(f(&#x27;schedule getMore call for query [%s]&#x27;, JSON.stringify(this.query)))
// Determine if it&#x27;s a raw query
var raw = this.options.raw || this.cmd.raw;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Cursor" id="apidoc.module.mongodb-core.Cursor">module mongodb-core.Cursor</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.Cursor" id="apidoc.element.mongodb-core.Cursor.Cursor">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Cursor
        <span class="apidocSignatureSpan">(bson, ns, cmd, options, topology, topologyOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Cursor = function (bson, ns, cmd, options, topology, topologyOptions) {
  options = options || {};

  // Cursor pool
  this.pool = null;
  // Cursor server
  this.server = null;

  // Do we have a not connected handler
  this.disconnectHandler = options.disconnectHandler;

  // Set local values
  this.bson = bson;
  this.ns = ns;
  this.cmd = cmd;
  this.options = options;
  this.topology = topology;

  // All internal state
  this.cursorState = {
      cursorId: null
    , cmd: cmd
    , documents: options.documents || []
    , cursorIndex: 0
    , dead: false
    , killed: false
    , init: false
    , notified: false
    , limit: options.limit || cmd.limit || 0
    , skip: options.skip || cmd.skip || 0
    , batchSize: options.batchSize || cmd.batchSize || 1000
    , currentLimit: 0
    // Result field name if not a cursor (contains the array of results)
    , transforms: options.transforms
  }

  // Add promoteLong to cursor state
  if(typeof topologyOptions.promoteLongs == &#x27;boolean&#x27;) {
    this.cursorState.promoteLongs = topologyOptions.promoteLongs;
  } else if(typeof options.promoteLongs == &#x27;boolean&#x27;) {
    this.cursorState.promoteLongs = options.promoteLongs;
  }

  // Add promoteValues to cursor state
  if(typeof topologyOptions.promoteValues == &#x27;boolean&#x27;) {
    this.cursorState.promoteValues = topologyOptions.promoteValues;
  } else if(typeof options.promoteValues == &#x27;boolean&#x27;) {
    this.cursorState.promoteValues = options.promoteValues;
  }

  // Add promoteBuffers to cursor state
  if(typeof topologyOptions.promoteBuffers == &#x27;boolean&#x27;) {
    this.cursorState.promoteBuffers = topologyOptions.promoteBuffers;
  } else if(typeof options.promoteBuffers == &#x27;boolean&#x27;) {
    this.cursorState.promoteBuffers = options.promoteBuffers;
  }

  // Logger
  this.logger = Logger(&#x27;Cursor&#x27;, topologyOptions);

  //
  // Did we pass in a cursor id
  if(typeof cmd == &#x27;number&#x27;) {
    this.cursorState.cursorId = Long.fromNumber(cmd);
    this.cursorState.lastCursorId = this.cursorState.cursorId;
  } else if(cmd instanceof Long) {
    this.cursorState.cursorId = cmd;
    this.cursorState.lastCursorId = cmd;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Cursor.prototype" id="apidoc.module.mongodb-core.Cursor.prototype">module mongodb-core.Cursor.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype._find" id="apidoc.element.mongodb-core.Cursor.prototype._find">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>_find
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_find = function (callback) {
  var self = this;

  if(self.logger.isDebug()) {
    self.logger.debug(f(&#x27;issue initial query [%s] with flags [%s]&#x27;
      , JSON.stringify(self.cmd)
      , JSON.stringify(self.query)));
  }

  var queryCallback = function(err, r) {
    if(err) return callback(err);

    // Get the raw message
    var result = r.message;

    // Query failure bit set
    if(result.queryFailure) {
      return callback(MongoError.create(result.documents[0]), null);
    }

    // Check if we have a command cursor
    if(Array.isArray(result.documents) &#x26;&#x26; result.documents.length == 1
      &#x26;&#x26; (!self.cmd.find || (self.cmd.find &#x26;&#x26; self.cmd.virtual == false))
      &#x26;&#x26; (result.documents[0].cursor != &#x27;string&#x27;
        || result.documents[0][&#x27;$err&#x27;]
        || result.documents[0][&#x27;errmsg&#x27;]
        || Array.isArray(result.documents[0].result))
      ) {

      // We have a an error document return the error
      if(result.documents[0][&#x27;$err&#x27;]
        || result.documents[0][&#x27;errmsg&#x27;]) {
        return callback(MongoError.create(result.documents[0]), null);
      }

      // We have a cursor document
      if(result.documents[0].cursor != null
        &#x26;&#x26; typeof result.documents[0].cursor != &#x27;string&#x27;) {
          var id = result.documents[0].cursor.id;
          // If we have a namespace change set the new namespace for getmores
          if(result.documents[0].cursor.ns) {
            self.ns = result.documents[0].cursor.ns;
          }
          // Promote id to long if needed
          self.cursorState.cursorId = typeof id == &#x27;number&#x27; ? Long.fromNumber(id) : id;
          self.cursorState.lastCursorId = self.cursorState.cursorId;
          // If we have a firstBatch set it
          if(Array.isArray(result.documents[0].cursor.firstBatch)) {
            self.cursorState.documents = result.documents[0].cursor.firstBatch;//.reverse();
          }

          // Return after processing command cursor
          return callback(null, null);
      }

      if(Array.isArray(result.documents[0].result)) {
        self.cursorState.documents = result.documents[0].result;
        self.cursorState.cursorId = Long.ZERO;
        return callback(null, null);
      }
    }

    // Otherwise fall back to regular find path
    self.cursorState.cursorId = result.cursorId;
    self.cursorState.documents = result.documents;
    self.cursorState.lastCursorId = result.cursorId;

    // Transform the results with passed in transformation method if provided
    if(self.cursorState.transforms &#x26;&#x26; typeof self.cursorState.transforms.query == &#x27;function&#x27;) {
      self.cursorState.documents = self.cursorState.transforms.query(result);
    }

    // Return callback
    callback(null, null);
  }

  // Options passed to the pool
  var queryOptions = {};

  // If we have a raw query decorate the function
  if(self.options.raw || self.cmd.raw) {
    // queryCallback.raw = self.options.raw || self.cmd.raw;
    queryOptions.raw = self.options.raw || self.cmd.raw;
  }

  // Do we have documentsReturnedIn set on the query
  if(typeof self.query.documentsReturnedIn == &#x27;string&#x27;) {
    // queryCallback.documentsReturnedIn = self.query.documentsReturnedIn;
    queryOptions.documentsReturnedIn = self.query.documentsReturnedIn;
  }

  // Add promote Long value if defined
  if(typeof self.cursorState.promoteLongs == &#x27;boolean&#x27;) {
    queryOptions.promoteLongs = self.cursorState.promoteLongs;
  }

  // Add promote values if defined
  if(typeof self.cursorState.promoteValues == &#x27;boolean&#x27;) {
    queryOptions.promoteValues = self.cursorState.promoteValues;
  }

  // Add promote values if defined
  if(typeof self.cursorState.promoteBuffers == &#x27;boolean&#x27;) {
    queryOptions.promoteBuffers = self.cursorState.promoteBuffers;
  }
  // Write the initial command out
  self.server.s.pool.write(self.query, queryOptions, queryCallback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // execute the query against the db
    if(isConnectionDead(self, callback)) return;

    // Check if topology is destroyed
    if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor
&#x27;));

    // query, cmd, options, cursorState, callback
    self.<span class="apidocCodeKeywordSpan">_find</span>(function(err) {
if(err) return handleCallback(callback, err, null);

if(self.cursorState.documents.length == 0
  &#x26;&#x26; self.cursorState.cursorId &#x26;&#x26; self.cursorState.cursorId.isZero()
  &#x26;&#x26; !self.cmd.tailable &#x26;&#x26; !self.cmd.awaitData) {
  return setCursorNotified(self, callback);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype._getmore" id="apidoc.element.mongodb-core.Cursor.prototype._getmore">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>_getmore
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getmore = function (callback) {
  if(this.logger.isDebug()) this.logger.debug(f(&#x27;schedule getMore call for query [%s]&#x27;, JSON.stringify(this.query)))
  // Determine if it&#x27;s a raw query
  var raw = this.options.raw || this.cmd.raw;

  // Set the current batchSize
  var batchSize = this.cursorState.batchSize;
  if(this.cursorState.limit &#x3e; 0
    &#x26;&#x26; ((this.cursorState.currentLimit + batchSize) &#x3e; this.cursorState.limit)) {
    batchSize = this.cursorState.limit - this.cursorState.currentLimit;
  }

  // Default pool
  var pool = this.server.s.pool;

  // We have a wire protocol handler
  this.server.wireProtocolHandler.getMore(this.bson, this.ns, this.cursorState, batchSize, raw, pool, this.options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor
&#x27;));

      // Check if connection is dead and return if not possible to
      // execute a getmore on this connection
      if(isConnectionDead(self, callback)) return;

      // Execute the next get more
      self.<span class="apidocCodeKeywordSpan">_getmore</span>(function(err, doc, connection) {
if(err) return handleCallback(callback, err);

// Save the returned connection to ensure all getMore&#x27;s fire over the same connection
self.connection = connection;

// Tailable cursor getMore result, notify owner about it
// No attempt is made here to retry, this is left to the user of the
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype._killcursor" id="apidoc.element.mongodb-core.Cursor.prototype._killcursor">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>_killcursor
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_killcursor = function (callback) {
  // Set cursor to dead
  this.cursorState.dead = true;
  this.cursorState.killed = true;
  // Remove documents
  this.cursorState.documents = [];

  // If no cursor id just return
  if(this.cursorState.cursorId == null || this.cursorState.cursorId.isZero() || this.cursorState.init == false) {
    if(callback) callback(null, null);
    return;
  }

  // Default pool
  var pool = this.server.s.pool;
  // Execute command
  this.server.wireProtocolHandler.killCursor(this.bson, this.ns, this.cursorState.cursorId, pool, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Kill the cursor
* @method
* @param {resultCallback} callback A callback function
*/
Cursor.prototype.kill = function(callback) {
 this.<span class="apidocCodeKeywordSpan">_killcursor</span>(callback);
}

/**
* Resets the cursor
* @method
* @return {null}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.bufferedCount" id="apidoc.element.mongodb-core.Cursor.prototype.bufferedCount">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>bufferedCount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bufferedCount = function () {
  return this.cursorState.documents.length - this.cursorState.cursorIndex;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.clone" id="apidoc.element.mongodb-core.Cursor.prototype.clone">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>clone
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function () {
  return this.topology.cursor(this.ns, this.cmd, this.options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.cursorBatchSize" id="apidoc.element.mongodb-core.Cursor.prototype.cursorBatchSize">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>cursorBatchSize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cursorBatchSize = function () {
  return this.cursorState.batchSize;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.cursorLimit" id="apidoc.element.mongodb-core.Cursor.prototype.cursorLimit">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>cursorLimit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cursorLimit = function () {
  return this.cursorState.limit;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.cursorSkip" id="apidoc.element.mongodb-core.Cursor.prototype.cursorSkip">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>cursorSkip
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cursorSkip = function () {
  return this.cursorState.skip;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.isDead" id="apidoc.element.mongodb-core.Cursor.prototype.isDead">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>isDead
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDead = function () {
  return this.cursorState.dead == true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.isKilled" id="apidoc.element.mongodb-core.Cursor.prototype.isKilled">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>isKilled
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isKilled = function () {
  return this.cursorState.killed == true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.isNotified" id="apidoc.element.mongodb-core.Cursor.prototype.isNotified">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>isNotified
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isNotified = function () {
  return this.cursorState.notified == true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.kill" id="apidoc.element.mongodb-core.Cursor.prototype.kill">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>kill
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">kill = function (callback) {
  this._killcursor(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
}

// Ensure we do not return any more documents than the limit imposed
// Just return the number of elements up to the limit
if(this.cursorState.limit &#x3e; 0 &#x26;&#x26; (this.cursorState.currentLimit + elements.length) &#x3e; this.cursorState.limit) {
  elements = elements.slice(0, (this.cursorState.limit - this.cursorState.currentLimit));
  this.<span class="apidocCodeKeywordSpan">kill</span>();
}

// Adjust current limit
this.cursorState.currentLimit = this.cursorState.currentLimit + elements.length;
this.cursorState.cursorIndex = this.cursorState.cursorIndex + elements.length;

// Return elements
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.next" id="apidoc.element.mongodb-core.Cursor.prototype.next">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>next
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">next = function (callback) {
  nextFunction(this, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     // Execute the write
//     var cursor = _server.cursor(&#x27;test.test&#x27;, {
//         find: &#x27;test.test&#x27;
//       , query: {a:1}
//     }, {readPreference: new ReadPreference(&#x27;secondary&#x27;)});
//
//     // Get the first document
//     cursor.<span class="apidocCodeKeywordSpan">next</span>(function(err, doc) {
//       count = count - 1;
//       if(err) console.dir(err)
//       if(count == 0) return cb();
//     });
//   }
// }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.readBufferedDocuments" id="apidoc.element.mongodb-core.Cursor.prototype.readBufferedDocuments">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>readBufferedDocuments
        <span class="apidocSignatureSpan">(number)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readBufferedDocuments = function (number) {
  var unreadDocumentsLength = this.cursorState.documents.length - this.cursorState.cursorIndex;
  var length = number &#x3c; unreadDocumentsLength ? number : unreadDocumentsLength;
  var elements = this.cursorState.documents.slice(this.cursorState.cursorIndex, this.cursorState.cursorIndex + length);

  // Transform the doc with passed in transformation method if provided
  if(this.cursorState.transforms &#x26;&#x26; typeof this.cursorState.transforms.doc == &#x27;function&#x27;) {
    // Transform all the elements
    for(var i = 0; i &#x3c; elements.length; i++) {
      elements[i] = this.cursorState.transforms.doc(elements[i]);
    }
  }

  // Ensure we do not return any more documents than the limit imposed
  // Just return the number of elements up to the limit
  if(this.cursorState.limit &#x3e; 0 &#x26;&#x26; (this.cursorState.currentLimit + elements.length) &#x3e; this.cursorState.limit) {
    elements = elements.slice(0, (this.cursorState.limit - this.cursorState.currentLimit));
    this.kill();
  }

  // Adjust current limit
  this.cursorState.currentLimit = this.cursorState.currentLimit + elements.length;
  this.cursorState.cursorIndex = this.cursorState.cursorIndex + elements.length;

  // Return elements
  return elements;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.rewind" id="apidoc.element.mongodb-core.Cursor.prototype.rewind">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>rewind
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rewind = function () {
  if(this.cursorState.init) {
    if(!this.cursorState.dead) {
      this.kill();
    }

    this.cursorState.currentLimit = 0;
    this.cursorState.init = false;
    this.cursorState.dead = false;
    this.cursorState.killed = false;
    this.cursorState.notified = false;
    this.cursorState.documents = [];
    this.cursorState.cursorId = null;
    this.cursorState.cursorIndex = 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.setCursorBatchSize" id="apidoc.element.mongodb-core.Cursor.prototype.setCursorBatchSize">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>setCursorBatchSize
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setCursorBatchSize = function (value) {
  this.cursorState.batchSize = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.setCursorLimit" id="apidoc.element.mongodb-core.Cursor.prototype.setCursorLimit">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>setCursorLimit
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setCursorLimit = function (value) {
  this.cursorState.limit = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Cursor.prototype.setCursorSkip" id="apidoc.element.mongodb-core.Cursor.prototype.setCursorSkip">
        function <span class="apidocSignatureSpan">mongodb-core.Cursor.prototype.</span>setCursorSkip
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setCursorSkip = function (value) {
  this.cursorState.skip = value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.GSSAPI" id="apidoc.module.mongodb-core.GSSAPI">module mongodb-core.GSSAPI</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.GSSAPI.GSSAPI" id="apidoc.element.mongodb-core.GSSAPI.GSSAPI">
        function <span class="apidocSignatureSpan">mongodb-core.</span>GSSAPI
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">GSSAPI = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.GSSAPI.prototype" id="apidoc.module.mongodb-core.GSSAPI.prototype">module mongodb-core.GSSAPI.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.GSSAPI.prototype.auth" id="apidoc.element.mongodb-core.GSSAPI.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.GSSAPI.prototype.</span>auth
        <span class="apidocSignatureSpan">(server, connections, db, username, password, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (server, connections, db, username, password, options, callback) {
  var self = this;
  // We don&#x27;t have the Kerberos library
  if(Kerberos == null) return callback(new Error(&#x22;Kerberos library is not installed&#x22;));
  var gssapiServiceName = options[&#x27;gssapiServiceName&#x27;] || &#x27;mongodb&#x27;;
  // Total connections
  var count = connections.length;
  if(count == 0) return callback(null, null);

  // Valid connections
  var numberOfValidConnections = 0;
  var errorObject = null;

  // For each connection we need to authenticate
  while(connections.length &#x3e; 0) {
    // Execute MongoCR
    var execute = function(connection) {
      // Start Auth process for a connection
      GSSAPIInitialize(self, db, username, password, db, gssapiServiceName, server, connection, options, function(err, r) {
        // Adjust count
        count = count - 1;

        // If we have an error
        if(err) {
          errorObject = err;
        } else if(r.result[&#x27;$err&#x27;]) {
          errorObject = r.result;
        } else if(r.result[&#x27;errmsg&#x27;]) {
          errorObject = r.result;
        } else {
          numberOfValidConnections = numberOfValidConnections + 1;
        }

        // We have authenticated all connections
        if(count == 0 &#x26;&#x26; numberOfValidConnections &#x3e; 0) {
          // Store the auth details
          addAuthSession(self.authStore, new AuthSession(db, username, password, options));
          // Return correct authentication
          callback(null, true);
        } else if(count == 0) {
          if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using mongocr&#x22;));
          callback(errorObject, false);
        }
      });
    }

    var _execute = function(_connection) {
      process.nextTick(function() {
        execute(_connection);
      });
    }

    _execute(connections.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.GSSAPI.prototype.logout" id="apidoc.element.mongodb-core.GSSAPI.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.GSSAPI.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName) {
  this.authStore = this.authStore.filter(function(x) {
    return x.db != dbName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.GSSAPI.prototype.reauthenticate" id="apidoc.element.mongodb-core.GSSAPI.prototype.reauthenticate">
        function <span class="apidocSignatureSpan">mongodb-core.GSSAPI.prototype.</span>reauthenticate
        <span class="apidocSignatureSpan">(server, connections, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reauthenticate = function (server, connections, callback) {
  var authStore = this.authStore.slice(0);
  var count = authStore.length;
  if(count == 0) return callback(null, null);
  // Iterate over all the auth details stored
  for(var i = 0; i &#x3c; authStore.length; i++) {
    this.auth(server, connections, authStore[i].db, authStore[i].username, authStore[i].password, authStore[i].options, function
(err) {
      count = count - 1;
      // Done re-authenticating
      if(count == 0) {
        callback(err, null);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function authenticateAgainstProvider(pool, connection, providers, cb) {
  // Finished re-authenticating against providers
  if(providers.length == 0) return cb();
  // Get the provider name
  var provider = pool.authProviders[providers.pop()];

  // Auth provider
  provider.<span class="apidocCodeKeywordSpan">reauthenticate</span>(write(pool), [connection], function(err) {
    // We got an error return immediately
    if(err) return cb(err);
    // Continue authenticating the connection
    authenticateAgainstProvider(pool, connection, providers, cb);
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Logger" id="apidoc.module.mongodb-core.Logger">module mongodb-core.Logger</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.Logger" id="apidoc.element.mongodb-core.Logger.Logger">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Logger
        <span class="apidocSignatureSpan">(className, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Logger = function (className, options) {
  if(!(this instanceof Logger)) return new Logger(className, options);
  options = options || {};

  // Current reference
  this.className = className;

  // Current logger
  if(options.logger) {
    currentLogger = options.logger;
  } else if(currentLogger == null) {
    currentLogger = console.log;
  }

  // Set level of logging, default is error
  if(options.loggerLevel) {
    level = options.loggerLevel || &#x27;error&#x27;;
  }

  // Add all class names
  if(filteredClasses[this.className] == null) classFilters[this.className] =  true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.currentLogger" id="apidoc.element.mongodb-core.Logger.currentLogger">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>currentLogger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">currentLogger = function () {
  return currentLogger;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.filter" id="apidoc.element.mongodb-core.Logger.filter">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>filter
        <span class="apidocSignatureSpan">(type, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function (type, values) {
  if(type == &#x27;class&#x27; &#x26;&#x26; Array.isArray(values)) {
    filteredClasses = {};

    values.forEach(function(x) {
      filteredClasses[x] = true;
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Remove authStore credentials
* @method
* @param {string} db Name of database we are removing authStore details about
* @return {object}
*/
GSSAPI.prototype.logout = function(dbName) {
 this.authStore = this.authStore.<span class="apidocCodeKeywordSpan">filter</span>(function(x) {
   return x.db != dbName;
 });
}

/**
* Re authenticate pool
* @method
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.reset" id="apidoc.element.mongodb-core.Logger.reset">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>reset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reset = function () {
  level = &#x27;error&#x27;;
  filteredClasses = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.setCurrentLogger" id="apidoc.element.mongodb-core.Logger.setCurrentLogger">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>setCurrentLogger
        <span class="apidocSignatureSpan">(logger)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setCurrentLogger = function (logger) {
  if(typeof logger != &#x27;function&#x27;) throw new MongoError(&#x22;current logger must be a function&#x22;);
  currentLogger = logger;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.setLevel" id="apidoc.element.mongodb-core.Logger.setLevel">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.</span>setLevel
        <span class="apidocSignatureSpan">(_level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLevel = function (_level) {
  if(_level != &#x27;info&#x27; &#x26;&#x26; _level != &#x27;error&#x27; &#x26;&#x26; _level != &#x27;debug&#x27; &#x26;&#x26; _level != &#x27;warn&#x27;) {
    throw new Error(f(&#x22;%s is an illegal logging level&#x22;, _level));
  }

  level = _level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Logger.prototype" id="apidoc.module.mongodb-core.Logger.prototype">module mongodb-core.Logger.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.debug" id="apidoc.element.mongodb-core.Logger.prototype.debug">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>debug
        <span class="apidocSignatureSpan">(message, object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (message, object) {
  if(this.isDebug()
    &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
      || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
    var dateTime = new Date().getTime();
    var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;DEBUG&#x27;, this.className, pid, dateTime, message);
    var state = {
      type: &#x27;debug&#x27;, message: message, className: this.className, pid: pid, date: dateTime
    };
    if(object) state.meta = object;
    currentLogger(msg, state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// Internal methods
Cursor.prototype._find = function(callback) {
var self = this;

if(self.logger.isDebug()) {
  self.logger.<span class="apidocCodeKeywordSpan">debug</span>(f(&#x27;issue initial query [%s] with flags [%s]&#x27;
    , JSON.stringify(self.cmd)
    , JSON.stringify(self.query)));
}

var queryCallback = function(err, r) {
  if(err) return callback(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.error" id="apidoc.element.mongodb-core.Logger.prototype.error">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>error
        <span class="apidocSignatureSpan">(message, object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (message, object) {
  if(this.isError()
    &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
      || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
    var dateTime = new Date().getTime();
    var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;ERROR&#x27;, this.className, pid, dateTime, message);
    var state = {
      type: &#x27;error&#x27;, message: message, className: this.className, pid: pid, date: dateTime
    };
    if(object) state.meta = object;
    currentLogger(msg, state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  connectionTimeout: 10000,
});

replSet.on(&#x27;connect&#x27;, function(_server) {
  setInterval(function() {
    _server.command(&#x27;system.$cmd&#x27;, { ping: 1 }, function(err, result) {
      if (err) {
        console.<span class="apidocCodeKeywordSpan">error</span>(err);
      } else {
        console.log(result.result);
      }
    });
  }, 1000);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.info" id="apidoc.element.mongodb-core.Logger.prototype.info">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>info
        <span class="apidocSignatureSpan">(message, object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (message, object) {
  if(this.isInfo()
    &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
      || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
    var dateTime = new Date().getTime();
    var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;INFO&#x27;, this.className, pid, dateTime, message);
    var state = {
      type: &#x27;info&#x27;, message: message, className: this.className, pid: pid, date: dateTime
    };
    if(object) state.meta = object;
    currentLogger(msg, state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

var eventHandler = function(self, event) {
  return function(err) {
// Log information of received information if in info mode
if(self.s.logger.isInfo()) {
  var object = err instanceof MongoError ? JSON.stringify(err) : {}
  self.s.logger.<span class="apidocCodeKeywordSpan">info</span>(f(&#x27;server %s fired event %s out with message %s&#x27;
    , self.name, event, object));
}

// Handle connect event
if(event == &#x27;connect&#x27;) {
  // Issue an ismaster command at connect
  // Query options
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.isDebug" id="apidoc.element.mongodb-core.Logger.prototype.isDebug">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isDebug
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDebug = function () {
  return level == &#x27;debug&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
}

// Internal methods
Cursor.prototype._find = function(callback) {
var self = this;

if(self.logger.<span class="apidocCodeKeywordSpan">isDebug</span>()) {
  self.logger.debug(f(&#x27;issue initial query [%s] with flags [%s]&#x27;
    , JSON.stringify(self.cmd)
    , JSON.stringify(self.query)));
}

var queryCallback = function(err, r) {
  if(err) return callback(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.isError" id="apidoc.element.mongodb-core.Logger.prototype.isError">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isError = function () {
  return level == &#x27;error&#x27; || level == &#x27;info&#x27; || level == &#x27;debug&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Log a message at the error level
 * @method
 * @param {string} message The message to log
 * @param {object} object additional meta data to log
 * @return {null}
 */
Logger.prototype.error = function(message, object) {
if(this.<span class="apidocCodeKeywordSpan">isError</span>()
  &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
    || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
  var dateTime = new Date().getTime();
  var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;ERROR&#x27;, this.className, pid, dateTime, message);
  var state = {
    type: &#x27;error&#x27;, message: message, className: this.className, pid: pid, date: dateTime
  };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.isInfo" id="apidoc.element.mongodb-core.Logger.prototype.isInfo">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isInfo
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isInfo = function () {
  return level == &#x27;info&#x27; || level == &#x27;debug&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Log a message at the info level
 * @method
 * @param {string} message The message to log
 * @param {object} object additional meta data to log
 * @return {null}
 */
Logger.prototype.info = function(message, object) {
if(this.<span class="apidocCodeKeywordSpan">isInfo</span>()
  &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
    || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
  var dateTime = new Date().getTime();
  var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;INFO&#x27;, this.className, pid, dateTime, message);
  var state = {
    type: &#x27;info&#x27;, message: message, className: this.className, pid: pid, date: dateTime
  };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.isWarn" id="apidoc.element.mongodb-core.Logger.prototype.isWarn">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>isWarn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isWarn = function () {
  return level == &#x27;error&#x27; || level == &#x27;warn&#x27; || level == &#x27;info&#x27; || level == &#x27;debug&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Log a message at the warn level
 * @method
 * @param {string} message The message to log
 * @param {object} object additional meta data to log
 * @return {null}
 */
Logger.prototype.warn = function(message, object) {
if(this.<span class="apidocCodeKeywordSpan">isWarn</span>()
  &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
    || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
  var dateTime = new Date().getTime();
  var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;WARN&#x27;, this.className, pid, dateTime, message);
  var state = {
    type: &#x27;warn&#x27;, message: message, className: this.className, pid: pid, date: dateTime
  };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Logger.prototype.warn" id="apidoc.element.mongodb-core.Logger.prototype.warn">
        function <span class="apidocSignatureSpan">mongodb-core.Logger.prototype.</span>warn
        <span class="apidocSignatureSpan">(message, object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (message, object) {
  if(this.isWarn()
    &#x26;&#x26; ((Object.keys(filteredClasses).length &#x3e; 0 &#x26;&#x26; filteredClasses[this.className])
      || (Object.keys(filteredClasses).length == 0 &#x26;&#x26; classFilters[this.className]))) {
    var dateTime = new Date().getTime();
    var msg = f(&#x22;[%s-%s:%s] %s %s&#x22;, &#x27;WARN&#x27;, this.className, pid, dateTime, message);
    var state = {
      type: &#x27;warn&#x27;, message: message, className: this.className, pid: pid, date: dateTime
    };
    if(object) state.meta = object;
    currentLogger(msg, state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.s.options.clientInfo = createClientInfo(options);

// Log info warning if the socketTimeout &#x3c; haInterval as it will cause
// a lot of recycled connections to happen.
if(this.s.logger.isWarn()
  &#x26;&#x26; this.s.options.socketTimeout != 0
  &#x26;&#x26; this.s.options.socketTimeout &#x3c; this.s.haInterval) {
    this.s.logger.<span class="apidocCodeKeywordSpan">warn</span>(f(&#x27;warning socketTimeout %s is less than haInterval %s. This
 might cause unnecessary server reconnections due to socket timeouts&#x27;
      , this.s.options.socketTimeout, this.s.haInterval));
}

// All the authProviders
this.authProviders = options.authProviders || {
    &#x27;mongocr&#x27;: new MongoCR(this.s.bson), &#x27;x509&#x27;: new X509(this.s.bson)
  , &#x27;plain&#x27;: new Plain(this.s.bson), &#x27;gssapi&#x27;: new GSSAPI(this.s.bson)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.MongoCR" id="apidoc.module.mongodb-core.MongoCR">module mongodb-core.MongoCR</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.MongoCR.MongoCR" id="apidoc.element.mongodb-core.MongoCR.MongoCR">
        function <span class="apidocSignatureSpan">mongodb-core.</span>MongoCR
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">MongoCR = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.MongoCR.prototype" id="apidoc.module.mongodb-core.MongoCR.prototype">module mongodb-core.MongoCR.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.MongoCR.prototype.auth" id="apidoc.element.mongodb-core.MongoCR.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.MongoCR.prototype.</span>auth
        <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (server, connections, db, username, password, callback) {
  var self = this;
  // Total connections
  var count = connections.length;
  if(count == 0) return callback(null, null);

  // Valid connections
  var numberOfValidConnections = 0;
  var errorObject = null;

  // For each connection we need to authenticate
  while(connections.length &#x3e; 0) {
    // Execute MongoCR
    var executeMongoCR = function(connection) {
      // Write the commmand on the connection
      server(connection, new Query(self.bson, f(&#x22;%s.$cmd&#x22;, db), {
        getnonce:1
      }, {
        numberToSkip: 0, numberToReturn: 1
      }), function(err, r) {
        var nonce = null;
        var key = null;

        // Adjust the number of connections left
        // Get nonce
        if(err == null) {
          nonce = r.result.nonce;
          // Use node md5 generator
          var md5 = crypto.createHash(&#x27;md5&#x27;);
          // Generate keys used for authentication
          md5.update(username + &#x22;:mongo:&#x22; + password, &#x27;utf8&#x27;);
          var hash_password = md5.digest(&#x27;hex&#x27;);
          // Final key
          md5 = crypto.createHash(&#x27;md5&#x27;);
          md5.update(nonce + username + hash_password, &#x27;utf8&#x27;);
          key = md5.digest(&#x27;hex&#x27;);
        }

        // Execute command
        // Write the commmand on the connection
        server(connection, new Query(self.bson, f(&#x22;%s.$cmd&#x22;, db), {
          authenticate: 1, user: username, nonce: nonce, key:key
        }, {
          numberToSkip: 0, numberToReturn: 1
        }), function(err, r) {
          count = count - 1;

          // If we have an error
          if(err) {
            errorObject = err;
          } else if(r.result[&#x27;$err&#x27;]) {
            errorObject = r.result;
          } else if(r.result[&#x27;errmsg&#x27;]) {
            errorObject = r.result;
          } else {
            numberOfValidConnections = numberOfValidConnections + 1;
          }

          // We have authenticated all connections
          if(count == 0 &#x26;&#x26; numberOfValidConnections &#x3e; 0) {
            // Store the auth details
            addAuthSession(self.authStore, new AuthSession(db, username, password));
            // Return correct authentication
            callback(null, true);
          } else if(count == 0) {
            if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using mongocr&#x22;));
            callback(errorObject, false);
          }
        });
      });
    }

    var _execute = function(_connection) {
      process.nextTick(function() {
        executeMongoCR(_connection);
      });
    }

    _execute(connections.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.MongoCR.prototype.logout" id="apidoc.element.mongodb-core.MongoCR.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.MongoCR.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName) {
  this.authStore = this.authStore.filter(function(x) {
    return x.db != dbName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.MongoCR.prototype.reauthenticate" id="apidoc.element.mongodb-core.MongoCR.prototype.reauthenticate">
        function <span class="apidocSignatureSpan">mongodb-core.MongoCR.prototype.</span>reauthenticate
        <span class="apidocSignatureSpan">(server, connections, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reauthenticate = function (server, connections, callback) {
  var authStore = this.authStore.slice(0);
  var count = authStore.length;
  if(count == 0) return callback(null, null);
  // Iterate over all the auth details stored
  for(var i = 0; i &#x3c; authStore.length; i++) {
    this.auth(server, connections, authStore[i].db, authStore[i].username, authStore[i].password, function(err) {
      count = count - 1;
      // Done re-authenticating
      if(count == 0) {
        callback(err, null);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function authenticateAgainstProvider(pool, connection, providers, cb) {
  // Finished re-authenticating against providers
  if(providers.length == 0) return cb();
  // Get the provider name
  var provider = pool.authProviders[providers.pop()];

  // Auth provider
  provider.<span class="apidocCodeKeywordSpan">reauthenticate</span>(write(pool), [connection], function(err) {
    // We got an error return immediately
    if(err) return cb(err);
    // Continue authenticating the connection
    authenticateAgainstProvider(pool, connection, providers, cb);
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.MongoError" id="apidoc.module.mongodb-core.MongoError">module mongodb-core.MongoError</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.MongoError.MongoError" id="apidoc.element.mongodb-core.MongoError.MongoError">
        function <span class="apidocSignatureSpan">mongodb-core.</span>MongoError
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MongoError(message) {
  this.name = &#x27;MongoError&#x27;;
  this.message = message;
  Error.captureStackTrace(this, MongoError);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.MongoError.create" id="apidoc.element.mongodb-core.MongoError.create">
        function <span class="apidocSignatureSpan">mongodb-core.MongoError.</span>create
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (options) {
  var err = null;

  if(options instanceof Error) {
    err = new MongoError(options.message);
    err.stack = options.stack;
  } else if(typeof options == &#x27;string&#x27;) {
    err = new MongoError(options);
  } else {
    err = new MongoError(options.message || options.errmsg || options.$err || &#x22;n/a&#x22;);
    // Other options
    for(var name in options) {
      err[name] = options[name];
    }
  }

  return err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if(err) return callback(err);

// Get the raw message
var result = r.message;

// Query failure bit set
if(result.queryFailure) {
  return callback(MongoError.<span class="apidocCodeKeywordSpan">create</span>(result.documents[0]), null);
}

// Check if we have a command cursor
if(Array.isArray(result.documents) &#x26;&#x26; result.documents.length == 1
  &#x26;&#x26; (!self.cmd.find || (self.cmd.find &#x26;&#x26; self.cmd.virtual == false))
  &#x26;&#x26; (result.documents[0].cursor != &#x27;string&#x27;
    || result.documents[0][&#x27;$err&#x27;]
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Mongos" id="apidoc.module.mongodb-core.Mongos">module mongodb-core.Mongos</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.Mongos" id="apidoc.element.mongodb-core.Mongos.Mongos">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Mongos
        <span class="apidocSignatureSpan">(seedlist, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Mongos = function (seedlist, options) {
  options = options || {};

  // Get replSet Id
  this.id = id++;

  // Internal state
  this.s = {
    options: assign({}, options),
    // BSON instance
    bson: options.bson || new BSON([BSON.Binary, BSON.Code, BSON.DBRef, BSON.Decimal128,
      BSON.Double, BSON.Int32, BSON.Long, BSON.Map, BSON.MaxKey, BSON.MinKey,
      BSON.ObjectId, BSON.BSONRegExp, BSON.Symbol, BSON.Timestamp]),
    // Factory overrides
    Cursor: options.cursorFactory || BasicCursor,
    // Logger instance
    logger: Logger(&#x27;Mongos&#x27;, options),
    // Seedlist
    seedlist: seedlist,
    // Ha interval
    haInterval: options.haInterval ? options.haInterval : 10000,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Server selection index
    index: 0,
    // Connect function options passed in
    connectOptions: {},
    // Are we running in debug mode
    debug: typeof options.debug == &#x27;boolean&#x27; ? options.debug : false,
    // localThresholdMS
    localThresholdMS: options.localThresholdMS || 15,
    // Client info
    clientInfo: createClientInfo(options),
    // Authentication context
    authenticationContexts: [],
  }

  // Set the client info
  this.s.options.clientInfo = createClientInfo(options);

  // Log info warning if the socketTimeout &#x3c; haInterval as it will cause
  // a lot of recycled connections to happen.
  if(this.s.logger.isWarn()
    &#x26;&#x26; this.s.options.socketTimeout != 0
    &#x26;&#x26; this.s.options.socketTimeout &#x3c; this.s.haInterval) {
      this.s.logger.warn(f(&#x27;warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections
 due to socket timeouts&#x27;
        , this.s.options.socketTimeout, this.s.haInterval));
  }

  // All the authProviders
  this.authProviders = options.authProviders || {
      &#x27;mongocr&#x27;: new MongoCR(this.s.bson), &#x27;x509&#x27;: new X509(this.s.bson)
    , &#x27;plain&#x27;: new Plain(this.s.bson), &#x27;gssapi&#x27;: new GSSAPI(this.s.bson)
    , &#x27;sspi&#x27;: new SSPI(this.s.bson), &#x27;scram-sha-1&#x27;: new ScramSHA1(this.s.bson)
  }

  // Disconnected state
  this.state = DISCONNECTED;

  // Current proxies we are connecting to
  this.connectingProxies = [];
  // Currently connected proxies
  this.connectedProxies = [];
  // Disconnected proxies
  this.disconnectedProxies = [];
  // Are we authenticating
  this.authenticating = false;
  // Index of proxy to run operations against
  this.index = 0;
  // High availability timeout id
  this.haTimeoutId = null;
  // Last ismaster
  this.ismaster = null;

  // Add event listener
  EventEmitter.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.super_" id="apidoc.element.mongodb-core.Mongos.super_">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Mongos.prototype" id="apidoc.module.mongodb-core.Mongos.prototype">module mongodb-core.Mongos.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.auth" id="apidoc.element.mongodb-core.Mongos.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>auth
        <span class="apidocSignatureSpan">(mechanism, db)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (mechanism, db) {
  var allArgs = Array.prototype.slice.call(arguments, 0).slice(0);
  var self = this;
  var args = Array.prototype.slice.call(arguments, 2);
  var callback = args.pop();
  var currentContextIndex = 0;

  // If we don&#x27;t have the mechanism fail
  if(this.authProviders[mechanism] == null &#x26;&#x26; mechanism != &#x27;default&#x27;) {
    return callback(new MongoError(f(&#x22;auth provider %s does not exist&#x22;, mechanism)));
  }

  // Are we already authenticating, throw
  if(this.authenticating) {
    return callback(new MongoError(&#x27;authentication or logout allready in process&#x27;));
  }

  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(!self.isConnected() &#x26;&#x26; self.s.disconnectHandler != null) {
    return self.s.disconnectHandler.add(&#x27;auth&#x27;, db, allArgs, {}, callback);
  }

  // Set to authenticating
  this.authenticating = true;
  // All errors
  var errors = [];

  // Get all the servers
  var servers = this.connectedProxies.slice(0);
  // No servers return
  if(servers.length == 0) {
    this.authenticating = false;
    callback(null, true);
  }

  // Authenticate
  function auth(server) {
    // Arguments without a callback
    var argsWithoutCallback = [mechanism, db].concat(args.slice(0));
    // Create arguments
    var finalArguments = argsWithoutCallback.concat([function(err) {
      count = count - 1;
      // Save all the errors
      if(err) errors.push({name: server.name, err: err});
      // We are done
      if(count == 0) {
        // Auth is done
        self.authenticating = false;

        // Return the auth error
        if(errors.length) {
          // Remove the entry from the stored authentication contexts
          self.s.authenticationContexts.splice(currentContextIndex, 0);
          // Return error
          return callback(MongoError.create({
            message: &#x27;authentication fail&#x27;, errors: errors
          }), false);
        }

        // Successfully authenticated session
        callback(null, self);
      }
    }]);

    // Execute the auth only against non arbiter servers
    if(!server.lastIsMaster().arbiterOnly) {
      server.auth.apply(server, finalArguments);
    }
  }

  // Save current context index
  currentContextIndex = this.s.authenticationContexts.length;
  // Store the auth context and return the last index
  this.s.authenticationContexts.push([mechanism, db].concat(args.slice(0)));

  // Get total count
  var count = servers.length;
  // Authenticate against all servers
  while(servers.length &#x3e; 0) {
    auth(servers.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.command" id="apidoc.element.mongodb-core.Mongos.prototype.command">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>command
        <span class="apidocSignatureSpan">(ns, cmd, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (ns, cmd, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));
  var self = this;

  // Pick a proxy
  var server = pickProxy(self);

  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if((server == null || !server.isConnected()) &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;command&#x27;, ns, cmd, options, callback);
  }

  // No server returned we had an error
  if(server == null) {
    return callback(new MongoError(&#x27;no mongos proxy available&#x27;));
  }

  // Cloned options
  var clonedOptions = cloneOptions(options);
  clonedOptions.topology = self;

  // Execute the command
  server.command(ns, cmd, clonedOptions, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Add event listeners
server.on(&#x27;connect&#x27;, function(_server) {
  console.log(&#x27;connected&#x27;);

  // Execute the ismaster command
  _server.<span class="apidocCodeKeywordSpan">command</span>(&#x27;system.$cmd&#x27;, {ismaster: true}, function(err, result) {

// Perform a document insert
_server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(2, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.connect" id="apidoc.element.mongodb-core.Mongos.prototype.connect">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>connect
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (options) {
  var self = this;
  // Add any connect level options to the internal state
  this.s.connectOptions = options || {};
  // Set connecting state
  stateTransition(this, CONNECTING);
  // Create server instances
  var servers = this.s.seedlist.map(function(x) {
    return new Server(assign({}, self.s.options, x, {
      authProviders: self.authProviders, reconnect:false, monitoring:false, inTopology: true
    }, {
      clientInfo: clone(self.s.clientInfo)
    }));
  });

  // Emit the topology opening event
  emitSDAMEvent(this, &#x27;topologyOpening&#x27;, { topologyId: this.id });

  // Start all server connections
  connectProxies(self, servers);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //       // _server.destroy();
  //       // test.done();
  //     });
  //   });
  // });
});

server.<span class="apidocCodeKeywordSpan">connect</span>();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.connections" id="apidoc.element.mongodb-core.Mongos.prototype.connections">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>connections
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connections = function () {
  var connections = [];

  for(var i = 0; i &#x3c; this.connectedProxies.length; i++) {
    connections = connections.concat(this.connectedProxies[i].connections());
  }

  return connections;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @method
* @return {Connection[]}
*/
Mongos.prototype.connections = function() {
 var connections = [];

 for(var i = 0; i &#x3c; this.connectedProxies.length; i++) {
   connections = connections.concat(this.connectedProxies[i].<span class="apidocCodeKeywordSpan">connections</span>());
 }

 return connections;
}

/**
* A mongos connect event, used to verify that the connection is up and running
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.cursor" id="apidoc.element.mongodb-core.Mongos.prototype.cursor">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>cursor
        <span class="apidocSignatureSpan">(ns, cmd, cursorOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cursor = function (ns, cmd, cursorOptions) {
  cursorOptions = cursorOptions || {};
  var FinalCursor = cursorOptions.cursorFactory || this.s.Cursor;
  return new FinalCursor(this.s.bson, ns, cmd, cursorOptions, this, this.s.options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// function executeCursors(_server, cb) {
//   var count = 100;
//
//   for(var i = 0; i &#x3c; 100; i++) {
//     // Execute the write
//     var cursor = _server.<span class="apidocCodeKeywordSpan">cursor</span>(&#x27;test.test&#x27;, {
//         find: &#x27;test.test&#x27;
//       , query: {a:1}
//     }, {readPreference: new ReadPreference(&#x27;secondary&#x27;)});
//
//     // Get the first document
//     cursor.next(function(err, doc) {
//       count = count - 1;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.destroy" id="apidoc.element.mongodb-core.Mongos.prototype.destroy">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>destroy
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (options) {
  // Transition state
  stateTransition(this, DESTROYED);
  // Get all proxies
  var proxies = this.connectedProxies.concat(this.connectingProxies);
  // Clear out any monitoring process
  if(this.haTimeoutId) clearTimeout(this.haTimeoutId);
  // Clear out authentication contexts
  this.s.authenticationContexts = [];

  // Destroy all connecting servers
  proxies.forEach(function(x) {
    x.destroy(options);
  });

  // Emit toplogy closing event
  emitSDAMEvent(this, &#x27;topologyClosed&#x27;, { topologyId: this.id });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//         console.log(&#x22;=========== joined :: &#x22; + _t + &#x22; :: &#x22; + _server.name)
//         executeCursors(_server, function() {
//         });
//       }
//     })
//
//     // var s = _server.s.replicaSetState.secondaries[0];
//     // s.<span class="apidocCodeKeywordSpan">destroy</span>({emitClose:true});
//     executeCursors(_server, function() {
//       console.log(&#x22;============== 0&#x22;)
//       // Attempt to force a server reconnect
//       var s = _server.s.replicaSetState.secondaries[0];
//       name = s.name;
//       s.destroy({emitClose:true});
//       // console.log(&#x22;============== 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.getConnection" id="apidoc.element.mongodb-core.Mongos.prototype.getConnection">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>getConnection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function () {
  var server = this.getServer();
  if(server) return server.getConnection();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Get a direct connection
* @method
* @return {Connection}
*/
Mongos.prototype.getConnection = function() {
 var server = this.getServer();
 if(server) return server.<span class="apidocCodeKeywordSpan">getConnection</span>();
}

/**
* All raw connections
* @method
* @return {Connection[]}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.getServer" id="apidoc.element.mongodb-core.Mongos.prototype.getServer">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>getServer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getServer = function () {
  var server = pickProxy(this);
  if(this.s.debug) this.emit(&#x27;pickedServer&#x27;, null, server);
  return server;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
  return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
}
return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
    }

    try {
self.server = self.topology.<span class="apidocCodeKeywordSpan">getServer</span>(self.options);
    } catch(err) {
// Handle the error and add object to next method call
if(self.disconnectHandler != null) {
  return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
}

// Otherwise return the error
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.insert" id="apidoc.element.mongodb-core.Mongos.prototype.insert">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>insert
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (ns, ops, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

  // Not connected but we have a disconnecthandler
  if(!this.isConnected() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;insert&#x27;, ns, ops, options, callback);
  }

  // No mongos proxy available
  if(!this.isConnected()) {
    return callback(new MongoError(&#x27;no mongos proxy available&#x27;));
  }

  // Execute write operation
  executeWriteOperation(this, &#x27;insert&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     });
//   }
// }

server.on(&#x27;connect&#x27;, function(_server) {
// console.log(&#x22;===== connect&#x22;)
setInterval(function() {
  _server.<span class="apidocCodeKeywordSpan">insert</span>(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.auth(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.isConnected" id="apidoc.element.mongodb-core.Mongos.prototype.isConnected">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>isConnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isConnected = function () {
  return this.connectedProxies.length &#x3e; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// We have a dead and killed cursor, attempting to call next should error
if(isCursorDeadAndKilled(self, callback)) return;

// We have just started the cursor
if(!self.cursorState.init) {
  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(!self.topology.<span class="apidocCodeKeywordSpan">isConnected</span>(self.options) &#x26;&#x26; self.disconnectHandler !=
null) {
    if (self.topology.isDestroyed()) {
      // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
      return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
    }
    return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.isDestroyed" id="apidoc.element.mongodb-core.Mongos.prototype.isDestroyed">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>isDestroyed
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDestroyed = function () {
  return this.state == DESTROYED;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * Validate if the pool is dead and return error
 */
var isConnectionDead = function(self, callback) {
if(self.pool
  &#x26;&#x26; self.pool.<span class="apidocCodeKeywordSpan">isDestroyed</span>()) {
  self.cursorState.notified = true;
  self.cursorState.killed = true;
  self.cursorState.documents = [];
  self.cursorState.cursorIndex = 0;
  callback(MongoError.create(f(&#x27;connection to host %s:%s was destroyed&#x27;, self.pool.host, self.pool.port)))
  return true;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.lastIsMaster" id="apidoc.element.mongodb-core.Mongos.prototype.lastIsMaster">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>lastIsMaster
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lastIsMaster = function () {
  return this.ismaster;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }

    // Check the type of server
    if(event == &#x27;connect&#x27;) {
      // Do we have authentication contexts that need to be applied
      applyAuthenticationContexts(self, _this, function() {
// Get last known ismaster
self.ismaster = _this.<span class="apidocCodeKeywordSpan">lastIsMaster</span>();

// Is this not a proxy, remove t
if(self.ismaster.msg == &#x27;isdbgrid&#x27;) {
  // Add to the connectd list
  for(var i = 0; i &#x3c; self.connectedProxies.length; i++) {
    if(self.connectedProxies[i].name == _this.name) {
      // Move from connectingProxies
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.logout" id="apidoc.element.mongodb-core.Mongos.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName, callback) {
  var self = this;
  // Are we authenticating or logging out, throw
  if(this.authenticating) {
    throw new MongoError(&#x27;authentication or logout allready in process&#x27;);
  }

  // Ensure no new members are processed while logging out
  this.authenticating = true;

  // Remove from all auth providers (avoid any reaplication of the auth details)
  var providers = Object.keys(this.authProviders);
  for(var i = 0; i &#x3c; providers.length; i++) {
    this.authProviders[providers[i]].logout(dbName);
  }

  // Now logout all the servers
  var servers = this.connectedProxies.slice(0);
  var count = servers.length;
  if(count == 0) return callback();
  var errors = [];

  function logoutServer(_server, cb) {
    _server.logout(dbName, function(err) {
      if(err) errors.push({name: _server.name, err: err});
      cb();
    });
  }

  // Execute logout on all server instances
  for(i = 0; i &#x3c; servers.length; i++) {
    logoutServer(servers[i], function() {
      count = count - 1;

      if(count == 0) {
        // Do not block new operations
        self.authenticating = false;
        // If we have one or more errors
        if(errors.length) return callback(MongoError.create({
          message: f(&#x27;logout failed against db %s&#x27;, dbName), errors: errors
        }), false);

        // No errors
        callback();
      }
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.remove" id="apidoc.element.mongodb-core.Mongos.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>remove
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (ns, ops, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

  // Not connected but we have a disconnecthandler
  if(!this.isConnected() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;remove&#x27;, ns, ops, options, callback);
  }

  // No mongos proxy available
  if(!this.isConnected()) {
    return callback(new MongoError(&#x27;no mongos proxy available&#x27;));
  }

  // Execute write operation
  executeWriteOperation(this, &#x27;remove&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.unref" id="apidoc.element.mongodb-core.Mongos.prototype.unref">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>unref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unref = function () {
  // Transition state
  stateTransition(this, UNREFERENCED);
  // Get all proxies
  var proxies = this.connectedProxies.concat(this.connectingProxies);
  proxies.forEach(function(x) {
    x.unref();
  });

  clearTimeout(this.haTimeoutId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Unref this connection
 * @method
 * @return {boolean}
 */
Connection.prototype.unref = function() {
  if (this.connection) this.connection.<span class="apidocCodeKeywordSpan">unref</span>();
  else {
    var self = this;
    this.once(&#x27;connect&#x27;, function() {
      self.connection.unref();
    });
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Mongos.prototype.update" id="apidoc.element.mongodb-core.Mongos.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.Mongos.prototype.</span>update
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (ns, ops, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

  // Not connected but we have a disconnecthandler
  if(!this.isConnected() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;update&#x27;, ns, ops, options, callback);
  }

  // No mongos proxy available
  if(!this.isConnected()) {
    return callback(new MongoError(&#x27;no mongos proxy available&#x27;));
  }

  // Execute write operation
  executeWriteOperation(this, &#x27;update&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Plain" id="apidoc.module.mongodb-core.Plain">module mongodb-core.Plain</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Plain.Plain" id="apidoc.element.mongodb-core.Plain.Plain">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Plain
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Plain = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Plain.prototype" id="apidoc.module.mongodb-core.Plain.prototype">module mongodb-core.Plain.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Plain.prototype.auth" id="apidoc.element.mongodb-core.Plain.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.Plain.prototype.</span>auth
        <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (server, connections, db, username, password, callback) {
  var self = this;
  // Total connections
  var count = connections.length;
  if(count == 0) return callback(null, null);

  // Valid connections
  var numberOfValidConnections = 0;
  var errorObject = null;

  // For each connection we need to authenticate
  while(connections.length &#x3e; 0) {
    // Execute MongoCR
    var execute = function(connection) {
      // Create payload
      var payload = new Binary(f(&#x22;\x00%s\x00%s&#x22;, username, password));

      // Let&#x27;s start the sasl process
      var command = {
          saslStart: 1
        , mechanism: &#x27;PLAIN&#x27;
        , payload: payload
        , autoAuthorize: 1
      };

      // Let&#x27;s start the process
      server(connection, new Query(self.bson, &#x22;$external.$cmd&#x22;, command, {
        numberToSkip: 0, numberToReturn: 1
      }), function(err, r) {
        // Adjust count
        count = count - 1;

        // If we have an error
        if(err) {
          errorObject = err;
        } else if(r.result[&#x27;$err&#x27;]) {
          errorObject = r.result;
        } else if(r.result[&#x27;errmsg&#x27;]) {
          errorObject = r.result;
        } else {
          numberOfValidConnections = numberOfValidConnections + 1;
        }

        // We have authenticated all connections
        if(count == 0 &#x26;&#x26; numberOfValidConnections &#x3e; 0) {
          // Store the auth details
          addAuthSession(self.authStore, new AuthSession(db, username, password));
          // Return correct authentication
          callback(null, true);
        } else if(count == 0) {
          if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using mongocr&#x22;));
          callback(errorObject, false);
        }
      });
    }

    var _execute = function(_connection) {
      process.nextTick(function() {
        execute(_connection);
      });
    }

    _execute(connections.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Plain.prototype.logout" id="apidoc.element.mongodb-core.Plain.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.Plain.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName) {
  this.authStore = this.authStore.filter(function(x) {
    return x.db != dbName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Plain.prototype.reauthenticate" id="apidoc.element.mongodb-core.Plain.prototype.reauthenticate">
        function <span class="apidocSignatureSpan">mongodb-core.Plain.prototype.</span>reauthenticate
        <span class="apidocSignatureSpan">(server, connections, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reauthenticate = function (server, connections, callback) {
  var authStore = this.authStore.slice(0);
  var count = authStore.length;
  if(count == 0) return callback(null, null);
  // Iterate over all the auth details stored
  for(var i = 0; i &#x3c; authStore.length; i++) {
    this.auth(server, connections, authStore[i].db, authStore[i].username, authStore[i].password, function(err) {
      count = count - 1;
      // Done re-authenticating
      if(count == 0) {
        callback(err, null);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function authenticateAgainstProvider(pool, connection, providers, cb) {
  // Finished re-authenticating against providers
  if(providers.length == 0) return cb();
  // Get the provider name
  var provider = pool.authProviders[providers.pop()];

  // Auth provider
  provider.<span class="apidocCodeKeywordSpan">reauthenticate</span>(write(pool), [connection], function(err) {
    // We got an error return immediately
    if(err) return cb(err);
    // Continue authenticating the connection
    authenticateAgainstProvider(pool, connection, providers, cb);
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Query" id="apidoc.module.mongodb-core.Query">module mongodb-core.Query</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Query.Query" id="apidoc.element.mongodb-core.Query.Query">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Query
        <span class="apidocSignatureSpan">(bson, ns, query, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query = function (bson, ns, query, options) {
  var self = this;
  // Basic options needed to be passed in
  if(ns == null) throw new Error(&#x22;ns must be specified for query&#x22;);
  if(query == null) throw new Error(&#x22;query must be specified for query&#x22;);

  // Validate that we are not passing 0x00 in the collection name
  if(!!~ns.indexOf(&#x22;\x00&#x22;)) {
    throw new Error(&#x22;namespace cannot contain a null character&#x22;);
  }

  // Basic options
  this.bson = bson;
  this.ns = ns;
  this.query = query;

  // Ensure empty options
  this.options = options || {};

  // Additional options
  this.numberToSkip = options.numberToSkip || 0;
  this.numberToReturn = options.numberToReturn || 0;
  this.returnFieldSelector = options.returnFieldSelector || null;
  this.requestId = Query.getRequestId();

  // Serialization option
  this.serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27; ? options.serializeFunctions : false;
  this.ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27; ? options.ignoreUndefined : false;
  this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;
  this.checkKeys = typeof options.checkKeys == &#x27;boolean&#x27; ? options.checkKeys : true;
  this.batchSize = self.numberToReturn;

  // Flags
  this.tailable = false;
  this.slaveOk = typeof options.slaveOk == &#x27;boolean&#x27;? options.slaveOk : false;
  this.oplogReplay = false;
  this.noCursorTimeout = false;
  this.awaitData = false;
  this.exhaust = false;
  this.partial = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Query.getRequestId" id="apidoc.element.mongodb-core.Query.getRequestId">
        function <span class="apidocSignatureSpan">mongodb-core.Query.</span>getRequestId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRequestId = function () {
  return ++_requestId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Ensure empty options
this.options = options || {};

// Additional options
this.numberToSkip = options.numberToSkip || 0;
this.numberToReturn = options.numberToReturn || 0;
this.returnFieldSelector = options.returnFieldSelector || null;
this.requestId = Query.<span class="apidocCodeKeywordSpan">getRequestId</span>();

// Serialization option
this.serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27; ? options.serializeFunctions : false;
this.ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27; ? options.ignoreUndefined : false;
this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;
this.checkKeys = typeof options.checkKeys == &#x27;boolean&#x27; ? options.checkKeys : true;
this.batchSize = self.numberToReturn;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Query.nextRequestId" id="apidoc.element.mongodb-core.Query.nextRequestId">
        function <span class="apidocSignatureSpan">mongodb-core.Query.</span>nextRequestId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nextRequestId = function () {
  return _requestId + 1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Query.prototype" id="apidoc.module.mongodb-core.Query.prototype">module mongodb-core.Query.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Query.prototype.incRequestId" id="apidoc.element.mongodb-core.Query.prototype.incRequestId">
        function <span class="apidocSignatureSpan">mongodb-core.Query.prototype.</span>incRequestId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">incRequestId = function () {
  this.requestId = _requestId++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Query.prototype.toBin" id="apidoc.element.mongodb-core.Query.prototype.toBin">
        function <span class="apidocSignatureSpan">mongodb-core.Query.prototype.</span>toBin
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toBin = function () {
  var self = this;
  var buffers = [];
  var projection = null;

  // Set up the flags
  var flags = 0;
  if(this.tailable) {
    flags |= OPTS_TAILABLE_CURSOR;
  }

  if(this.slaveOk) {
    flags |= OPTS_SLAVE;
  }

  if(this.oplogReplay) {
    flags |= OPTS_OPLOG_REPLAY;
  }

  if(this.noCursorTimeout) {
    flags |= OPTS_NO_CURSOR_TIMEOUT;
  }

  if(this.awaitData) {
    flags |= OPTS_AWAIT_DATA;
  }

  if(this.exhaust) {
    flags |= OPTS_EXHAUST;
  }

  if(this.partial) {
    flags |= OPTS_PARTIAL;
  }

  // If batchSize is different to self.numberToReturn
  if(self.batchSize != self.numberToReturn) self.numberToReturn = self.batchSize;

  // Allocate write protocol header buffer
  var header = new Buffer(
    4 * 4 // Header
    + 4   // Flags
    + Buffer.byteLength(self.ns) + 1 // namespace
    + 4 // numberToSkip
    + 4 // numberToReturn
  );

  // Add header to buffers
  buffers.push(header);

  // Serialize the query
  var query = self.bson.serialize(this.query, {
    checkKeys: this.checkKeys,
    serializeFunctions: this.serializeFunctions,
    ignoreUndefined: this.ignoreUndefined,
  });

  // Add query document
  buffers.push(query);

  if(self.returnFieldSelector &#x26;&#x26; Object.keys(self.returnFieldSelector).length &#x3e; 0) {
    // Serialize the projection document
    projection = self.bson.serialize(this.returnFieldSelector, {
      checkKeys: this.checkKeys,
      serializeFunctions: this.serializeFunctions,
      ignoreUndefined: this.ignoreUndefined,
    });
    // Add projection document
    buffers.push(projection);
  }

  // Total message size
  var totalLength = header.length + query.length + (projection ? projection.length : 0);

  // Set up the index
  var index = 4;

  // Write total document length
  header[3] = (totalLength &#x3e;&#x3e; 24) &#x26; 0xff;
  header[2] = (totalLength &#x3e;&#x3e; 16) &#x26; 0xff;
  header[1] = (totalLength &#x3e;&#x3e; 8) &#x26; 0xff;
  header[0] = (totalLength) &#x26; 0xff;

  // Write header information requestId
  header[index + 3] = (this.requestId &#x3e;&#x3e; 24) &#x26; 0xff;
  header[index + 2] = (this.requestId &#x3e;&#x3e; 16) &#x26; 0xff;
  header[index + 1] = (this.requestId &#x3e;&#x3e; 8) &#x26; 0xff;
  header[index] = (this.requestId) &#x26; 0xff;
  index = index + 4;

  // Write header information responseTo
  header[index + 3] = (0 &#x3e;&#x3e; 24) &#x26; 0xff;
  header[index + 2] = (0 &#x3e;&#x3e; 16) &#x26; 0xff;
  header[index + 1] = (0 &#x3e;&#x3e; 8) &#x26; 0xff;
  header[index] = (0) &#x26; 0xff;
  index = index + 4;

  // Write header information OP_QUERY
  header[index + 3] = (OP_QUERY &#x3e;&#x3e; 24) &#x26; 0xff;
  header[index + 2] = (OP_QUERY &#x3e;&#x3e; 16) &#x26; 0xff;
  header[index + 1] = (OP_QUERY &#x3e;&#x3e; 8) &#x26; 0xff;
  header[index] = (OP_QUERY) &#x26; 0xff;
  index = index + 4;

  // Write header information flags
  header[index + 3] = (flags &#x3e;&#x3e; 24) &#x26; 0xff;
  header[index + 2] = (flags &#x3e;&#x3e; 16) &#x26; 0xff;
  header[index + 1] = (flags &#x3e;&#x3e; 8) &#x26; 0xff;
  header[index] = (flags) &#x26; 0xff;
  index = index + 4;

  // Write collection name
  index = index + header.write(this.ns, index, &#x27;utf8&#x27;) + 1;
  header[index - 1] = 0;

  // Write header information flags numberToSkip
  header[index + 3] = (this.numberToSkip &#x3e;&#x3e; 24) &#x26; 0xff;
  header[index + 2] = (this.numberToSkip &#x3e;&#x3e; 16) &#x26; 0xff;
  header[index + 1] = (this.numberToSkip &#x3e;&#x3e; 8) &#x26; 0xff;
  header[index] = (this.numberToSkip) &#x26; 0xff;
  index = index + 4;

  // Write header information flags numberToReturn
  header[index + 3] = (this.numberToReturn &#x3e;&#x3e; 24) &#x26; 0xff;
  header[index + 2] = (this.numberToReturn &#x3e;&#x3e; 16) &#x26; 0xff;
  header[index + 1] = (this.numberToReturn &#x3e;&#x3e; 8) &#x26; 0xff;
  header[index] = (this.numberToReturn) &#x26; 0xff;
  index = index + 4;

  // Return the buffers
  return buffers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Set the connection workItem callback
  connection.workItems.push({
    cb: callback, command: true, requestId: command.requestId
  });

  // Write the buffer out to the connection
  connection.write(command.<span class="apidocCodeKeywordSpan">toBin</span>());
};
}


function reauthenticate(pool, connection, cb) {
// Authenticate
function authenticateAgainstProvider(pool, connection, providers, cb) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.ReadPreference" id="apidoc.module.mongodb-core.ReadPreference">module mongodb-core.ReadPreference</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.ReadPreference.ReadPreference" id="apidoc.element.mongodb-core.ReadPreference.ReadPreference">
        function <span class="apidocSignatureSpan">mongodb-core.</span>ReadPreference
        <span class="apidocSignatureSpan">(preference, tags, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ReadPreference = function (preference, tags, options) {
  this.preference = preference;
  this.tags = tags;
  this.options = options;

  // Add the maxStalenessSeconds value to the read Preference
  if(this.options &#x26;&#x26; this.options.maxStalenessSeconds != null) {
    this.options = options;
    this.maxStalenessSeconds = this.options.maxStalenessSeconds &#x3e;= 0
      ? this.options.maxStalenessSeconds : null;
  } else if(tags &#x26;&#x26; typeof tags == &#x27;object&#x27;) {
    this.options = tags, tags = null;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.ReadPreference.prototype" id="apidoc.module.mongodb-core.ReadPreference.prototype">module mongodb-core.ReadPreference.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.ReadPreference.prototype.equals" id="apidoc.element.mongodb-core.ReadPreference.prototype.equals">
        function <span class="apidocSignatureSpan">mongodb-core.ReadPreference.prototype.</span>equals
        <span class="apidocSignatureSpan">(readPreference)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equals = function (readPreference) {
  return readPreference.preference == this.preference;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  } else if(self.cursorState.limit &#x3e; 0 &#x26;&#x26; self.cursorState.currentLimit &#x3e;= self.cursorState.limit) {
    // Ensure we kill the cursor on the server
    self.kill();
    // Set cursor in dead and notified state
    return setCursorDeadAndNotified(self, callback);
  } else if(self.cursorState.cursorIndex == self.cursorState.documents.length
&#x26;&#x26; !Long.ZERO.<span class="apidocCodeKeywordSpan">equals</span>(self.cursorState.cursorId)) {
// Ensure an empty cursor state
self.cursorState.documents = [];
self.cursorState.cursorIndex = 0;

// Check if topology is destroyed
if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor&#x27
;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReadPreference.prototype.slaveOk" id="apidoc.element.mongodb-core.ReadPreference.prototype.slaveOk">
        function <span class="apidocSignatureSpan">mongodb-core.ReadPreference.prototype.</span>slaveOk
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">slaveOk = function () {
  return needSlaveOk.indexOf(this.preference) != -1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

// Are we executing against a specific topology
var topology = options.topology || {};
// Create the query object
var query = self.wireProtocolHandler.command(self.s.bson, ns, cmd, {}, topology, options);
// Set slave OK of the query
query.slaveOk = options.readPreference ? options.readPreference.<span class="apidocCodeKeywordSpan">slaveOk</span>() : false;

// Write options
var writeOptions = {
  raw: typeof options.raw == &#x27;boolean&#x27; ? options.raw : false,
  promoteLongs: typeof options.promoteLongs == &#x27;boolean&#x27; ? options.promoteLongs : true,
  promoteValues: typeof options.promoteValues == &#x27;boolean&#x27; ? options.promoteValues : true,
  promoteBuffers: typeof options.promoteBuffers == &#x27;boolean&#x27; ? options.promoteBuffers : false,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReadPreference.prototype.toJSON" id="apidoc.element.mongodb-core.ReadPreference.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.ReadPreference.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  var readPreference = {mode: this.preference};
  if(Array.isArray(this.tags)) readPreference.tags = this.tags;
  if(this.maxStalenessSeconds) readPreference.maxStalenessSeconds = this.maxStalenessSeconds;
  return readPreference;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.ReplSet" id="apidoc.module.mongodb-core.ReplSet">module mongodb-core.ReplSet</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.ReplSet" id="apidoc.element.mongodb-core.ReplSet.ReplSet">
        function <span class="apidocSignatureSpan">mongodb-core.</span>ReplSet
        <span class="apidocSignatureSpan">(seedlist, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ReplSet = function (seedlist, options) {
  var self = this;
  options = options || {};

  // Validate seedlist
  if(!Array.isArray(seedlist)) throw new MongoError(&#x22;seedlist must be an array&#x22;);
  // Validate list
  if(seedlist.length == 0) throw new MongoError(&#x22;seedlist must contain at least one entry&#x22;);
  // Validate entries
  seedlist.forEach(function(e) {
    if(typeof e.host != &#x27;string&#x27; || typeof e.port != &#x27;number&#x27;)
      throw new MongoError(&#x22;seedlist entry must contain a host and port&#x22;);
  });

  // Add event listener
  EventEmitter.call(this);

  // Get replSet Id
  this.id = id++;

  // Get the localThresholdMS
  var localThresholdMS = options.localThresholdMS || 15;
  // Backward compatibility
  if(options.acceptableLatency) localThresholdMS = options.acceptableLatency;

  // Create a logger
  var logger = Logger(&#x27;ReplSet&#x27;, options);

  // Internal state
  this.s = {
    options: assign({}, options),
    // BSON instance
    bson: options.bson || new BSON([BSON.Binary, BSON.Code, BSON.DBRef, BSON.Decimal128,
      BSON.Double, BSON.Int32, BSON.Long, BSON.Map, BSON.MaxKey, BSON.MinKey,
      BSON.ObjectId, BSON.BSONRegExp, BSON.Symbol, BSON.Timestamp]),
    // Factory overrides
    Cursor: options.cursorFactory || BasicCursor,
    // Logger instance
    logger: logger,
    // Seedlist
    seedlist: seedlist,
    // Replicaset state
    replicaSetState: new ReplSetState({
      id: this.id, setName: options.setName,
      acceptableLatency: localThresholdMS,
      heartbeatFrequencyMS: options.haInterval ? options.haInterval : 10000,
      logger: logger
    }),
    // Current servers we are connecting to
    connectingServers: [],
    // Ha interval
    haInterval: options.haInterval ? options.haInterval : 10000,
    // Minimum heartbeat frequency used if we detect a server close
    minHeartbeatFrequencyMS: 500,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Server selection index
    index: 0,
    // Connect function options passed in
    connectOptions: {},
    // Are we running in debug mode
    debug: typeof options.debug == &#x27;boolean&#x27; ? options.debug : false,
    // Client info
    clientInfo: createClientInfo(options),
    // Authentication context
    authenticationContexts: [],
  }

  // Add handler for topology change
  this.s.replicaSetState.on(&#x27;topologyDescriptionChanged&#x27;, function(r) { self.emit(&#x27;topologyDescriptionChanged&#x27;, r); });

  // Log info warning if the socketTimeout &#x3c; haInterval as it will cause
  // a lot of recycled connections to happen.
  if(this.s.logger.isWarn()
    &#x26;&#x26; this.s.options.socketTimeout != 0
    &#x26;&#x26; this.s.options.socketTimeout &#x3c; this.s.haInterval) {
      this.s.logger.warn(f(&#x27;warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections
 due to socket timeouts&#x27;
        , this.s.options.socketTimeout, this.s.haInterval));
  }

  // All the authProviders
  this.authProviders = options.authProviders || {
      &#x27;mongocr&#x27;: new MongoCR(this.s.bson), &#x27;x509&#x27;: new X509(this.s.bson)
    , &#x27;plain&#x27;: new Plain(this.s.bson), &#x27;gssapi&#x27;: new GSSAPI(this.s.bson)
    , &#x27;sspi&#x27;: new SSPI(this.s.bson), &#x27;scram-sha-1&#x27;: new ScramSHA1(this.s.bson)
  }

  // Add forwarding of events from state handler
  var types = [&#x27;joined&#x27;, &#x27;left&#x27;];
  types.forEach(function(x) {
    self.s.replicaSetState.on(x, function(t, s) {
      self.emit(x, t, s);
    });
  });

  // Connect stat
  this.initialConnectState = {
    connect: false, fullsetup: false, all: false
  }

  // Disconnected state
  this.state = DISCONNECTED;
  this.haTimeoutId = null;
  // Are we authenticating
  this.authenticating = false;
  // Last ismaster
  this.ismaster = null;
  // Contains the intervalId
  this.intervalIds = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.super_" id="apidoc.element.mongodb-core.ReplSet.super_">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.ReplSet.prototype" id="apidoc.module.mongodb-core.ReplSet.prototype">module mongodb-core.ReplSet.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.auth" id="apidoc.element.mongodb-core.ReplSet.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>auth
        <span class="apidocSignatureSpan">(mechanism, db)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (mechanism, db) {
  var allArgs = Array.prototype.slice.call(arguments, 0).slice(0);
  var self = this;
  var args = Array.prototype.slice.call(arguments, 2);
  var callback = args.pop();
  var currentContextIndex = 0;

  // If we don&#x27;t have the mechanism fail
  if(this.authProviders[mechanism] == null &#x26;&#x26; mechanism != &#x27;default&#x27;) {
    return callback(new MongoError(f(&#x22;auth provider %s does not exist&#x22;, mechanism)));
  }

  // Are we already authenticating, throw
  if(this.authenticating) {
    return callback(new MongoError(&#x27;authentication or logout allready in process&#x27;));
  }

  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(self.s.disconnectHandler != null) {
    if(!self.s.replicaSetState.hasPrimary() &#x26;&#x26; !self.s.options.secondaryOnlyConnectionAllowed) {
      return self.s.disconnectHandler.add(&#x27;auth&#x27;, db, allArgs, {}, callback);
    } else if(!self.s.replicaSetState.hasSecondary() &#x26;&#x26; self.s.options.secondaryOnlyConnectionAllowed) {
      return self.s.disconnectHandler.add(&#x27;auth&#x27;, db, allArgs, {}, callback);
    }
  }

  // Set to authenticating
  this.authenticating = true;
  // All errors
  var errors = [];

  // Get all the servers
  var servers = this.s.replicaSetState.allServers();
  // No servers return
  if(servers.length == 0) {
    this.authenticating = false;
    callback(null, true);
  }

  // Authenticate
  function auth(server) {
    // Arguments without a callback
    var argsWithoutCallback = [mechanism, db].concat(args.slice(0));
    // Create arguments
    var finalArguments = argsWithoutCallback.concat([function(err) {
      count = count - 1;
      // Save all the errors
      if(err) errors.push({name: server.name, err: err});
      // We are done
      if(count == 0) {
        // Auth is done
        self.authenticating = false;

        // Return the auth error
        if(errors.length) {
          // Remove the entry from the stored authentication contexts
          self.s.authenticationContexts.splice(currentContextIndex, 0);
          // Return error
          return callback(MongoError.create({
            message: &#x27;authentication fail&#x27;, errors: errors
          }), false);
        }

        // Successfully authenticated session
        callback(null, self);
      }
    }]);

    if(!server.lastIsMaster().arbiterOnly) {
      // Execute the auth only against non arbiter servers
      server.auth.apply(server, finalArguments);
    } else {
      // If we are authenticating against an arbiter just ignore it
      finalArguments.pop()(null);
    }
  }

  // Get total count
  var count = servers.length;

  // Save current context index
  currentContextIndex = this.s.authenticationContexts.length;

  // Store the auth context and return the last index
  this.s.authenticationContexts.push([mechanism, db].concat(args.slice(0)));

  // Authenticate against all servers
  while(servers.length &#x3e; 0) {
    auth(servers.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.command" id="apidoc.element.mongodb-core.ReplSet.prototype.command">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>command
        <span class="apidocSignatureSpan">(ns, cmd, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (ns, cmd, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));
  var self = this;

  // Establish readPreference
  var readPreference = options.readPreference ? options.readPreference : ReadPreference.primary;

  // If the readPreference is primary and we have no primary, store it
  if(readPreference.preference == &#x27;primary&#x27; &#x26;&#x26; !this.s.replicaSetState.hasPrimary() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;command&#x27;, ns, cmd, options, callback);
  } else if(readPreference.preference == &#x27;secondary&#x27; &#x26;&#x26; !this.s.replicaSetState.hasSecondary() &#x26;&#x26; this.s.disconnectHandler != null
) {
    return this.s.disconnectHandler.add(&#x27;command&#x27;, ns, cmd, options, callback);
  } else if(readPreference.preference != &#x27;primary&#x27; &#x26;&#x26; !this.s.replicaSetState.hasSecondary() &#x26;&#x26; !this.s.replicaSetState.hasPrimary
() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;command&#x27;, ns, cmd, options, callback);
  }

  // Pick a server
  var server = this.s.replicaSetState.pickServer(readPreference);
  // We received an error, return it
  if(!(server instanceof Server)) return callback(server);
  // Emit debug event
  if(self.s.debug) self.emit(&#x27;pickedServer&#x27;, ReadPreference.primary, server);

  // No server returned we had an error
  if(server == null) {
    return callback(new MongoError(f(&#x22;no server found that matches the provided readPreference %s&#x22;, readPreference)));
  }

  // Execute the command
  server.command(ns, cmd, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Add event listeners
server.on(&#x27;connect&#x27;, function(_server) {
  console.log(&#x27;connected&#x27;);

  // Execute the ismaster command
  _server.<span class="apidocCodeKeywordSpan">command</span>(&#x27;system.$cmd&#x27;, {ismaster: true}, function(err, result) {

// Perform a document insert
_server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(2, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.connect" id="apidoc.element.mongodb-core.ReplSet.prototype.connect">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>connect
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (options) {
  var self = this;
  // Add any connect level options to the internal state
  this.s.connectOptions = options || {};
  // Set connecting state
  stateTransition(this, CONNECTING);
  // Create server instances
  var servers = this.s.seedlist.map(function(x) {
    return new Server(assign({}, self.s.options, x, {
      authProviders: self.authProviders, reconnect:false, monitoring:false, inTopology: true
    }, {
      clientInfo: clone(self.s.clientInfo)
    }));
  });

  // Error out as high availbility interval must be &#x3c; than socketTimeout
  if(this.s.options.socketTimeout &#x3e; 0 &#x26;&#x26; this.s.options.socketTimeout &#x3c;= this.s.options.haInterval) {
    return self.emit(&#x27;error&#x27;, new MongoError(f(&#x22;haInterval [%s] MS must be set to less than socketTimeout [%s] MS&#x22;
      , this.s.options.haInterval, this.s.options.socketTimeout)));
  }

  // Emit the topology opening event
  emitSDAMEvent(this, &#x27;topologyOpening&#x27;, { topologyId: this.id });
  // Start all server connections
  connectServers(self, servers);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //       // _server.destroy();
  //       // test.done();
  //     });
  //   });
  // });
});

server.<span class="apidocCodeKeywordSpan">connect</span>();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.connections" id="apidoc.element.mongodb-core.ReplSet.prototype.connections">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>connections
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connections = function () {
  var servers = this.s.replicaSetState.allServers();
  var connections = [];
  for(var i = 0; i &#x3c; servers.length; i++) {
    connections = connections.concat(servers[i].connections());
  }

  return connections;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @method
* @return {Connection[]}
*/
Mongos.prototype.connections = function() {
 var connections = [];

 for(var i = 0; i &#x3c; this.connectedProxies.length; i++) {
   connections = connections.concat(this.connectedProxies[i].<span class="apidocCodeKeywordSpan">connections</span>());
 }

 return connections;
}

/**
* A mongos connect event, used to verify that the connection is up and running
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.cursor" id="apidoc.element.mongodb-core.ReplSet.prototype.cursor">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>cursor
        <span class="apidocSignatureSpan">(ns, cmd, cursorOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cursor = function (ns, cmd, cursorOptions) {
  cursorOptions = cursorOptions || {};
  var FinalCursor = cursorOptions.cursorFactory || this.s.Cursor;
  return new FinalCursor(this.s.bson, ns, cmd, cursorOptions, this, this.s.options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// function executeCursors(_server, cb) {
//   var count = 100;
//
//   for(var i = 0; i &#x3c; 100; i++) {
//     // Execute the write
//     var cursor = _server.<span class="apidocCodeKeywordSpan">cursor</span>(&#x27;test.test&#x27;, {
//         find: &#x27;test.test&#x27;
//       , query: {a:1}
//     }, {readPreference: new ReadPreference(&#x27;secondary&#x27;)});
//
//     // Get the first document
//     cursor.next(function(err, doc) {
//       count = count - 1;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.destroy" id="apidoc.element.mongodb-core.ReplSet.prototype.destroy">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>destroy
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (options) {
  options = options || {};
  // Transition state
  stateTransition(this, DESTROYED);
  // Clear out any monitoring process
  if(this.haTimeoutId) clearTimeout(this.haTimeoutId);
  // Destroy the replicaset
  this.s.replicaSetState.destroy(options);
  // Clear out authentication contexts
  this.s.authenticationContexts = [];

  // Destroy all connecting servers
  this.s.connectingServers.forEach(function(x) {
    x.destroy(options);
  });

  // Clear out all monitoring
  for(var i = 0; i &#x3c; this.intervalIds.length; i++) {
    clearInterval(this.intervalIds[i]);
    clearTimeout(this.intervalIds[i]);
  }

  // Reset list of intervalIds
  this.intervalIds = [];

  // Emit toplogy closing event
  emitSDAMEvent(this, &#x27;topologyClosed&#x27;, { topologyId: this.id });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//         console.log(&#x22;=========== joined :: &#x22; + _t + &#x22; :: &#x22; + _server.name)
//         executeCursors(_server, function() {
//         });
//       }
//     })
//
//     // var s = _server.s.replicaSetState.secondaries[0];
//     // s.<span class="apidocCodeKeywordSpan">destroy</span>({emitClose:true});
//     executeCursors(_server, function() {
//       console.log(&#x22;============== 0&#x22;)
//       // Attempt to force a server reconnect
//       var s = _server.s.replicaSetState.secondaries[0];
//       name = s.name;
//       s.destroy({emitClose:true});
//       // console.log(&#x22;============== 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.getConnection" id="apidoc.element.mongodb-core.ReplSet.prototype.getConnection">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (options) {
  var server = this.getServer(options);
  if(server) return server.getConnection();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Get a direct connection
* @method
* @return {Connection}
*/
Mongos.prototype.getConnection = function() {
 var server = this.getServer();
 if(server) return server.<span class="apidocCodeKeywordSpan">getConnection</span>();
}

/**
* All raw connections
* @method
* @return {Connection[]}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.getServer" id="apidoc.element.mongodb-core.ReplSet.prototype.getServer">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>getServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getServer = function (options) {
  // Ensure we have no options
  options = options || {};
  // Pick the right server baspickServerd on readPreference
  var server = this.s.replicaSetState.pickServer(options.readPreference);
  if(this.s.debug) this.emit(&#x27;pickedServer&#x27;, options.readPreference, server);
  return server;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
  return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
}
return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
    }

    try {
self.server = self.topology.<span class="apidocCodeKeywordSpan">getServer</span>(self.options);
    } catch(err) {
// Handle the error and add object to next method call
if(self.disconnectHandler != null) {
  return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
}

// Otherwise return the error
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.getServers" id="apidoc.element.mongodb-core.ReplSet.prototype.getServers">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>getServers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getServers = function () {
  return this.s.replicaSetState.allServers();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.insert" id="apidoc.element.mongodb-core.ReplSet.prototype.insert">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>insert
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (ns, ops, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

  // Not connected but we have a disconnecthandler
  if(!this.s.replicaSetState.hasPrimary() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;insert&#x27;, ns, ops, options, callback);
  }

  // Execute write operation
  executeWriteOperation(this, &#x27;insert&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     });
//   }
// }

server.on(&#x27;connect&#x27;, function(_server) {
// console.log(&#x22;===== connect&#x22;)
setInterval(function() {
  _server.<span class="apidocCodeKeywordSpan">insert</span>(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.auth(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.isConnected" id="apidoc.element.mongodb-core.ReplSet.prototype.isConnected">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>isConnected
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isConnected = function (options) {
  options = options || {};

  // If we are authenticating signal not connected
  // To avoid interleaving of operations
  if(this.authenticating) return false;

  // If we specified a read preference check if we are connected to something
  // than can satisfy this
  if(options.readPreference
    &#x26;&#x26; options.readPreference.equals(ReadPreference.secondary)) {
    return this.s.replicaSetState.hasSecondary();
  }

  if(options.readPreference
    &#x26;&#x26; options.readPreference.equals(ReadPreference.primary)) {
    return this.s.replicaSetState.hasPrimary();
  }

  if(options.readPreference
    &#x26;&#x26; options.readPreference.equals(ReadPreference.primaryPreferred)) {
    return this.s.replicaSetState.hasSecondary() || this.s.replicaSetState.hasPrimary();
  }

  if(options.readPreference
    &#x26;&#x26; options.readPreference.equals(ReadPreference.secondaryPreferred)) {
    return this.s.replicaSetState.hasSecondary() || this.s.replicaSetState.hasPrimary();
  }

  if(this.s.options.secondaryOnlyConnectionAllowed
    &#x26;&#x26; this.s.replicaSetState.hasSecondary()) {
      return true;
  }

  return this.s.replicaSetState.hasPrimary();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// We have a dead and killed cursor, attempting to call next should error
if(isCursorDeadAndKilled(self, callback)) return;

// We have just started the cursor
if(!self.cursorState.init) {
  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(!self.topology.<span class="apidocCodeKeywordSpan">isConnected</span>(self.options) &#x26;&#x26; self.disconnectHandler !=
null) {
    if (self.topology.isDestroyed()) {
      // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
      return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
    }
    return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.isDestroyed" id="apidoc.element.mongodb-core.ReplSet.prototype.isDestroyed">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>isDestroyed
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDestroyed = function () {
  return this.state == DESTROYED;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * Validate if the pool is dead and return error
 */
var isConnectionDead = function(self, callback) {
if(self.pool
  &#x26;&#x26; self.pool.<span class="apidocCodeKeywordSpan">isDestroyed</span>()) {
  self.cursorState.notified = true;
  self.cursorState.killed = true;
  self.cursorState.documents = [];
  self.cursorState.cursorIndex = 0;
  callback(MongoError.create(f(&#x27;connection to host %s:%s was destroyed&#x27;, self.pool.host, self.pool.port)))
  return true;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.lastIsMaster" id="apidoc.element.mongodb-core.ReplSet.prototype.lastIsMaster">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>lastIsMaster
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lastIsMaster = function () {
  // If secondaryOnlyConnectionAllowed and no primary but secondary
  // return the secondaries ismaster result.
  if (this.s.options.secondaryOnlyConnectionAllowed
    &#x26;&#x26; !this.s.replicaSetState.hasPrimary()
    &#x26;&#x26; this.s.replicaSetState.hasSecondary()) {
      return this.s.replicaSetState.secondaries[0].lastIsMaster();
    }

  return this.s.replicaSetState.primary
    ? this.s.replicaSetState.primary.lastIsMaster() : this.ismaster;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }

    // Check the type of server
    if(event == &#x27;connect&#x27;) {
      // Do we have authentication contexts that need to be applied
      applyAuthenticationContexts(self, _this, function() {
// Get last known ismaster
self.ismaster = _this.<span class="apidocCodeKeywordSpan">lastIsMaster</span>();

// Is this not a proxy, remove t
if(self.ismaster.msg == &#x27;isdbgrid&#x27;) {
  // Add to the connectd list
  for(var i = 0; i &#x3c; self.connectedProxies.length; i++) {
    if(self.connectedProxies[i].name == _this.name) {
      // Move from connectingProxies
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.logout" id="apidoc.element.mongodb-core.ReplSet.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName, callback) {
  var self = this;
  // Are we authenticating or logging out, throw
  if(this.authenticating) {
    throw new MongoError(&#x27;authentication or logout allready in process&#x27;);
  }

  // Ensure no new members are processed while logging out
  this.authenticating = true;

  // Remove from all auth providers (avoid any reaplication of the auth details)
  var providers = Object.keys(this.authProviders);
  for(var i = 0; i &#x3c; providers.length; i++) {
    this.authProviders[providers[i]].logout(dbName);
  }

  // Clear out any contexts associated with the db
  self.s.authenticationContexts = self.s.authenticationContexts.filter(function(context) {
    return context[1] !== dbName;
  });

  // Now logout all the servers
  var servers = this.s.replicaSetState.allServers();
  var count = servers.length;
  if(count == 0) return callback();
  var errors = [];

  function logoutServer(_server, cb) {
    _server.logout(dbName, function(err) {
      if(err) errors.push({name: _server.name, err: err});
      cb();
    });
  }

  // Execute logout on all server instances
  for(i = 0; i &#x3c; servers.length; i++) {
    logoutServer(servers[i], function() {
      count = count - 1;

      if(count == 0) {
        // Do not block new operations
        self.authenticating = false;
        // If we have one or more errors
        if(errors.length) return callback(MongoError.create({
          message: f(&#x27;logout failed against db %s&#x27;, dbName), errors: errors
        }), false);

        // No errors
        callback();
      }
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.remove" id="apidoc.element.mongodb-core.ReplSet.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>remove
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (ns, ops, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

  // Not connected but we have a disconnecthandler
  if(!this.s.replicaSetState.hasPrimary() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;remove&#x27;, ns, ops, options, callback);
  }

  // Execute write operation
  executeWriteOperation(this, &#x27;remove&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.unref" id="apidoc.element.mongodb-core.ReplSet.prototype.unref">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>unref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unref = function () {
  // Transition state
  stateTransition(this, UNREFERENCED);

  this.s.replicaSetState.allServers().forEach(function(x) {
    x.unref();
  });

  clearTimeout(this.haTimeoutId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Unref this connection
 * @method
 * @return {boolean}
 */
Connection.prototype.unref = function() {
  if (this.connection) this.connection.<span class="apidocCodeKeywordSpan">unref</span>();
  else {
    var self = this;
    this.once(&#x27;connect&#x27;, function() {
      self.connection.unref();
    });
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ReplSet.prototype.update" id="apidoc.element.mongodb-core.ReplSet.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.ReplSet.prototype.</span>update
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (ns, ops, options, callback) {
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  if(this.state == DESTROYED) return callback(new MongoError(f(&#x27;topology was destroyed&#x27;)));

  // Not connected but we have a disconnecthandler
  if(!this.s.replicaSetState.hasPrimary() &#x26;&#x26; this.s.disconnectHandler != null) {
    return this.s.disconnectHandler.add(&#x27;update&#x27;, ns, ops, options, callback);
  }

  // Execute write operation
  executeWriteOperation(this, &#x27;update&#x27;, ns, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.ScramSHA1" id="apidoc.module.mongodb-core.ScramSHA1">module mongodb-core.ScramSHA1</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.ScramSHA1.ScramSHA1" id="apidoc.element.mongodb-core.ScramSHA1.ScramSHA1">
        function <span class="apidocSignatureSpan">mongodb-core.</span>ScramSHA1
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ScramSHA1 = function (bson) {
  this.bson = bson;
  this.authStore = [];
  this.id = id++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.ScramSHA1.prototype" id="apidoc.module.mongodb-core.ScramSHA1.prototype">module mongodb-core.ScramSHA1.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.ScramSHA1.prototype.auth" id="apidoc.element.mongodb-core.ScramSHA1.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.ScramSHA1.prototype.</span>auth
        <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (server, connections, db, username, password, callback) {
  var self = this;
  // Total connections
  var count = connections.length;
  if(count == 0) return callback(null, null);

  // Valid connections
  var numberOfValidConnections = 0;
  var errorObject = null;

  // Execute MongoCR
  var executeScram = function(connection) {
    // Clean up the user
    username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

    // Create a random nonce
    var nonce = crypto.randomBytes(24).toString(&#x27;base64&#x27;);
    // var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
    var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

    // Build command structure
    var cmd = {
        saslStart: 1
      , mechanism: &#x27;SCRAM-SHA-1&#x27;
      , payload: new Binary(f(&#x22;n,,%s&#x22;, firstBare))
      , autoAuthorize: 1
    }

    // Handle the error
    var handleError = function(err, r) {
      if(err) {
        numberOfValidConnections = numberOfValidConnections - 1;
        errorObject = err; return false;
      } else if(r.result[&#x27;$err&#x27;]) {
        errorObject = r.result; return false;
      } else if(r.result[&#x27;errmsg&#x27;]) {
        errorObject = r.result; return false;
      } else {
        numberOfValidConnections = numberOfValidConnections + 1;
      }

      return true
    }

    // Finish up
    var finish = function(_count, _numberOfValidConnections) {
      if(_count == 0 &#x26;&#x26; _numberOfValidConnections &#x3e; 0) {
        // Store the auth details
        addAuthSession(self.authStore, new AuthSession(db, username, password));
        // Return correct authentication
        return callback(null, true);
      } else if(_count == 0) {
        if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using scram&#x22;));
        return callback(errorObject, false);
      }
    }

    var handleEnd = function(_err, _r) {
      // Handle any error
      handleError(_err, _r)
      // Adjust the number of connections
      count = count - 1;
      // Execute the finish
      finish(count, numberOfValidConnections);
    }

    // Write the commmand on the connection
    server(connection, new Query(self.bson, f(&#x22;%s.$cmd&#x22;, db), cmd, {
      numberToSkip: 0, numberToReturn: 1
    }), function(err, r) {
      // Do we have an error, handle it
      if(handleError(err, r) == false) {
        count = count - 1;

        if(count == 0 &#x26;&#x26; numberOfValidConnections &#x3e; 0) {
          // Store the auth details
          addAuthSession(self.authStore, new AuthSession(db, username, password));
          // Return correct authentication
          return callback(null, true);
        } else if(count == 0) {
          if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using scram&#x22;));
          return callback(errorObject, false);
        }

        return;
      }

      // Get the dictionary
      var dict = parsePayload(r.result.payload.value())

      // Unpack dictionary
      var iterations = parseInt(dict.i, 10);
      var salt = dict.s;
      var rnonce = dict.r;

      // Set up start of proof
      var withoutProof = f(&#x22;c=biws,r=%s&#x22;, rnonce);
      var passwordDig = passwordDigest(username, password);
      var saltedPassword = hi(passwordDig
          , new Buffer(salt, &#x27;base64&#x27;)
          , iterations);

      // Create the client key
      var hmac = crypto.createHmac(&#x27;sha1&#x27;, saltedPassword);
      hmac.update(new Buffer(&#x22;Client Key&#x22;));
      var clientKey = new Buffer(hmac.digest(&#x27;base64&#x27;), &#x27;base64&#x27;);

      // Create the stored key
      var hash = crypto.createHash(&#x27;sha1&#x27;);
      hash.update(clientKey);
      var storedKey = new Buffer(hash.digest(&#x27;base64&#x27;), &#x27;base64&#x27;);

      // Create the authentication message
      var authMsg = [firstBare, r.result.payload.value().toString(&#x27;base64&#x27;), withoutProof].join(&#x27;,&#x27;);

      // Create client signature
      hmac = crypto.createHmac(&#x27;sha1&#x27;, storedKey);
      hmac.update(new Buffer(authMsg));
      var clientSig = new Buffer(hmac.digest(&#x27;base64&#x27;), &#x27;base64&#x27;);

      // Create client proof
      var clientProof = f(&#x22;p=%s&#x22;, new Buffer(xor(clientKey, clientSig)).toStri ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ScramSHA1.prototype.logout" id="apidoc.element.mongodb-core.ScramSHA1.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.ScramSHA1.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName) {
  this.authStore = this.authStore.filter(function(x) {
    return x.db != dbName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.ScramSHA1.prototype.reauthenticate" id="apidoc.element.mongodb-core.ScramSHA1.prototype.reauthenticate">
        function <span class="apidocSignatureSpan">mongodb-core.ScramSHA1.prototype.</span>reauthenticate
        <span class="apidocSignatureSpan">(server, connections, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reauthenticate = function (server, connections, callback) {
  var authStore = this.authStore.slice(0);
  var count = authStore.length;
  // No connections
  if(count == 0) return callback(null, null);
  // Iterate over all the auth details stored
  for(var i = 0; i &#x3c; authStore.length; i++) {
    this.auth(server, connections, authStore[i].db, authStore[i].username, authStore[i].password, function(err) {
      count = count - 1;
      // Done re-authenticating
      if(count == 0) {
        callback(err, null);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function authenticateAgainstProvider(pool, connection, providers, cb) {
  // Finished re-authenticating against providers
  if(providers.length == 0) return cb();
  // Get the provider name
  var provider = pool.authProviders[providers.pop()];

  // Auth provider
  provider.<span class="apidocCodeKeywordSpan">reauthenticate</span>(write(pool), [connection], function(err) {
    // We got an error return immediately
    if(err) return cb(err);
    // Continue authenticating the connection
    authenticateAgainstProvider(pool, connection, providers, cb);
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Server" id="apidoc.module.mongodb-core.Server">module mongodb-core.Server</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Server.Server" id="apidoc.element.mongodb-core.Server.Server">
        function <span class="apidocSignatureSpan">mongodb-core.</span>Server
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Server = function (options) {
  options = options || {};

  // Add event listener
  EventEmitter.call(this);

  // Server instance id
  this.id = id++;

  // Internal state
  this.s = {
    // Options
    options: options,
    // Logger
    logger: Logger(&#x27;Server&#x27;, options),
    // Factory overrides
    Cursor: options.cursorFactory || BasicCursor,
    // BSON instance
    bson: options.bson || new BSON([BSON.Binary, BSON.Code, BSON.DBRef, BSON.Decimal128,
      BSON.Double, BSON.Int32, BSON.Long, BSON.Map, BSON.MaxKey, BSON.MinKey,
      BSON.ObjectId, BSON.BSONRegExp, BSON.Symbol, BSON.Timestamp]),
    // Pool
    pool: null,
    // Disconnect handler
    disconnectHandler: options.disconnectHandler,
    // Monitor thread (keeps the connection alive)
    monitoring: typeof options.monitoring == &#x27;boolean&#x27; ? options.monitoring : true,
    // Is the server in a topology
    inTopology: typeof options.inTopology == &#x27;boolean&#x27; ? options.inTopology : false,
    // Monitoring timeout
    monitoringInterval: typeof options.monitoringInterval == &#x27;number&#x27;
      ? options.monitoringInterval
      : 5000,
    // Topology id
    topologyId: -1
  }

  // Curent ismaster
  this.ismaster = null;
  // Current ping time
  this.lastIsMasterMS = -1;
  // The monitoringProcessId
  this.monitoringProcessId = null;
  // Initial connection
  this.initalConnect = true;
  // Wire protocol handler, default to oldest known protocol handler
  // this gets changed when the first ismaster is called.
  this.wireProtocolHandler = new PreTwoSixWireProtocolSupport();
  // Default type
  this._type = &#x27;server&#x27;;
  // Set the client info
  this.clientInfo = createClientInfo(options);

  // Max Stalleness values
  // last time we updated the ismaster state
  this.lastUpdateTime = 0;
  // Last write time
  this.lastWriteDate = 0;
  // Stalleness
  this.staleness = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.disableServerAccounting" id="apidoc.element.mongodb-core.Server.disableServerAccounting">
        function <span class="apidocSignatureSpan">mongodb-core.Server.</span>disableServerAccounting
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disableServerAccounting = function () {
  serverAccounting = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.enableServerAccounting" id="apidoc.element.mongodb-core.Server.enableServerAccounting">
        function <span class="apidocSignatureSpan">mongodb-core.Server.</span>enableServerAccounting
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enableServerAccounting = function () {
  serverAccounting = true;
  servers = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.servers" id="apidoc.element.mongodb-core.Server.servers">
        function <span class="apidocSignatureSpan">mongodb-core.Server.</span>servers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">servers = function () {
  return servers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.super_" id="apidoc.element.mongodb-core.Server.super_">
        function <span class="apidocSignatureSpan">mongodb-core.Server.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.Server.prototype" id="apidoc.module.mongodb-core.Server.prototype">module mongodb-core.Server.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.auth" id="apidoc.element.mongodb-core.Server.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>auth
        <span class="apidocSignatureSpan">(mechanism, db)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (mechanism, db) {
  var self = this;

  // If we have the default mechanism we pick mechanism based on the wire
  // protocol max version. If it&#x27;s &#x3e;= 3 then scram-sha1 otherwise mongodb-cr
  if(mechanism == &#x27;default&#x27; &#x26;&#x26; self.ismaster &#x26;&#x26; self.ismaster.maxWireVersion &#x3e;= 3) {
    mechanism = &#x27;scram-sha-1&#x27;;
  } else if(mechanism == &#x27;default&#x27;) {
    mechanism = &#x27;mongocr&#x27;;
  }

  // Slice all the arguments off
  var args = Array.prototype.slice.call(arguments, 0);
  // Set the mechanism
  args[0] = mechanism;
  // Get the callback
  var callback = args[args.length - 1];

  // If we are not connected or have a disconnectHandler specified
  if(disconnectHandler(self, &#x27;auth&#x27;, db, args, {}, callback)) {
    return;
  }

  // Do not authenticate if we are an arbiter
  if(this.lastIsMaster() &#x26;&#x26; this.lastIsMaster().arbiterOnly) {
    return callback(null, true);
  }

  // Apply the arguments to the pool
  self.s.pool.auth.apply(self.s.pool, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.command" id="apidoc.element.mongodb-core.Server.prototype.command">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>command
        <span class="apidocSignatureSpan">(ns, cmd, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (ns, cmd, options, callback) {
  var self = this;
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  var result = basicReadValidations(self, options);
  if(result) return callback(result);

  // Clone the options
  options = assign({}, options, { wireProtocolCommand: false });

  // Debug log
  if(self.s.logger.isDebug()) self.s.logger.debug(f(&#x27;executing command [%s] against %s&#x27;, JSON.stringify({
    ns: ns, cmd: cmd, options: debugOptions(debugFields, options)
  }), self.name));

  // If we are not connected or have a disconnectHandler specified
  if(disconnectHandler(self, &#x27;command&#x27;, ns, cmd, options, callback)) return;

  // Check if we have collation support
  if(this.ismaster &#x26;&#x26; this.ismaster.maxWireVersion &#x3c; 5 &#x26;&#x26; cmd.collation) {
    return callback(new MongoError(f(&#x27;server %s does not support collation&#x27;, this.name)));
  }

  // Query options
  var queryOptions = {
    numberToSkip: 0,
    numberToReturn: -1,
    checkKeys: typeof options.checkKeys == &#x27;boolean&#x27; ? options.checkKeys: false,
    serializeFunctions: typeof options.serializeFunctions == &#x27;boolean&#x27; ? options.serializeFunctions : false,
    ignoreUndefined: typeof options.ignoreUndefined == &#x27;boolean&#x27; ? options.ignoreUndefined : false
  };

  // Are we executing against a specific topology
  var topology = options.topology || {};
  // Create the query object
  var query = self.wireProtocolHandler.command(self.s.bson, ns, cmd, {}, topology, options);
  // Set slave OK of the query
  query.slaveOk = options.readPreference ? options.readPreference.slaveOk() : false;

  // Write options
  var writeOptions = {
    raw: typeof options.raw == &#x27;boolean&#x27; ? options.raw : false,
    promoteLongs: typeof options.promoteLongs == &#x27;boolean&#x27; ? options.promoteLongs : true,
    promoteValues: typeof options.promoteValues == &#x27;boolean&#x27; ? options.promoteValues : true,
    promoteBuffers: typeof options.promoteBuffers == &#x27;boolean&#x27; ? options.promoteBuffers : false,
    command: true,
    monitoring: typeof options.monitoring == &#x27;boolean&#x27; ? options.monitoring : false,
    fullResult: typeof options.fullResult == &#x27;boolean&#x27; ? options.fullResult : false,
    requestId: query.requestId,
    socketTimeout: typeof options.socketTimeout == &#x27;number&#x27; ? options.socketTimeout : null,
  };

  // Write the operation to the pool
  self.s.pool.write(query, writeOptions, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// Add event listeners
server.on(&#x27;connect&#x27;, function(_server) {
  console.log(&#x27;connected&#x27;);

  // Execute the ismaster command
  _server.<span class="apidocCodeKeywordSpan">command</span>(&#x27;system.$cmd&#x27;, {ismaster: true}, function(err, result) {

// Perform a document insert
_server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(2, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.connect" id="apidoc.element.mongodb-core.Server.prototype.connect">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>connect
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (options) {
  var self = this;
  options = options || {};

  // Set the connections
  if(serverAccounting) servers[this.id] = this;

  // Do not allow connect to be called on anything that&#x27;s not disconnected
  if(self.s.pool &#x26;&#x26; !self.s.pool.isDisconnected() &#x26;&#x26; !self.s.pool.isDestroyed()) {
    throw MongoError.create(f(&#x27;server instance in invalid state %s&#x27;, self.s.state));
  }

  // Create a pool
  self.s.pool = new Pool(assign(self.s.options, options, {bson: this.s.bson}));

  // Set up listeners
  self.s.pool.on(&#x27;close&#x27;, eventHandler(self, &#x27;close&#x27;));
  self.s.pool.on(&#x27;error&#x27;, eventHandler(self, &#x27;error&#x27;));
  self.s.pool.on(&#x27;timeout&#x27;, eventHandler(self, &#x27;timeout&#x27;));
  self.s.pool.on(&#x27;parseError&#x27;, eventHandler(self, &#x27;parseError&#x27;));
  self.s.pool.on(&#x27;connect&#x27;, eventHandler(self, &#x27;connect&#x27;));
  self.s.pool.on(&#x27;reconnect&#x27;, eventHandler(self, &#x27;reconnect&#x27;));
  self.s.pool.on(&#x27;reconnectFailed&#x27;, eventHandler(self, &#x27;reconnectFailed&#x27;));

  // Emit toplogy opening event if not in topology
  if(!self.s.inTopology) {
    this.emit(&#x27;topologyOpening&#x27;, { topologyId: self.id });
  }

  // Emit opening server event
  self.emit(&#x27;serverOpening&#x27;, {
    topologyId: self.s.topologyId != -1 ? self.s.topologyId : self.id,
    address: self.name
  });

  // Connect with optional auth settings
  if(options.auth) {
    self.s.pool.connect.apply(self.s.pool, options.auth);
  } else {
    self.s.pool.connect();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //       // _server.destroy();
  //       // test.done();
  //     });
  //   });
  // });
});

server.<span class="apidocCodeKeywordSpan">connect</span>();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.connections" id="apidoc.element.mongodb-core.Server.prototype.connections">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>connections
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connections = function () {
  return this.s.pool.allConnections();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @method
* @return {Connection[]}
*/
Mongos.prototype.connections = function() {
 var connections = [];

 for(var i = 0; i &#x3c; this.connectedProxies.length; i++) {
   connections = connections.concat(this.connectedProxies[i].<span class="apidocCodeKeywordSpan">connections</span>());
 }

 return connections;
}

/**
* A mongos connect event, used to verify that the connection is up and running
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.cursor" id="apidoc.element.mongodb-core.Server.prototype.cursor">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>cursor
        <span class="apidocSignatureSpan">(ns, cmd, cursorOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cursor = function (ns, cmd, cursorOptions) {
  var s = this.s;
  cursorOptions = cursorOptions || {};
  // Set up final cursor type
  var FinalCursor = cursorOptions.cursorFactory || s.Cursor;
  // Return the cursor
  return new FinalCursor(s.bson, ns, cmd, cursorOptions, this, s.options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

// function executeCursors(_server, cb) {
//   var count = 100;
//
//   for(var i = 0; i &#x3c; 100; i++) {
//     // Execute the write
//     var cursor = _server.<span class="apidocCodeKeywordSpan">cursor</span>(&#x27;test.test&#x27;, {
//         find: &#x27;test.test&#x27;
//       , query: {a:1}
//     }, {readPreference: new ReadPreference(&#x27;secondary&#x27;)});
//
//     // Get the first document
//     cursor.next(function(err, doc) {
//       count = count - 1;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.destroy" id="apidoc.element.mongodb-core.Server.prototype.destroy">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>destroy
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (options) {
  options = options || {};
  var self = this;

  // Set the connections
  if(serverAccounting) delete servers[this.id];

  // Destroy the monitoring process if any
  if(this.monitoringProcessId) {
    clearTimeout(this.monitoringProcessId);
  }

  // No pool, return
  if(!self.s.pool) return;

  // Emit close event
  if(options.emitClose) {
    self.emit(&#x27;close&#x27;, self);
  }

  // Emit destroy event
  if(options.emitDestroy) {
    self.emit(&#x27;destroy&#x27;, self);
  }

  // Remove all listeners
  listeners.forEach(function(event) {
    self.s.pool.removeAllListeners(event);
  });

  // Emit opening server event
  if(self.listeners(&#x27;serverClosed&#x27;).length &#x3e; 0) self.emit(&#x27;serverClosed&#x27;, {
    topologyId: self.s.topologyId != -1 ? self.s.topologyId : self.id, address: self.name
  });

  // Emit toplogy opening event if not in topology
  if(self.listeners(&#x27;topologyClosed&#x27;).length &#x3e; 0 &#x26;&#x26; !self.s.inTopology) {
    self.emit(&#x27;topologyClosed&#x27;, { topologyId: self.id });
  }

  if(self.s.logger.isDebug()) {
    self.s.logger.debug(f(&#x27;destroy called on server %s&#x27;, self.name));
  }

  // Destroy the pool
  this.s.pool.destroy(options.force);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//         console.log(&#x22;=========== joined :: &#x22; + _t + &#x22; :: &#x22; + _server.name)
//         executeCursors(_server, function() {
//         });
//       }
//     })
//
//     // var s = _server.s.replicaSetState.secondaries[0];
//     // s.<span class="apidocCodeKeywordSpan">destroy</span>({emitClose:true});
//     executeCursors(_server, function() {
//       console.log(&#x22;============== 0&#x22;)
//       // Attempt to force a server reconnect
//       var s = _server.s.replicaSetState.secondaries[0];
//       name = s.name;
//       s.destroy({emitClose:true});
//       // console.log(&#x22;============== 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.equals" id="apidoc.element.mongodb-core.Server.prototype.equals">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>equals
        <span class="apidocSignatureSpan">(server)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">equals = function (server) {
  if(typeof server == &#x27;string&#x27;) return this.name.toLowerCase() == server.toLowerCase();
  if(server.name) return this.name.toLowerCase() == server.name.toLowerCase();
  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  } else if(self.cursorState.limit &#x3e; 0 &#x26;&#x26; self.cursorState.currentLimit &#x3e;= self.cursorState.limit) {
    // Ensure we kill the cursor on the server
    self.kill();
    // Set cursor in dead and notified state
    return setCursorDeadAndNotified(self, callback);
  } else if(self.cursorState.cursorIndex == self.cursorState.documents.length
&#x26;&#x26; !Long.ZERO.<span class="apidocCodeKeywordSpan">equals</span>(self.cursorState.cursorId)) {
// Ensure an empty cursor state
self.cursorState.documents = [];
self.cursorState.cursorIndex = 0;

// Check if topology is destroyed
if(self.topology.isDestroyed()) return callback(new MongoError(&#x27;connection destroyed, not possible to instantiate cursor&#x27
;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.getConnection" id="apidoc.element.mongodb-core.Server.prototype.getConnection">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>getConnection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function () {
  return this.s.pool.get();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Get a direct connection
* @method
* @return {Connection}
*/
Mongos.prototype.getConnection = function() {
 var server = this.getServer();
 if(server) return server.<span class="apidocCodeKeywordSpan">getConnection</span>();
}

/**
* All raw connections
* @method
* @return {Connection[]}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.getDescription" id="apidoc.element.mongodb-core.Server.prototype.getDescription">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>getDescription
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDescription = function () {
  var ismaster = this.ismaster || {};
  var description = {
    type: sdam.getTopologyType(this),
    address: this.name,
  };

  // Add fields if available
  if(ismaster.hosts) description.hosts = ismaster.hosts;
  if(ismaster.arbiters) description.arbiters = ismaster.arbiters;
  if(ismaster.passives) description.passives = ismaster.passives;
  if(ismaster.setName) description.setName = ismaster.setName;
  return description;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  topologyType: topology,
  setName: setName,
  servers: []
}

// Add the primary to the list
if(self.hasPrimary()) {
  var desc = self.primary.<span class="apidocCodeKeywordSpan">getDescription</span>();
  desc.type = &#x27;RSPrimary&#x27;;
  description.servers.push(desc);
}

// Add all the secondaries
description.servers = description.servers.concat(self.secondaries.map(function(x) {
  var description = x.getDescription();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.getServer" id="apidoc.element.mongodb-core.Server.prototype.getServer">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>getServer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getServer = function () {
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
  return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
}
return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
    }

    try {
self.server = self.topology.<span class="apidocCodeKeywordSpan">getServer</span>(self.options);
    } catch(err) {
// Handle the error and add object to next method call
if(self.disconnectHandler != null) {
  return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
}

// Otherwise return the error
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.insert" id="apidoc.element.mongodb-core.Server.prototype.insert">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>insert
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (ns, ops, options, callback) {
  var self = this;
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  var result = basicWriteValidations(self, options);
  if(result) return callback(result);

  // If we are not connected or have a disconnectHandler specified
  if(disconnectHandler(self, &#x27;insert&#x27;, ns, ops, options, callback)) return;

  // Setup the docs as an array
  ops = Array.isArray(ops) ? ops : [ops];

  // Execute write
  return self.wireProtocolHandler.insert(self.s.pool, self.ismaster, ns, self.s.bson, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//     });
//   }
// }

server.on(&#x27;connect&#x27;, function(_server) {
// console.log(&#x22;===== connect&#x22;)
setInterval(function() {
  _server.<span class="apidocCodeKeywordSpan">insert</span>(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.auth(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.isConnected" id="apidoc.element.mongodb-core.Server.prototype.isConnected">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>isConnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isConnected = function () {
  if(!this.s.pool) return false;
  return this.s.pool.isConnected();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// We have a dead and killed cursor, attempting to call next should error
if(isCursorDeadAndKilled(self, callback)) return;

// We have just started the cursor
if(!self.cursorState.init) {
  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(!self.topology.<span class="apidocCodeKeywordSpan">isConnected</span>(self.options) &#x26;&#x26; self.disconnectHandler !=
null) {
    if (self.topology.isDestroyed()) {
      // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
      return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
    }
    return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.isDestroyed" id="apidoc.element.mongodb-core.Server.prototype.isDestroyed">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>isDestroyed
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDestroyed = function () {
  if(!this.s.pool) return false;
  return this.s.pool.isDestroyed();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * Validate if the pool is dead and return error
 */
var isConnectionDead = function(self, callback) {
if(self.pool
  &#x26;&#x26; self.pool.<span class="apidocCodeKeywordSpan">isDestroyed</span>()) {
  self.cursorState.notified = true;
  self.cursorState.killed = true;
  self.cursorState.documents = [];
  self.cursorState.cursorIndex = 0;
  callback(MongoError.create(f(&#x27;connection to host %s:%s was destroyed&#x27;, self.pool.host, self.pool.port)))
  return true;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.lastIsMaster" id="apidoc.element.mongodb-core.Server.prototype.lastIsMaster">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>lastIsMaster
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lastIsMaster = function () {
  return this.ismaster;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }

    // Check the type of server
    if(event == &#x27;connect&#x27;) {
      // Do we have authentication contexts that need to be applied
      applyAuthenticationContexts(self, _this, function() {
// Get last known ismaster
self.ismaster = _this.<span class="apidocCodeKeywordSpan">lastIsMaster</span>();

// Is this not a proxy, remove t
if(self.ismaster.msg == &#x27;isdbgrid&#x27;) {
  // Add to the connectd list
  for(var i = 0; i &#x3c; self.connectedProxies.length; i++) {
    if(self.connectedProxies[i].name == _this.name) {
      // Move from connectingProxies
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.logout" id="apidoc.element.mongodb-core.Server.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName, callback) {
  this.s.pool.logout(dbName, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.remove" id="apidoc.element.mongodb-core.Server.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>remove
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (ns, ops, options, callback) {
  var self = this;
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  var result = basicWriteValidations(self, options);
  if(result) return callback(result);

  // If we are not connected or have a disconnectHandler specified
  if(disconnectHandler(self, &#x27;remove&#x27;, ns, ops, options, callback)) return;

  // Check if we have collation support
  if(this.ismaster &#x26;&#x26; this.ismaster.maxWireVersion &#x3c; 5 &#x26;&#x26; options.collation) {
    return callback(new MongoError(f(&#x27;server %s does not support collation&#x27;, this.name)));
  }

  // Setup the docs as an array
  ops = Array.isArray(ops) ? ops : [ops];
  // Execute write
  return self.wireProtocolHandler.remove(self.s.pool, self.ismaster, ns, self.s.bson, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.unref" id="apidoc.element.mongodb-core.Server.prototype.unref">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>unref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unref = function () {
  this.s.pool.unref();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Unref this connection
 * @method
 * @return {boolean}
 */
Connection.prototype.unref = function() {
  if (this.connection) this.connection.<span class="apidocCodeKeywordSpan">unref</span>();
  else {
    var self = this;
    this.once(&#x27;connect&#x27;, function() {
      self.connection.unref();
    });
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.Server.prototype.update" id="apidoc.element.mongodb-core.Server.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.Server.prototype.</span>update
        <span class="apidocSignatureSpan">(ns, ops, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (ns, ops, options, callback) {
  var self = this;
  if(typeof options == &#x27;function&#x27;) callback = options, options = {}, options = options || {};
  var result = basicWriteValidations(self, options);
  if(result) return callback(result);

  // If we are not connected or have a disconnectHandler specified
  if(disconnectHandler(self, &#x27;update&#x27;, ns, ops, options, callback)) return;

  // Check if we have collation support
  if(this.ismaster &#x26;&#x26; this.ismaster.maxWireVersion &#x3c; 5 &#x26;&#x26; options.collation) {
    return callback(new MongoError(f(&#x27;server %s does not support collation&#x27;, this.name)));
  }

  // Setup the docs as an array
  ops = Array.isArray(ops) ? ops : [ops];
  // Execute write
  return self.wireProtocolHandler.update(self.s.pool, self.ismaster, ns, self.s.bson, ops, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.X509" id="apidoc.module.mongodb-core.X509">module mongodb-core.X509</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.X509.X509" id="apidoc.element.mongodb-core.X509.X509">
        function <span class="apidocSignatureSpan">mongodb-core.</span>X509
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">X509 = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.X509.prototype" id="apidoc.module.mongodb-core.X509.prototype">module mongodb-core.X509.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.X509.prototype.auth" id="apidoc.element.mongodb-core.X509.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.X509.prototype.</span>auth
        <span class="apidocSignatureSpan">(server, connections, db, username, password, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (server, connections, db, username, password, callback) {
  var self = this;
  // Total connections
  var count = connections.length;
  if(count == 0) return callback(null, null);

  // Valid connections
  var numberOfValidConnections = 0;
  var errorObject = null;

  // For each connection we need to authenticate
  while(connections.length &#x3e; 0) {
    // Execute MongoCR
    var execute = function(connection) {
      // Let&#x27;s start the sasl process
      var command = {
          authenticate: 1
        , mechanism: &#x27;MONGODB-X509&#x27;
      };

      // Add username if specified
      if(username) {
        command.user = username;
      }

      // Let&#x27;s start the process
      server(connection, new Query(self.bson, &#x22;$external.$cmd&#x22;, command, {
        numberToSkip: 0, numberToReturn: 1
      }), function(err, r) {
        // Adjust count
        count = count - 1;

        // If we have an error
        if(err) {
          errorObject = err;
        } else if(r.result[&#x27;$err&#x27;]) {
          errorObject = r.result;
        } else if(r.result[&#x27;errmsg&#x27;]) {
          errorObject = r.result;
        } else {
          numberOfValidConnections = numberOfValidConnections + 1;
        }

        // We have authenticated all connections
        if(count == 0 &#x26;&#x26; numberOfValidConnections &#x3e; 0) {
          // Store the auth details
          addAuthSession(self.authStore, new AuthSession(db, username, password));
          // Return correct authentication
          callback(null, true);
        } else if(count == 0) {
          if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using mongocr&#x22;));
          callback(errorObject, false);
        }
      });
    }

    var _execute = function(_connection) {
      process.nextTick(function() {
        execute(_connection);
      });
    }

    _execute(connections.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.X509.prototype.logout" id="apidoc.element.mongodb-core.X509.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.X509.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName) {
  this.authStore = this.authStore.filter(function(x) {
    return x.db != dbName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.X509.prototype.reauthenticate" id="apidoc.element.mongodb-core.X509.prototype.reauthenticate">
        function <span class="apidocSignatureSpan">mongodb-core.X509.prototype.</span>reauthenticate
        <span class="apidocSignatureSpan">(server, connections, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reauthenticate = function (server, connections, callback) {
  var authStore = this.authStore.slice(0);
  var count = authStore.length;
  if(count == 0) return callback(null, null);
  // Iterate over all the auth details stored
  for(var i = 0; i &#x3c; authStore.length; i++) {
    this.auth(server, connections, authStore[i].db, authStore[i].username, authStore[i].password, function(err) {
      count = count - 1;
      // Done re-authenticating
      if(count == 0) {
        callback(err, null);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function authenticateAgainstProvider(pool, connection, providers, cb) {
  // Finished re-authenticating against providers
  if(providers.length == 0) return cb();
  // Get the provider name
  var provider = pool.authProviders[providers.pop()];

  // Auth provider
  provider.<span class="apidocCodeKeywordSpan">reauthenticate</span>(write(pool), [connection], function(err) {
    // We got an error return immediately
    if(err) return cb(err);
    // Continue authenticating the connection
    authenticateAgainstProvider(pool, connection, providers, cb);
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.command_result" id="apidoc.module.mongodb-core.command_result">module mongodb-core.command_result</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.command_result.command_result" id="apidoc.element.mongodb-core.command_result.command_result">
        function <span class="apidocSignatureSpan">mongodb-core.</span>command_result
        <span class="apidocSignatureSpan">(result, connection, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command_result = function (result, connection, message) {
  this.result = result;
  this.connection = connection;
  this.message = message;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.command_result.prototype" id="apidoc.module.mongodb-core.command_result.prototype">module mongodb-core.command_result.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.command_result.prototype.toJSON" id="apidoc.element.mongodb-core.command_result.prototype.toJSON">
        function <span class="apidocSignatureSpan">mongodb-core.command_result.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Convert CommandResult to String representation
 * @method
 * @return {string}
 */
CommandResult.prototype.toString = function() {
  return JSON.stringify(this.<span class="apidocCodeKeywordSpan">toJSON</span>());
}

module.exports = CommandResult;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.command_result.prototype.toString" id="apidoc.element.mongodb-core.command_result.prototype.toString">
        function <span class="apidocSignatureSpan">mongodb-core.command_result.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  return JSON.stringify(this.toJSON());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  // Execute MongoCR
  var executeScram = function(connection) {
// Clean up the user
username = username.replace(&#x27;=&#x27;, &#x22;=3D&#x22;).replace(&#x27;,&#x27;, &#x27;=2C&#x27;);

// Create a random nonce
var nonce = crypto.randomBytes(24).<span class="apidocCodeKeywordSpan">toString</span>(&#x27;base64&#x27;);
// var nonce = &#x27;MsQUY9iw0T9fx2MUEz6LZPwGuhVvWAhc&#x27;
var firstBare = f(&#x22;n=%s,r=%s&#x22;, username, nonce);

// Build command structure
var cmd = {
    saslStart: 1
  , mechanism: &#x27;SCRAM-SHA-1&#x27;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.commands" id="apidoc.module.mongodb-core.commands">module mongodb-core.commands</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.commands.GetMore" id="apidoc.element.mongodb-core.commands.GetMore">
        function <span class="apidocSignatureSpan">mongodb-core.commands.</span>GetMore
        <span class="apidocSignatureSpan">(bson, ns, cursorId, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">GetMore = function (bson, ns, cursorId, opts) {
  opts = opts || {};
  this.numberToReturn = opts.numberToReturn || 0;
  this.requestId = _requestId++;
  this.bson = bson;
  this.ns = ns;
  this.cursorId = cursorId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.commands.KillCursor" id="apidoc.element.mongodb-core.commands.KillCursor">
        function <span class="apidocSignatureSpan">mongodb-core.commands.</span>KillCursor
        <span class="apidocSignatureSpan">(bson, cursorIds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">KillCursor = function (bson, cursorIds) {
  this.requestId = _requestId++;
  this.cursorIds = cursorIds;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.commands.Query" id="apidoc.element.mongodb-core.commands.Query">
        function <span class="apidocSignatureSpan">mongodb-core.commands.</span>Query
        <span class="apidocSignatureSpan">(bson, ns, query, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query = function (bson, ns, query, options) {
  var self = this;
  // Basic options needed to be passed in
  if(ns == null) throw new Error(&#x22;ns must be specified for query&#x22;);
  if(query == null) throw new Error(&#x22;query must be specified for query&#x22;);

  // Validate that we are not passing 0x00 in the collection name
  if(!!~ns.indexOf(&#x22;\x00&#x22;)) {
    throw new Error(&#x22;namespace cannot contain a null character&#x22;);
  }

  // Basic options
  this.bson = bson;
  this.ns = ns;
  this.query = query;

  // Ensure empty options
  this.options = options || {};

  // Additional options
  this.numberToSkip = options.numberToSkip || 0;
  this.numberToReturn = options.numberToReturn || 0;
  this.returnFieldSelector = options.returnFieldSelector || null;
  this.requestId = Query.getRequestId();

  // Serialization option
  this.serializeFunctions = typeof options.serializeFunctions == &#x27;boolean&#x27; ? options.serializeFunctions : false;
  this.ignoreUndefined = typeof options.ignoreUndefined == &#x27;boolean&#x27; ? options.ignoreUndefined : false;
  this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;
  this.checkKeys = typeof options.checkKeys == &#x27;boolean&#x27; ? options.checkKeys : true;
  this.batchSize = self.numberToReturn;

  // Flags
  this.tailable = false;
  this.slaveOk = typeof options.slaveOk == &#x27;boolean&#x27;? options.slaveOk : false;
  this.oplogReplay = false;
  this.noCursorTimeout = false;
  this.awaitData = false;
  this.exhaust = false;
  this.partial = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.commands.Response" id="apidoc.element.mongodb-core.commands.Response">
        function <span class="apidocSignatureSpan">mongodb-core.commands.</span>Response
        <span class="apidocSignatureSpan">(bson, data, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Response = function (bson, data, opts) {
  opts = opts || {promoteLongs: true, promoteValues: true, promoteBuffers: false};
  this.parsed = false;

  //
  // Parse Header
  //
  this.index = 0;
  this.raw = data;
  this.data = data;
  this.bson = bson;
  this.opts = opts;

  // Read the message length
  this.length = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;

  // Fetch the request id for this reply
  this.requestId = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;

  // Fetch the id of the request that triggered the response
  this.responseTo = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;

  // Skip op-code field
  this.index = this.index + 4;

  // Unpack flags
  this.responseFlags = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;

  // Unpack the cursor
  var lowBits = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;
  var highBits = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;
  // Create long object
  this.cursorId = new Long(lowBits, highBits);

  // Unpack the starting from
  this.startingFrom = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;

  // Unpack the number of objects returned
  this.numberReturned = data[this.index] | data[this.index + 1] &#x3c;&#x3c; 8 | data[this.index + 2] &#x3c;&#x3c; 16 | data[this.index + 3] &#x3c;&#x3c; 24;
  this.index = this.index + 4;

  // Preallocate document array
  this.documents = new Array(this.numberReturned);

  // Flag values
  this.cursorNotFound = (this.responseFlags &#x26; CURSOR_NOT_FOUND) != 0;
  this.queryFailure = (this.responseFlags &#x26; QUERY_FAILURE) != 0;
  this.shardConfigStale = (this.responseFlags &#x26; SHARD_CONFIG_STALE) != 0;
  this.awaitCapable = (this.responseFlags &#x26; AWAIT_CAPABLE) != 0;
  this.promoteLongs = typeof opts.promoteLongs == &#x27;boolean&#x27; ? opts.promoteLongs : true;
  this.promoteValues = typeof opts.promoteValues == &#x27;boolean&#x27; ? opts.promoteValues : true;
  this.promoteBuffers = typeof opts.promoteBuffers == &#x27;boolean&#x27; ? opts.promoteBuffers : false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.pool" id="apidoc.module.mongodb-core.pool">module mongodb-core.pool</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.pool.pool" id="apidoc.element.mongodb-core.pool.pool">
        function <span class="apidocSignatureSpan">mongodb-core.</span>pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pool = function (options) {
  // Add event listener
  EventEmitter.call(this);
  // Add the options
  this.options = assign({
    // Host and port settings
    host: &#x27;localhost&#x27;,
    port: 27017,
    // Pool default max size
    size: 5,
    // socket settings
    connectionTimeout: 30000,
    socketTimeout: 30000,
    keepAlive: true,
    keepAliveInitialDelay: 0,
    noDelay: true,
    // SSL Settings
    ssl: false, checkServerIdentity: true,
    ca: null, crl: null, cert: null, key: null, passPhrase: null,
    rejectUnauthorized: false,
    promoteLongs: true,
    promoteValues: true,
    promoteBuffers: false,
    // Reconnection options
    reconnect: true,
    reconnectInterval: 1000,
    reconnectTries: 30,
    // Enable domains
    domainsEnabled: false
  }, options);

  // Identification information
  this.id = _id++;
  // Current reconnect retries
  this.retriesLeft = this.options.reconnectTries;
  this.reconnectId = null;
  // No bson parser passed in
  if(!options.bson || (options.bson
    &#x26;&#x26; (typeof options.bson.serialize != &#x27;function&#x27;
    || typeof options.bson.deserialize != &#x27;function&#x27;))) {
      throw new Error(&#x22;must pass in valid bson parser&#x22;);
  }

  // Logger instance
  this.logger = Logger(&#x27;Pool&#x27;, options);
  // Pool state
  this.state = DISCONNECTED;
  // Connections
  this.availableConnections = [];
  this.inUseConnections = [];
  this.connectingConnections = [];
  // Currently executing
  this.executing = false;
  // Operation work queue
  this.queue = [];

  // All the authProviders
  this.authProviders = options.authProviders || {
      &#x27;mongocr&#x27;: new MongoCR(options.bson), &#x27;x509&#x27;: new X509(options.bson)
    , &#x27;plain&#x27;: new Plain(options.bson), &#x27;gssapi&#x27;: new GSSAPI(options.bson)
    , &#x27;sspi&#x27;: new SSPI(options.bson), &#x27;scram-sha-1&#x27;: new ScramSHA1(options.bson)
  }

  // Contains the reconnect connection
  this.reconnectConnection = null;

  // Are we currently authenticating
  this.authenticating = false;
  this.loggingout = false;
  this.nonAuthenticatedConnections = [];
  this.authenticatingTimestamp = null;
  // Number of consecutive timeouts caught
  this.numberOfConsecutiveTimeouts = 0;
  // Current pool Index
  this.connectionIndex = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool._execute" id="apidoc.element.mongodb-core.pool._execute">
        function <span class="apidocSignatureSpan">mongodb-core.pool.</span>_execute
        <span class="apidocSignatureSpan">(self)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _execute(self) {
  return function() {
    if(self.state == DESTROYED) return;
    // Already executing, skip
    if(self.executing) return;
    // Set pool as executing
    self.executing = true;

    // Wait for auth to clear before continuing
    function waitForAuth(cb) {
      if(!self.authenticating) return cb();
      // Wait for a milisecond and try again
      setTimeout(function() {
        waitForAuth(cb);
      }, 1);
    }

    // Block on any auth in process
    waitForAuth(function() {
      // New pool connections are in progress, wait them to finish
      // before executing any more operation to ensure distribution of
      // operations
      if(self.connectingConnections.length &#x3e; 0) {
        return;
      }

      // As long as we have available connections
      while(true) {
        // Total availble connections
        var totalConnections = self.availableConnections.length
          + self.connectingConnections.length
          + self.inUseConnections.length;

        // No available connections available, flush any monitoring ops
        if(self.availableConnections.length == 0) {
          // Flush any monitoring operations
          flushMonitoringOperations(self.queue);
          break;
        }

        // No queue break
        if(self.queue.length == 0) {
          break;
        }

        // Get a connection
        var connection = null;

        // Locate all connections that have no work
        var connections = [];
        // Get a list of all connections
        for(var i = 0; i &#x3c; self.availableConnections.length; i++) {
          if(self.availableConnections[i].workItems.length == 0) {
            connections.push(self.availableConnections[i]);
          }
        }

        // No connection found that has no work on it, just pick one for pipelining
        if(connections.length == 0) {
          connection = self.availableConnections[self.connectionIndex++ % self.availableConnections.length];
        } else {
          connection = connections[self.connectionIndex++ % connections.length];
        }

        // Is the connection connected
        if(connection.isConnected()) {
          // Get the next work item
          var workItem = self.queue.shift();

          // If we are monitoring we need to use a connection that is not
          // running another operation to avoid socket timeout changes
          // affecting an existing operation
          if (workItem.monitoring) {
            var foundValidConnection = false;

            for (var i = 0; i &#x3c; self.availableConnections.length; i++) {
              // If the connection is connected
              // And there are no pending workItems on it
              // Then we can safely use it for monitoring.
              if(self.availableConnections[i].isConnected()
                &#x26;&#x26; self.availableConnections[i].workItems.length == 0) {
                  foundValidConnection = true;
                  connection = self.availableConnections[i];
                  break;
                }
            }

            // No safe connection found, attempt to grow the connections
            // if possible and break from the loop
            if(!foundValidConnection) {
              // Put workItem back on the queue
              self.queue.unshift(workItem);

              // Attempt to grow the pool if it&#x27;s not yet maxsize
              if(totalConnections &#x3c; self.options.size
                &#x26;&#x26; self.queue.length &#x3e; 0) {
                // Create a new connection
                _createConnection(self);
              }

              // Re-execute the operation
              setTimeout(function() {
                _execute(self)();
              }, 10);

              break;
            }
          }

          // Don&#x27;t execute operation until we have a full pool
          if(totalConnections &#x3c; self.options.size) {
            // Connection has work items, then put it back on the queue
            // and create a new connection
            if(connection.workItems.length &#x3e; 0) {
              // Lets put the workItem back on the ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.super_" id="apidoc.element.mongodb-core.pool.super_">
        function <span class="apidocSignatureSpan">mongodb-core.pool.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.pool.prototype" id="apidoc.module.mongodb-core.pool.prototype">module mongodb-core.pool.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.allConnections" id="apidoc.element.mongodb-core.pool.prototype.allConnections">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>allConnections
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">allConnections = function () {
  return this.availableConnections
    .concat(this.inUseConnections)
    .concat(this.connectingConnections);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Get a pool connection (round-robin)
* @method
* @return {Connection}
*/
Pool.prototype.get = function() {
 return this.<span class="apidocCodeKeywordSpan">allConnections</span>()[0];
}

/**
* Is the pool connected
* @method
* @return {boolean}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.auth" id="apidoc.element.mongodb-core.pool.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>auth
        <span class="apidocSignatureSpan">(mechanism)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (mechanism) {
  var self = this;
  var args = Array.prototype.slice.call(arguments, 0);
  var callback = args.pop();

  // If we don&#x27;t have the mechanism fail
  if(self.authProviders[mechanism] == null &#x26;&#x26; mechanism != &#x27;default&#x27;) {
    throw new MongoError(f(&#x22;auth provider %s does not exist&#x22;, mechanism));
  }

  // Signal that we are authenticating a new set of credentials
  this.authenticating = true;
  this.authenticatingTimestamp = new Date().getTime();

  // Authenticate all live connections
  function authenticateLiveConnections(self, args, cb) {
    // Get the current viable connections
    var connections = self.allConnections();
    // Allow nothing else to use the connections while we authenticate them
    self.availableConnections = [];

    var connectionsCount = connections.length;
    var error = null;
    // No connections available, return
    if(connectionsCount == 0) {
      self.authenticating = false;
      return callback(null);
    }

    // Authenticate the connections
    for(var i = 0; i &#x3c; connections.length; i++) {
      authenticate(self, args, connections[i], function(err) {
        connectionsCount = connectionsCount - 1;

        // Store the error
        if(err) error = err;

        // Processed all connections
        if(connectionsCount == 0) {
          // Auth finished
          self.authenticating = false;
          // Add the connections back to available connections
          self.availableConnections = self.availableConnections.concat(connections);
          // We had an error, return it
          if(error) {
            // Log the error
            if(self.logger.isError()) {
              self.logger.error(f(&#x27;[%s] failed to authenticate against server %s:%s&#x27;
                , self.id, self.options.host, self.options.port));
            }

            return cb(error);
          }
          cb(null);
        }
      });
    }
  }

  // Wait for a logout in process to happen
  function waitForLogout(self, cb) {
    if(!self.loggingout) return cb();
    setTimeout(function() {
      waitForLogout(self, cb);
    }, 1)
  }

  // Wait for loggout to finish
  waitForLogout(self, function() {
    // Authenticate all live connections
    authenticateLiveConnections(self, args, function(err) {
      // Credentials correctly stored in auth provider if successful
      // Any new connections will now reauthenticate correctly
      self.authenticating = false;
      // Return after authentication connections
      callback(err);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.connect" id="apidoc.element.mongodb-core.pool.prototype.connect">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function () {
  if(this.state != DISCONNECTED) {
    throw new MongoError(&#x27;connection in unlawful state &#x27; + this.state);
  }

  var self = this;
  // Transition to connecting state
  stateTransition(this, CONNECTING);
  // Create an array of the arguments
  var args = Array.prototype.slice.call(arguments, 0);
  // Create a connection
  var connection = new Connection(messageHandler(self), this.options);
  // Add to list of connections
  this.connectingConnections.push(connection);
  // Add listeners to the connection
  connection.once(&#x27;connect&#x27;, function(connection) {
    if(self.state == DESTROYED || self.state == DESTROYING) return self.destroy();

    // If we are in a topology, delegate the auth to it
    // This is to avoid issues where we would auth against an
    // arbiter
    if(self.options.inTopology) {
      // Set connected mode
      stateTransition(self, CONNECTED);

      // Move the active connection
      moveConnectionBetween(connection, self.connectingConnections, self.availableConnections);

      // Emit the connect event
      return self.emit(&#x27;connect&#x27;, self);
    }

    // Apply any store credentials
    reauthenticate(self, connection, function(err) {
      if(self.state == DESTROYED || self.state == DESTROYING) return self.destroy();

      // We have an error emit it
      if(err) {
        // Destroy the pool
        self.destroy();
        // Emit the error
        return self.emit(&#x27;error&#x27;, err);
      }

      // Authenticate
      authenticate(self, args, connection, function(err) {
        if(self.state == DESTROYED || self.state == DESTROYING) return self.destroy();

        // We have an error emit it
        if(err) {
          // Destroy the pool
          self.destroy();
          // Emit the error
          return self.emit(&#x27;error&#x27;, err);
        }
        // Set connected mode
        stateTransition(self, CONNECTED);

        // Move the active connection
        moveConnectionBetween(connection, self.connectingConnections, self.availableConnections);

        // Emit the connect event
        self.emit(&#x27;connect&#x27;, self);
      });
    });
  });

  // Add error handlers
  connection.once(&#x27;error&#x27;, connectionFailureHandler(this, &#x27;error&#x27;));
  connection.once(&#x27;close&#x27;, connectionFailureHandler(this, &#x27;close&#x27;));
  connection.once(&#x27;timeout&#x27;, connectionFailureHandler(this, &#x27;timeout&#x27;));
  connection.once(&#x27;parseError&#x27;, connectionFailureHandler(this, &#x27;parseError&#x27;));

  try {
    connection.connect();
  } catch(err) {
    // SSL or something threw on connect
    process.nextTick(function() {
      self.emit(&#x27;error&#x27;, err);
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  //       // _server.destroy();
  //       // test.done();
  //     });
  //   });
  // });
});

server.<span class="apidocCodeKeywordSpan">connect</span>();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.destroy" id="apidoc.element.mongodb-core.pool.prototype.destroy">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>destroy
        <span class="apidocSignatureSpan">(force)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (force) {
  var self = this;
  // Do not try again if the pool is already dead
  if(this.state == DESTROYED || self.state == DESTROYING) return;
  // Set state to destroyed
  stateTransition(this, DESTROYING);

  // Are we force closing
  if(force) {
    // Get all the known connections
    var connections = self.availableConnections
      .concat(self.inUseConnections)
      .concat(self.nonAuthenticatedConnections)
      .concat(self.connectingConnections);
    return destroy(self, connections);
  }

  // Clear out the reconnect if set
  if (this.reconnectId) {
    clearTimeout(this.reconnectId);
  }

  // If we have a reconnect connection running, close
  // immediately
  if (this.reconnectConnection) {
    this.reconnectConnection.destroy();
  }

  // Wait for the operations to drain before we close the pool
  function checkStatus() {
    flushMonitoringOperations(self.queue);

    if(self.queue.length == 0) {
      // Get all the known connections
      var connections = self.availableConnections
        .concat(self.inUseConnections)
        .concat(self.nonAuthenticatedConnections)
        .concat(self.connectingConnections);

      // Check if we have any in flight operations
      for(var i = 0; i &#x3c; connections.length; i++) {
        // There is an operation still in flight, reschedule a
        // check waiting for it to drain
        if(connections[i].workItems.length &#x3e; 0) {
          return setTimeout(checkStatus, 1);
        }
      }

      destroy(self, connections);
    // } else if (self.queue.length &#x3e; 0 &#x26;&#x26; !this.reconnectId) {

    } else {
      // Ensure we empty the queue
      _execute(self)();
      // Set timeout
      setTimeout(checkStatus, 1);
    }
  }

  // Initiate drain of operations
  checkStatus();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//         console.log(&#x22;=========== joined :: &#x22; + _t + &#x22; :: &#x22; + _server.name)
//         executeCursors(_server, function() {
//         });
//       }
//     })
//
//     // var s = _server.s.replicaSetState.secondaries[0];
//     // s.<span class="apidocCodeKeywordSpan">destroy</span>({emitClose:true});
//     executeCursors(_server, function() {
//       console.log(&#x22;============== 0&#x22;)
//       // Attempt to force a server reconnect
//       var s = _server.s.replicaSetState.secondaries[0];
//       name = s.name;
//       s.destroy({emitClose:true});
//       // console.log(&#x22;============== 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.get" id="apidoc.element.mongodb-core.pool.prototype.get">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {
  return this.allConnections()[0];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return;
}

// Adjust the count
count = count - 1;

// Do we already have server connection available for this host
var _server = _self.s.replicaSetState.<span class="apidocCodeKeywordSpan">get</span>(_host);

// Check if we have a known server connection and reuse
if(_server) {
  return pingServer(_self, _server, function(err) {
    if(self.state == DESTROYED || self.state == UNREFERENCED) {
      clearInterval(intervalId);
      return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.isConnected" id="apidoc.element.mongodb-core.pool.prototype.isConnected">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>isConnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isConnected = function () {
  // We are in a destroyed state
  if(this.state == DESTROYED || this.state == DESTROYING) {
    return false;
  }

  // Get connections
  var connections = this.availableConnections
    .concat(this.inUseConnections);

  // Check if we have any connected connections
  for(var i = 0; i &#x3c; connections.length; i++) {
    if(connections[i].isConnected()) return true;
  }

  // Might be authenticating, but we are still connected
  if(connections.length == 0 &#x26;&#x26; this.authenticating) {
    return true
  }

  // Not connected
  return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// We have a dead and killed cursor, attempting to call next should error
if(isCursorDeadAndKilled(self, callback)) return;

// We have just started the cursor
if(!self.cursorState.init) {
  // Topology is not connected, save the call in the provided store to be
  // Executed at some point when the handler deems it&#x27;s reconnected
  if(!self.topology.<span class="apidocCodeKeywordSpan">isConnected</span>(self.options) &#x26;&#x26; self.disconnectHandler !=
null) {
    if (self.topology.isDestroyed()) {
      // Topology was destroyed, so don&#x27;t try to wait for it to reconnect
      return callback(new MongoError(&#x27;Topology was destroyed&#x27;));
    }
    return self.disconnectHandler.addObjectAndMethod(&#x27;cursor&#x27;, self, &#x27;next&#x27;, [callback], callback);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.isDestroyed" id="apidoc.element.mongodb-core.pool.prototype.isDestroyed">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>isDestroyed
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDestroyed = function () {
  return this.state == DESTROYED || this.state == DESTROYING;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * Validate if the pool is dead and return error
 */
var isConnectionDead = function(self, callback) {
if(self.pool
  &#x26;&#x26; self.pool.<span class="apidocCodeKeywordSpan">isDestroyed</span>()) {
  self.cursorState.notified = true;
  self.cursorState.killed = true;
  self.cursorState.documents = [];
  self.cursorState.cursorIndex = 0;
  callback(MongoError.create(f(&#x27;connection to host %s:%s was destroyed&#x27;, self.pool.host, self.pool.port)))
  return true;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.isDisconnected" id="apidoc.element.mongodb-core.pool.prototype.isDisconnected">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>isDisconnected
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDisconnected = function () {
  return this.state == DISCONNECTED;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var self = this;
options = options || {};

// Set the connections
if(serverAccounting) servers[this.id] = this;

// Do not allow connect to be called on anything that&#x27;s not disconnected
if(self.s.pool &#x26;&#x26; !self.s.pool.<span class="apidocCodeKeywordSpan">isDisconnected</span>() &#x26;&#x26; !self.s.pool.isDestroyed
()) {
  throw MongoError.create(f(&#x27;server instance in invalid state %s&#x27;, self.s.state));
}

// Create a pool
self.s.pool = new Pool(assign(self.s.options, options, {bson: this.s.bson}));

// Set up listeners
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.logout" id="apidoc.element.mongodb-core.pool.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName, callback) {
  var self = this;
  if(typeof dbName != &#x27;string&#x27;) {
    throw new MongoError(&#x27;logout method requires a db name as first argument&#x27;);
  }

  if(typeof callback != &#x27;function&#x27;) {
    throw new MongoError(&#x27;logout method requires a callback&#x27;);
  }

  // Indicate logout in process
  this.loggingout = true;

  // Get all relevant connections
  var connections = self.availableConnections.concat(self.inUseConnections);
  var count = connections.length;
  // Store any error
  var error = null;

  // Send logout command over all the connections
  for(var i = 0; i &#x3c; connections.length; i++) {
    write(self)(connections[i], new Query(this.options.bson
      , f(&#x27;%s.$cmd&#x27;, dbName)
      , {logout:1}, {numberToSkip: 0, numberToReturn: 1}), function(err) {
      count = count - 1;
      if(err) error = err;

      if(count == 0) {
        self.loggingout = false;
        callback(error);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.socketCount" id="apidoc.element.mongodb-core.pool.prototype.socketCount">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>socketCount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">socketCount = function () {
  return this.availableConnections.length
    + this.inUseConnections.length;
    // + this.connectingConnections.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  self.destroy(true);
  // Emit close event
  return self.emit(&#x27;close&#x27;, self);
}
    }

    // No more socket available propegate the event
    if(self.<span class="apidocCodeKeywordSpan">socketCount</span>() == 0) {
if(self.state != DESTROYED &#x26;&#x26; self.state != DESTROYING) {
  stateTransition(self, DISCONNECTED);
}

// Do not emit error events, they are always close events
// do not trigger the low level error handler in node
event = event == &#x27;error&#x27; ? &#x27;close&#x27; : event;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.unref" id="apidoc.element.mongodb-core.pool.prototype.unref">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>unref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unref = function () {
  // Get all the known connections
  var connections = this.availableConnections
    .concat(this.inUseConnections)
    .concat(this.connectingConnections);
  connections.forEach(function(c) {
    c.unref();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Unref this connection
 * @method
 * @return {boolean}
 */
Connection.prototype.unref = function() {
  if (this.connection) this.connection.<span class="apidocCodeKeywordSpan">unref</span>();
  else {
    var self = this;
    this.once(&#x27;connect&#x27;, function() {
      self.connection.unref();
    });
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.pool.prototype.write" id="apidoc.element.mongodb-core.pool.prototype.write">
        function <span class="apidocSignatureSpan">mongodb-core.pool.prototype.</span>write
        <span class="apidocSignatureSpan">(commands, options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (commands, options, cb) {
  var self = this;
  // Ensure we have a callback
  if(typeof options == &#x27;function&#x27;) {
    cb = options;
  }

  // Always have options
  options = options || {};

  // Pool was destroyed error out
  if(this.state == DESTROYED || this.state == DESTROYING) {
    // Callback with an error
    if(cb) {
      try {
        cb(new MongoError(&#x27;pool destroyed&#x27;));
      } catch(err) {
        process.nextTick(function() {
          throw err;
        });
      }
    }

    return;
  }

  if(this.options.domainsEnabled
    &#x26;&#x26; process.domain &#x26;&#x26; typeof cb === &#x22;function&#x22;) {
    // if we have a domain bind to it
    var oldCb = cb;
    cb = process.domain.bind(function() {
      // v8 - argumentsToArray one-liner
      var args = new Array(arguments.length); for(var i = 0; i &#x3c; arguments.length; i++) { args[i] = arguments[i]; }
      // bounce off event loop so domain switch takes place
      process.nextTick(function() {
        oldCb.apply(null, args);
      });
    });
  }

  // Do we have an operation
  var operation = {
    cb: cb, raw: false, promoteLongs: true, promoteValues: true, promoteBuffers: false, fullResult: false
  };

  var buffer = null

  if(Array.isArray(commands)) {
    buffer = [];

    for(var i = 0; i &#x3c; commands.length; i++) {
      buffer.push(commands[i].toBin());
    }

    // Get the requestId
    operation.requestId = commands[commands.length - 1].requestId;
  } else {
    operation.requestId = commands.requestId;
    buffer = commands.toBin();
  }

  // Set the buffers
  operation.buffer = buffer;

  // Set the options for the parsing
  operation.promoteLongs = typeof options.promoteLongs == &#x27;boolean&#x27; ? options.promoteLongs : true;
  operation.promoteValues = typeof options.promoteValues == &#x27;boolean&#x27; ? options.promoteValues : true;
  operation.promoteBuffers = typeof options.promoteBuffers == &#x27;boolean&#x27; ? options.promoteBuffers : false;
  operation.raw = typeof options.raw == &#x27;boolean&#x27; ? options.raw : false;
  operation.immediateRelease = typeof options.immediateRelease == &#x27;boolean&#x27; ? options.immediateRelease : false;
  operation.documentsReturnedIn = options.documentsReturnedIn;
  operation.command = typeof options.command == &#x27;boolean&#x27; ? options.command : false;
  operation.fullResult = typeof options.fullResult == &#x27;boolean&#x27; ? options.fullResult : false;
  operation.noResponse = typeof options.noResponse == &#x27;boolean&#x27; ? options.noResponse : false;
  // operation.requestId = options.requestId;

  // Optional per operation socketTimeout
  operation.socketTimeout = options.socketTimeout;
  operation.monitoring = options.monitoring;
  // Custom socket Timeout
  if(options.socketTimeout) {
    operation.socketTimeout = options.socketTimeout;
  }

  // We need to have a callback function unless the message returns no response
  if(!(typeof cb == &#x27;function&#x27;) &#x26;&#x26; !options.noResponse) {
    throw new MongoError(&#x27;write method must provide a callback&#x27;);
  }

  // If we have a monitoring operation schedule as the very first operation
  // Otherwise add to back of queue
  if(options.monitoring) {
    this.queue.unshift(operation);
  } else {
    this.queue.push(operation);
  }

  // Attempt to execute the operation
  if(!self.executing) {
    process.nextTick(function() {
      _execute(self)();
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// Add promote values if defined
if(typeof self.cursorState.promoteBuffers == &#x27;boolean&#x27;) {
  queryOptions.promoteBuffers = self.cursorState.promoteBuffers;
}
// Write the initial command out
self.server.s.pool.<span class="apidocCodeKeywordSpan">write</span>(self.query, queryOptions, queryCallback);
}

Cursor.prototype._getmore = function(callback) {
if(this.logger.isDebug()) this.logger.debug(f(&#x27;schedule getMore call for query [%s]&#x27;, JSON.stringify(this.query)))
// Determine if it&#x27;s a raw query
var raw = this.options.raw || this.cmd.raw;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.replset_state" id="apidoc.module.mongodb-core.replset_state">module mongodb-core.replset_state</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.replset_state" id="apidoc.element.mongodb-core.replset_state.replset_state">
        function <span class="apidocSignatureSpan">mongodb-core.</span>replset_state
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replset_state = function (options) {
  options = options || {};
  // Add event listener
  EventEmitter.call(this);
  // Topology state
  this.topologyType = TopologyType.ReplicaSetNoPrimary;
  this.setName = options.setName;

  // Server set
  this.set = {};

  // Unpacked options
  this.id = options.id;
  this.setName = options.setName;

  // Replicaset logger
  this.logger = options.logger || Logger(&#x27;ReplSet&#x27;, options);

  // Server selection index
  this.index = 0;
  // Acceptable latency
  this.acceptableLatency = options.acceptableLatency || 15;

  // heartbeatFrequencyMS
  this.heartbeatFrequencyMS = options.heartbeatFrequencyMS || 10000;

  // Server side
  this.primary = null;
  this.secondaries = [];
  this.arbiters = [];
  this.passives = [];
  this.ghosts = [];
  // Current unknown hosts
  this.unknownServers = [];
  // In set status
  this.set = {};
  // Status
  this.maxElectionId = null;
  this.maxSetVersion = 0;
  // Description of the Replicaset
  this.replicasetDescription = {
    &#x22;topologyType&#x22;: &#x22;Unknown&#x22;, &#x22;servers&#x22;: []
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.super_" id="apidoc.element.mongodb-core.replset_state.super_">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.replset_state.prototype" id="apidoc.module.mongodb-core.replset_state.prototype">module mongodb-core.replset_state.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.allServers" id="apidoc.element.mongodb-core.replset_state.prototype.allServers">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>allServers
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">allServers = function (options) {
  options = options || {};
  var servers = this.primary ? [this.primary] : [];
  servers = servers.concat(this.secondaries);
  if(!options.ignoreArbiters) servers = servers.concat(this.arbiters);
  servers = servers.concat(this.passives);
  return servers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Unref all connections belong to this server
 * @method
 */
ReplSet.prototype.unref = function() {
  // Transition state
  stateTransition(this, UNREFERENCED);

  this.s.replicaSetState.<span class="apidocCodeKeywordSpan">allServers</span>().forEach(function(x) {
    x.unref();
  });

  clearTimeout(this.haTimeoutId);
}

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.destroy" id="apidoc.element.mongodb-core.replset_state.prototype.destroy">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>destroy
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (options) {
  // Destroy all sockets
  if(this.primary) this.primary.destroy(options);
  this.secondaries.forEach(function(x) { x.destroy(options); });
  this.arbiters.forEach(function(x) { x.destroy(options); });
  this.passives.forEach(function(x) { x.destroy(options); });
  this.ghosts.forEach(function(x) { x.destroy(options); });
  // Clear out the complete state
  this.secondaries = [];
  this.arbiters = [];
  this.passives = [];
  this.ghosts = [];
  this.unknownServers = [];
  this.set = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//         console.log(&#x22;=========== joined :: &#x22; + _t + &#x22; :: &#x22; + _server.name)
//         executeCursors(_server, function() {
//         });
//       }
//     })
//
//     // var s = _server.s.replicaSetState.secondaries[0];
//     // s.<span class="apidocCodeKeywordSpan">destroy</span>({emitClose:true});
//     executeCursors(_server, function() {
//       console.log(&#x22;============== 0&#x22;)
//       // Attempt to force a server reconnect
//       var s = _server.s.replicaSetState.secondaries[0];
//       name = s.name;
//       s.destroy({emitClose:true});
//       // console.log(&#x22;============== 1&#x22;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.get" id="apidoc.element.mongodb-core.replset_state.prototype.get">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>get
        <span class="apidocSignatureSpan">(host)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (host) {
  var servers = this.allServers();

  for(var i = 0; i &#x3c; servers.length; i++) {
    if(servers[i].name.toLowerCase() === host.toLowerCase()) {
      return servers[i];
    }
  }

  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return;
}

// Adjust the count
count = count - 1;

// Do we already have server connection available for this host
var _server = _self.s.replicaSetState.<span class="apidocCodeKeywordSpan">get</span>(_host);

// Check if we have a known server connection and reuse
if(_server) {
  return pingServer(_self, _server, function(err) {
    if(self.state == DESTROYED || self.state == UNREFERENCED) {
      clearInterval(intervalId);
      return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.hasPrimary" id="apidoc.element.mongodb-core.replset_state.prototype.hasPrimary">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasPrimary
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasPrimary = function () {
  return this.primary != null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

function rexecuteOperations(self) {
  // If we have a primary and a disconnect handler, execute
  // buffered operations
  if(self.s.replicaSetState.hasPrimaryAndSecondary() &#x26;&#x26; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute();
  } else if(self.s.replicaSetState.<span class="apidocCodeKeywordSpan">hasPrimary</span>() &#x26;&#x26; self.s.disconnectHandler
) {
    self.s.disconnectHandler.execute({ executePrimary:true });
  } else if(self.s.replicaSetState.hasSecondary() &#x26;&#x26; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute({ executeSecondary:true });
  }
}

function connectNewServers(self, servers, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.hasPrimaryAndSecondary" id="apidoc.element.mongodb-core.replset_state.prototype.hasPrimaryAndSecondary">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasPrimaryAndSecondary
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasPrimaryAndSecondary = function () {
  return this.primary != null &#x26;&#x26; this.secondaries.length &#x3e; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return BSON.native ? &#x22;c++&#x22; : &#x22;js&#x22;;
  }
});

function rexecuteOperations(self) {
  // If we have a primary and a disconnect handler, execute
  // buffered operations
  if(self.s.replicaSetState.<span class="apidocCodeKeywordSpan">hasPrimaryAndSecondary</span>() &#x26;&#x26; self.s.disconnectHandler
) {
    self.s.disconnectHandler.execute();
  } else if(self.s.replicaSetState.hasPrimary() &#x26;&#x26; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute({ executePrimary:true });
  } else if(self.s.replicaSetState.hasSecondary() &#x26;&#x26; self.s.disconnectHandler) {
    self.s.disconnectHandler.execute({ executeSecondary:true });
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.hasPrimaryOrSecondary" id="apidoc.element.mongodb-core.replset_state.prototype.hasPrimaryOrSecondary">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasPrimaryOrSecondary
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasPrimaryOrSecondary = function () {
  return this.hasPrimary() || this.hasSecondary();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.hasSecondary" id="apidoc.element.mongodb-core.replset_state.prototype.hasSecondary">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>hasSecondary
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasSecondary = function () {
  return this.secondaries.length &#x3e; 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function rexecuteOperations(self) {
// If we have a primary and a disconnect handler, execute
// buffered operations
if(self.s.replicaSetState.hasPrimaryAndSecondary() &#x26;&#x26; self.s.disconnectHandler) {
  self.s.disconnectHandler.execute();
} else if(self.s.replicaSetState.hasPrimary() &#x26;&#x26; self.s.disconnectHandler) {
  self.s.disconnectHandler.execute({ executePrimary:true });
} else if(self.s.replicaSetState.<span class="apidocCodeKeywordSpan">hasSecondary</span>() &#x26;&#x26; self.s.disconnectHandler
) {
  self.s.disconnectHandler.execute({ executeSecondary:true });
}
}

function connectNewServers(self, servers, callback) {
// Count lefts
var count = servers.length;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.pickServer" id="apidoc.element.mongodb-core.replset_state.prototype.pickServer">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>pickServer
        <span class="apidocSignatureSpan">(readPreference)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pickServer = function (readPreference) {
  // If no read Preference set to primary by default
  readPreference = readPreference || ReadPreference.primary;

  // maxStalenessSeconds is not allowed with a primary read
  if(readPreference.preference == &#x27;primary&#x27; &#x26;&#x26; readPreference.maxStalenessSeconds != null) {
    return new MongoError(&#x27;primary readPreference incompatible with maxStalenessSeconds&#x27;);
  }

  // Check if we have any non compatible servers for maxStalenessSeconds
  var allservers = this.primary ? [this.primary] : [];
  allservers = allservers.concat(this.secondaries);

  // Does any of the servers not support the right wire protocol version
  // for maxStalenessSeconds when maxStalenessSeconds specified on readPreference. Then error out
  if(readPreference.maxStalenessSeconds != null) {
    for(var i = 0; i &#x3c; allservers.length; i++) {
      if(allservers[i].ismaster.maxWireVersion &#x3c; 5) {
        return new MongoError(&#x27;maxStalenessSeconds not supported by at least one of the replicaset members&#x27;);
      }
    }
  }

  // Do we have the nearest readPreference
  if(readPreference.preference == &#x27;nearest&#x27; &#x26;&#x26; readPreference.maxStalenessSeconds == null) {
    return pickNearest(this, readPreference);
  } else if(readPreference.preference == &#x27;nearest&#x27; &#x26;&#x26; readPreference.maxStalenessSeconds != null) {
    return pickNearestMaxStalenessSeconds(this, readPreference);
  }

  // Get all the secondaries
  var secondaries = this.secondaries;

  // Check if we can satisfy and of the basic read Preferences
  if(readPreference.equals(ReadPreference.secondary)
    &#x26;&#x26; secondaries.length == 0) {
      return new MongoError(&#x22;no secondary server available&#x22;);
    }

  if(readPreference.equals(ReadPreference.secondaryPreferred)
    &#x26;&#x26; secondaries.length == 0
    &#x26;&#x26; this.primary == null) {
      return new MongoError(&#x22;no secondary or primary server available&#x22;);
    }

  if(readPreference.equals(ReadPreference.primary)
    &#x26;&#x26; this.primary == null) {
      return new MongoError(&#x22;no primary server available&#x22;);
    }

  // Secondary preferred or just secondaries
  if(readPreference.equals(ReadPreference.secondaryPreferred)
    || readPreference.equals(ReadPreference.secondary)) {

    if(secondaries.length &#x3e; 0 &#x26;&#x26; readPreference.maxStalenessSeconds == null) {
      // Pick nearest of any other servers available
      var server = pickNearest(this, readPreference);
      // No server in the window return primary
      if(server) {
        return server;
      }
    } else if(secondaries.length &#x3e; 0 &#x26;&#x26; readPreference.maxStalenessSeconds != null) {
      // Pick nearest of any other servers available
      server = pickNearestMaxStalenessSeconds(this, readPreference);
      // No server in the window return primary
      if(server) {
        return server;
      }
    }

    if(readPreference.equals(ReadPreference.secondaryPreferred)){
      return this.primary;
    }

    return null;
  }

  // Primary preferred
  if(readPreference.equals(ReadPreference.primaryPreferred)) {
    server = null;

    // We prefer the primary if it&#x27;s available
    if(this.primary) {
      return this.primary;
    }

    // Pick a secondary
    if(secondaries.length &#x3e; 0 &#x26;&#x26; readPreference.maxStalenessSeconds == null) {
      server = pickNearest(this, readPreference);
    } else if(secondaries.length &#x3e; 0 &#x26;&#x26; readPreference.maxStalenessSeconds != null) {
      server = pickNearestMaxStalenessSeconds(this, readPreference);
    }

    //  Did we find a server
    if(server) return server;
  }

  // Return the primary
  return this.primary;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {ReadPreference} [options.readPreference] Specify read preference if command supports it
* @return {Server}
*/
ReplSet.prototype.getServer = function(options) {
 // Ensure we have no options
 options = options || {};
 // Pick the right server baspickServerd on readPreference
 var server = this.s.replicaSetState.<span class="apidocCodeKeywordSpan">pickServer</span>(options.readPreference);
 if(this.s.debug) this.emit(&#x27;pickedServer&#x27;, options.readPreference, server);
 return server;
}

/**
* Get a direct connection
* @method
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.remove" id="apidoc.element.mongodb-core.replset_state.prototype.remove">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>remove
        <span class="apidocSignatureSpan">(server, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (server, options) {
  options = options || {};

  // Get the server name and lowerCase it
  var serverName = server.name.toLowerCase();

  // Only remove if the current server is not connected
  var servers = this.primary ? [this.primary] : [];
  servers = servers.concat(this.secondaries);
  servers = servers.concat(this.arbiters);
  servers = servers.concat(this.passives);

  // Check if it&#x27;s active and this is just a failed connection attempt
  for(var i = 0; i &#x3c; servers.length; i++) {
    if(!options.force
      &#x26;&#x26; servers[i].equals(server)
      &#x26;&#x26; servers[i].isConnected
      &#x26;&#x26; servers[i].isConnected()) {
      return;
    }
  }

  // If we have it in the set remove it
  if(this.set[serverName]) {
    this.set[serverName].type = ServerType.Unknown;
    this.set[serverName].electionId = null;
    this.set[serverName].setName = null;
    this.set[serverName].setVersion = null;
  }

  // Remove type
  var removeType = null;

  // Remove from any lists
  if(this.primary &#x26;&#x26; this.primary.equals(server)) {
    this.primary = null;
    this.topologyType = TopologyType.ReplicaSetNoPrimary;
    removeType = &#x27;primary&#x27;;
  }

  // Remove from any other server lists
  removeType = removeFrom(server, this.secondaries) ? &#x27;secondary&#x27; : removeType;
  removeType = removeFrom(server, this.arbiters) ? &#x27;arbiter&#x27; : removeType;
  removeType = removeFrom(server, this.passives) ? &#x27;secondary&#x27; : removeType;
  removeFrom(server, this.ghosts);
  removeFrom(server, this.unknownServers);

  // Push to unknownServers
  this.unknownServers.push(serverName);

  // Do we have a removeType
  if(removeType) {
    this.emit(&#x27;left&#x27;, removeType, server);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }], {
writeConcern: {w:1}, ordered:true
      }, function(err, results) {
assert.equal(null, err);
assert.equal(1, results.result.n);

// Remove a document
_server.<span class="apidocCodeKeywordSpan">remove</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, limit: 1
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.update" id="apidoc.element.mongodb-core.replset_state.prototype.update">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>update
        <span class="apidocSignatureSpan">(server)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (server) {
  var self = this;
  // Get the current ismaster
  var ismaster = server.lastIsMaster();

  // Get the server name and lowerCase it
  var serverName = server.name.toLowerCase();

  //
  // Add any hosts
  //
  if(ismaster) {
    // Join all the possible new hosts
    var hosts = Array.isArray(ismaster.hosts) ? ismaster.hosts : [];
    hosts = hosts.concat(Array.isArray(ismaster.arbiters) ? ismaster.arbiters : []);
    hosts = hosts.concat(Array.isArray(ismaster.passives) ? ismaster.passives : []);
    hosts = hosts.map(function(s) { return s.toLowerCase() });

    // Add all hosts as unknownServers
    for(var i = 0; i &#x3c; hosts.length; i++) {
      // Add to the list of unknown server
      if(this.unknownServers.indexOf(hosts[i]) == -1
        &#x26;&#x26; (!this.set[hosts[i]] || this.set[hosts[i]].type == ServerType.Unknown)) {
        this.unknownServers.push(hosts[i].toLowerCase());
      }

      if(!this.set[hosts[i]]) {
        this.set[hosts[i]] = {
          type: ServerType.Unknown,
          electionId: null,
          setName: null,
          setVersion: null
        }
      }
    }
  }

  //
  // Unknown server
  //
  if(!ismaster &#x26;&#x26; !inList(ismaster, server, this.unknownServers)) {
    self.set[serverName] = {
      type: ServerType.Unknown, setVersion: null, electionId: null, setName: null
    }
    // Update set information about the server instance
    self.set[serverName].type = ServerType.Unknown;
    self.set[serverName].electionId = ismaster ? ismaster.electionId : ismaster;
    self.set[serverName].setName = ismaster ? ismaster.setName : ismaster;
    self.set[serverName].setVersion = ismaster ? ismaster.setVersion : ismaster;

    if(self.unknownServers.indexOf(server.name) == -1) {
      self.unknownServers.push(serverName);
    }

    // Set the topology
    return false;
  }

  //
  // Is this a mongos
  //
  if(ismaster &#x26;&#x26; ismaster.msg == &#x27;isdbgrid&#x27;) {
    return false;
  }

  // A RSOther instance
  if((ismaster.setName &#x26;&#x26; ismaster.hidden)
    || (ismaster.setName &#x26;&#x26; !ismaster.ismaster &#x26;&#x26; !ismaster.secondary &#x26;&#x26; !ismaster.arbiterOnly &#x26;&#x26; !ismaster.passive)) {
    self.set[serverName] = {
      type: ServerType.RSOther, setVersion: null,
      electionId: null, setName: ismaster.setName
    }
    // Set the topology
    this.topologyType = this.primary ? TopologyType.ReplicaSetWithPrimary : TopologyType.ReplicaSetNoPrimary;
    if(ismaster.setName) this.setName = ismaster.setName;
    return false;
  }

  // A RSGhost instance
  if(ismaster.isreplicaset) {
    self.set[serverName] = {
      type: ServerType.RSGhost, setVersion: null,
      electionId: null, setName: null
    }

    // Set the topology
    this.topologyType = this.primary ? TopologyType.ReplicaSetWithPrimary : TopologyType.ReplicaSetNoPrimary;
    if(ismaster.setName) this.setName = ismaster.setName;

    // Set the topology
    return false;
  }

  //
  // Standalone server, destroy and return
  //
  if(ismaster &#x26;&#x26; ismaster.ismaster &#x26;&#x26; !ismaster.setName) {
    this.topologyType = this.primary ? TopologyType.ReplicaSetWithPrimary : TopologyType.Unknown;
    this.remove(server, {force:true});
    return false;
  }

  //
  // Server in maintanance mode
  //
  if(ismaster &#x26;&#x26; !ismaster.ismaster &#x26;&#x26; !ismaster.secondary &#x26;&#x26; !ismaster.arbiterOnly) {
    this.remove(server, {force:true});
    return false;
  }

  //
  // If the .me field does not match the passed in server
  //
  if(ismaster.me &#x26;&#x26; ismaster.me.toLowerCase() != serverName) {
    if(this.logger.isWarn()) {
      this.logger.warn(f(&#x27;the seedlist server was removed due to its address %s not matching its ismaster.me address %s&#x27;, server
.name, ismaster.me));
    }

    // Delete from the set
    delete this.set[serverName];
    // Delete unknown servers
    removeFrom(server, self.unknownServers);

    // Destroy the instance
    server.destroy();

    // Set the type of topology we have
    if(this.primary &#x26;&#x26; !this.primary.equals(server)) {
      this.topologyType = TopologyType.ReplicaSetWithPrimary;
    } else {
      this.topologyType = TopologyType.ReplicaSetNoPrimar ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _server.insert(&#x27;myproject.inserts1&#x27;, [{a:1}, {a:2}], {
writeConcern: {w:1}, ordered:true
    }, function(err, results) {
assert.equal(null, err);
assert.equal(2, results.result.n);

// Perform a document update
_server.<span class="apidocCodeKeywordSpan">update</span>(&#x27;myproject.inserts1&#x27;, [{
  q: {a: 1}, u: {&#x27;$set&#x27;: {b:1}}
}], {
  writeConcern: {w:1}, ordered:true
}, function(err, results) {
  assert.equal(null, err);
  assert.equal(1, results.result.n);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.updateSecondariesMaxStaleness" id="apidoc.element.mongodb-core.replset_state.prototype.updateSecondariesMaxStaleness">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>updateSecondariesMaxStaleness
        <span class="apidocSignatureSpan">(haInterval)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateSecondariesMaxStaleness = function (haInterval) {
  for(var i = 0; i &#x3c; this.secondaries.length; i++) {
    this.updateServerMaxStaleness(this.secondaries[i], haInterval);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.replset_state.prototype.updateServerMaxStaleness" id="apidoc.element.mongodb-core.replset_state.prototype.updateServerMaxStaleness">
        function <span class="apidocSignatureSpan">mongodb-core.replset_state.prototype.</span>updateServerMaxStaleness
        <span class="apidocSignatureSpan">(server, haInterval)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateServerMaxStaleness = function (server, haInterval) {
  // Locate the max secondary lastwrite
  var max = 0;
  // Go over all secondaries
  for(var i = 0; i &#x3c; this.secondaries.length; i++) {
    max = Math.max(max, this.secondaries[i].lastWriteDate);
  }

  // Perform this servers staleness calculation
  if(server.ismaster.maxWireVersion &#x3e;= 5
    &#x26;&#x26; server.ismaster.secondary
    &#x26;&#x26; this.hasPrimary()) {
    server.staleness = (server.lastUpdateTime - server.lastWriteDate)
      - (this.primary.lastUpdateTime - this.primary.lastWriteDate)
      + haInterval;
  } else if(server.ismaster.maxWireVersion &#x3e;= 5
    &#x26;&#x26; server.ismaster.secondary){
    server.staleness = max - server.lastWriteDate + haInterval;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }

      // Server heart beat event
      emitSDAMEvent(self, &#x27;serverHeartbeatSucceeded&#x27;, { durationMS: latencyMS, reply: r.result, connectionId: server.name
 });
    }

    // Calculate the stalness for this server
    self.s.replicaSetState.<span class="apidocCodeKeywordSpan">updateServerMaxStaleness</span>(server, self.s.haInterval);

    // Callback
    cb(err, r);
  });
}

function topologyMonitor(self, options) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.shared" id="apidoc.module.mongodb-core.shared">module mongodb-core.shared</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.shared.assign" id="apidoc.element.mongodb-core.shared.assign">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>assign
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function assign() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.clone" id="apidoc.element.mongodb-core.shared.clone">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>clone
        <span class="apidocSignatureSpan">(object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(object) {
  return JSON.parse(JSON.stringify(object));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.cloneOptions" id="apidoc.element.mongodb-core.shared.cloneOptions">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>cloneOptions
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cloneOptions = function (options) {
  var opts = {};
  for(var name in options) {
    opts[name] = options[name];
  }
  return opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.createClientInfo" id="apidoc.element.mongodb-core.shared.createClientInfo">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>createClientInfo
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createClientInfo(options) {
  // Build default client information
  var clientInfo = options.clientInfo ? clone(options.clientInfo) : {
    driver: {
      name: &#x22;nodejs-core&#x22;,
      version: driverVersion
    },
    os: {
      type: type,
      name: name,
      architecture: architecture,
      version: release
    }
  }

  // Is platform specified
  if(clientInfo.platform &#x26;&#x26; clientInfo.platform.indexOf(&#x27;mongodb-core&#x27;) == -1) {
    clientInfo.platform = f(&#x27;%s, mongodb-core: %s&#x27;, clientInfo.platform, driverVersion);
  } else if(!clientInfo.platform){
    clientInfo.platform = nodejsversion;
  }

  // Do we have an application specific string
  if(options.appname) {
    // Cut at 128 bytes
    var buffer = new Buffer(options.appname);
    // Return the truncated appname
    var appname = buffer.length &#x3e; 128 ? buffer.slice(0, 128).toString(&#x27;utf8&#x27;) : options.appname;
    // Add to the clientInfo
    clientInfo.application = { name: appname };
  }

  return clientInfo;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.emitServerDescriptionChanged" id="apidoc.element.mongodb-core.shared.emitServerDescriptionChanged">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>emitServerDescriptionChanged
        <span class="apidocSignatureSpan">(self, description)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitServerDescriptionChanged = function (self, description) {
  if(self.listeners(&#x27;serverDescriptionChanged&#x27;).length &#x3e; 0) {
    // Emit the server description changed events
    self.emit(&#x27;serverDescriptionChanged&#x27;, {
      topologyId: self.s.topologyId != -1 ? self.s.topologyId : self.id, address: self.name,
      previousDescription: getPreviousDescription(self),
      newDescription: description
    });

    self.s.serverDescription = description;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
self.wireProtocolHandler = configureWireProtocolHandler(self, self.ismaster);
// Have we defined self monitoring
if(self.s.monitoring) {
  self.monitoringProcessId = setTimeout(monitoringProcess(self), self.s.monitoringInterval);
}

// Emit server description changed if something listening
sdam.<span class="apidocCodeKeywordSpan">emitServerDescriptionChanged</span>(self, {
  address: self.name, arbiters: [], hosts: [], passives: [], type: !self.s.inTopology ? &#x27;Standalone&#x27; : sdam.getTopologyType
(self)
});

// Emit topology description changed if something listening
sdam.emitTopologyDescriptionChanged(self, {
  topologyType: &#x27;Single&#x27;, servers: [{address: self.name, arbiters: [], hosts: [], passives: [], type: &#x27;Standalone
&#x27;}]
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.emitTopologyDescriptionChanged" id="apidoc.element.mongodb-core.shared.emitTopologyDescriptionChanged">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>emitTopologyDescriptionChanged
        <span class="apidocSignatureSpan">(self, description)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitTopologyDescriptionChanged = function (self, description) {
  if(self.listeners(&#x27;topologyDescriptionChanged&#x27;).length &#x3e; 0) {
    // Emit the server description changed events
    self.emit(&#x27;topologyDescriptionChanged&#x27;, {
      topologyId: self.s.topologyId != -1 ? self.s.topologyId : self.id, address: self.name,
      previousDescription: getPreviousTopologyDescription(self),
      newDescription: description
    });

    self.s.serverDescription = description;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Emit server description changed if something listening
sdam.emitServerDescriptionChanged(self, {
  address: self.name, arbiters: [], hosts: [], passives: [], type: !self.s.inTopology ? &#x27;Standalone&#x27; : sdam.getTopologyType
(self)
});

// Emit topology description changed if something listening
sdam.<span class="apidocCodeKeywordSpan">emitTopologyDescriptionChanged</span>(self, {
  topologyType: &#x27;Single&#x27;, servers: [{address: self.name, arbiters: [], hosts: [], passives: [], type: &#x27;Standalone
&#x27;}]
});

// Log the ismaster if available
if(self.s.logger.isInfo()) {
  self.s.logger.info(f(&#x27;server %s connected with ismaster [%s]&#x27;, self.name, JSON.stringify(self.ismaster)));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.getTopologyType" id="apidoc.element.mongodb-core.shared.getTopologyType">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>getTopologyType
        <span class="apidocSignatureSpan">(self, ismaster)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTopologyType = function (self, ismaster) {
  if(!ismaster) {
    ismaster = self.ismaster;
  }

  if(!ismaster) return &#x27;Unknown&#x27;;
  if(ismaster.ismaster &#x26;&#x26; !ismaster.hosts) return &#x27;Standalone&#x27;;
  if(ismaster.ismaster &#x26;&#x26; ismaster.msg == &#x27;isdbgrid&#x27;) return &#x27;Mongos&#x27;;
  if(ismaster.ismaster) return &#x27;RSPrimary&#x27;;
  if(ismaster.secondary) return &#x27;RSSecondary&#x27;;
  if(ismaster.arbiterOnly) return &#x27;RSArbiter&#x27;;
  return &#x27;Unknown&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Have we defined self monitoring
if(self.s.monitoring) {
  self.monitoringProcessId = setTimeout(monitoringProcess(self), self.s.monitoringInterval);
}

// Emit server description changed if something listening
sdam.emitServerDescriptionChanged(self, {
  address: self.name, arbiters: [], hosts: [], passives: [], type: !self.s.inTopology ? &#x27;Standalone&#x27; : sdam.<span class
="apidocCodeKeywordSpan">getTopologyType</span>(self)
});

// Emit topology description changed if something listening
sdam.emitTopologyDescriptionChanged(self, {
  topologyType: &#x27;Single&#x27;, servers: [{address: self.name, arbiters: [], hosts: [], passives: [], type: &#x27;Standalone
&#x27;}]
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.shared.inquireServerState" id="apidoc.element.mongodb-core.shared.inquireServerState">
        function <span class="apidocSignatureSpan">mongodb-core.shared.</span>inquireServerState
        <span class="apidocSignatureSpan">(self)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inquireServerState = function (self) {
  return function(callback) {
    if(self.s.state == &#x27;destroyed&#x27;) return;
    // Record response time
    var start = new Date().getTime();

    // emitSDAMEvent
    emitSDAMEvent(self, &#x27;serverHeartbeatStarted&#x27;, { connectionId: self.name });

    // Attempt to execute ismaster command
    self.command(&#x27;admin.$cmd&#x27;, { ismaster:true },  { monitoring:true }, function(err, r) {
      if(!err) {
        // Legacy event sender
        self.emit(&#x27;ismaster&#x27;, r, self);

        // Calculate latencyMS
        var latencyMS = new Date().getTime() - start;

        // Server heart beat event
        emitSDAMEvent(self, &#x27;serverHeartbeatSucceeded&#x27;, { durationMS: latencyMS, reply: r.result, connectionId: self.name });

        // Did the server change
        if(changedIsMaster(self, self.s.ismaster, r.result)) {
          // Emit server description changed if something listening
          emitServerDescriptionChanged(self, {
            address: self.name, arbiters: [], hosts: [], passives: [], type: !self.s.inTopology ? &#x27;Standalone&#x27; : getTopologyType
(self)
          });
        }

        // Updat ismaster view
        self.s.ismaster = r.result;

        // Set server response time
        self.s.isMasterLatencyMS = latencyMS;
      } else {
        emitSDAMEvent(self, &#x27;serverHeartbeatFailed&#x27;, { durationMS: latencyMS, failure: err, connectionId: self.name });
      }

      // Peforming an ismaster monitoring callback operation
      if(typeof callback == &#x27;function&#x27;) {
        return callback(err, r);
      }

      // Perform another sweep
      self.s.inquireServerStateTimeout = setTimeout(inquireServerState(self), self.s.haInterval);
    });
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.smoke_plugin" id="apidoc.module.mongodb-core.smoke_plugin">module mongodb-core.smoke_plugin</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.smoke_plugin.attachToRunner" id="apidoc.element.mongodb-core.smoke_plugin.attachToRunner">
        function <span class="apidocSignatureSpan">mongodb-core.smoke_plugin.</span>attachToRunner
        <span class="apidocSignatureSpan">(runner, outputFile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachToRunner = function (runner, outputFile) {
  var smokeOutput = { results : [] };
  var runningTests = {};

  var integraPlugin = {
    beforeTest: function(test, callback) {
      test.startTime = Date.now();
      runningTests[test.name] = test;
      callback();
    },
    afterTest: function(test, callback) {
      smokeOutput.results.push({
        status: test.status,
        start: test.startTime,
        end: Date.now(),
        test_file: test.name,
        exit_code: 0,
        url: &#x22;&#x22;
      });
      delete runningTests[test.name];
      callback();
    },
    beforeExit: function(obj, callback) {
      fs.writeFile(outputFile, JSON.stringify(smokeOutput), function() {
        callback();
      });
    }
  };

  // In case of exception, make sure we write file
  process.on(&#x27;uncaughtException&#x27;, function(err) {
    // Mark all currently running tests as failed
    for (var testName in runningTests) {
      smokeOutput.results.push({
        status: &#x22;fail&#x22;,
        start: runningTests[testName].startTime,
        end: Date.now(),
        test_file: testName,
        exit_code: 0,
        url: &#x22;&#x22;
      });
    }

    // write file
    fs.writeFileSync(outputFile, JSON.stringify(smokeOutput));

    // Standard NodeJS uncaught exception handler
    console.error(err.stack);
    process.exit(1);
  });

  runner.plugin(integraPlugin);
  return integraPlugin;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.sspi" id="apidoc.module.mongodb-core.sspi">module mongodb-core.sspi</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.sspi.sspi" id="apidoc.element.mongodb-core.sspi.sspi">
        function <span class="apidocSignatureSpan">mongodb-core.</span>sspi
        <span class="apidocSignatureSpan">(bson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sspi = function (bson) {
  this.bson = bson;
  this.authStore = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.sspi.prototype" id="apidoc.module.mongodb-core.sspi.prototype">module mongodb-core.sspi.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.sspi.prototype.auth" id="apidoc.element.mongodb-core.sspi.prototype.auth">
        function <span class="apidocSignatureSpan">mongodb-core.sspi.prototype.</span>auth
        <span class="apidocSignatureSpan">(server, connections, db, username, password, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auth = function (server, connections, db, username, password, options, callback) {
  var self = this;
  // We don&#x27;t have the Kerberos library
  if(Kerberos == null) return callback(new Error(&#x22;Kerberos library is not installed&#x22;));
  var gssapiServiceName = options[&#x27;gssapiServiceName&#x27;] || &#x27;mongodb&#x27;;
  // Total connections
  var count = connections.length;
  if(count == 0) return callback(null, null);

  // Valid connections
  var numberOfValidConnections = 0;
  var errorObject = null;

  // For each connection we need to authenticate
  while(connections.length &#x3e; 0) {
    // Execute MongoCR
    var execute = function(connection) {
      // Start Auth process for a connection
      SSIPAuthenticate(self, username, password, gssapiServiceName, server, connection, options, function(err, r) {
        // Adjust count
        count = count - 1;

        // If we have an error
        if(err) {
          errorObject = err;
        } else if(r &#x26;&#x26; typeof r == &#x27;object&#x27; &#x26;&#x26; r.result[&#x27;$err&#x27;]) {
          errorObject = r.result;
        } else if(r &#x26;&#x26; typeof r == &#x27;object&#x27; &#x26;&#x26; r.result[&#x27;errmsg&#x27;]) {
          errorObject = r.result;
        } else {
          numberOfValidConnections = numberOfValidConnections + 1;
        }

        // We have authenticated all connections
        if(count == 0 &#x26;&#x26; numberOfValidConnections &#x3e; 0) {
          // Store the auth details
          addAuthSession(self.authStore, new AuthSession(db, username, password, options));
          // Return correct authentication
          callback(null, true);
        } else if(count == 0) {
          if(errorObject == null) errorObject = new MongoError(f(&#x22;failed to authenticate using mongocr&#x22;));
          callback(errorObject, false);
        }
      });
    }

    var _execute = function(_connection) {
      process.nextTick(function() {
        execute(_connection);
      });
    }

    _execute(connections.shift());
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setInterval(function() {
  _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
    console.log(&#x22;insert&#x22;)
  });
}, 1000)
// console.log(&#x22;---------------------------------- 0&#x22;)
// // Attempt authentication
// _server.<span class="apidocCodeKeywordSpan">auth</span>(&#x27;scram-sha-1&#x27;, &#x27;admin&#x27;, &#x27;root&#x27;, &#x27;root
&#x27;, function(err, r) {
//   console.log(&#x22;---------------------------------- 1&#x22;)
//   // console.dir(err)
//   // console.dir(r)
//
//   _server.insert(&#x27;test.test&#x27;, [{a:1}], function(err, r) {
//     console.log(&#x22;---------------------------------- 2&#x22;)
//     console.dir(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.sspi.prototype.logout" id="apidoc.element.mongodb-core.sspi.prototype.logout">
        function <span class="apidocSignatureSpan">mongodb-core.sspi.prototype.</span>logout
        <span class="apidocSignatureSpan">(dbName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (dbName) {
  this.authStore = this.authStore.filter(function(x) {
    return x.db != dbName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Ensure no new members are processed while logging out
this.authenticating = true;

// Remove from all auth providers (avoid any reaplication of the auth details)
var providers = Object.keys(this.authProviders);
for(var i = 0; i &#x3c; providers.length; i++) {
  this.authProviders[providers[i]].<span class="apidocCodeKeywordSpan">logout</span>(dbName);
}

// Now logout all the servers
var servers = this.connectedProxies.slice(0);
var count = servers.length;
if(count == 0) return callback();
var errors = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.sspi.prototype.reauthenticate" id="apidoc.element.mongodb-core.sspi.prototype.reauthenticate">
        function <span class="apidocSignatureSpan">mongodb-core.sspi.prototype.</span>reauthenticate
        <span class="apidocSignatureSpan">(server, connections, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reauthenticate = function (server, connections, callback) {
  var authStore = this.authStore.slice(0);
  var count = authStore.length;
  if(count == 0) return callback(null, null);
  // Iterate over all the auth details stored
  for(var i = 0; i &#x3c; authStore.length; i++) {
    this.auth(server, connections, authStore[i].db, authStore[i].username, authStore[i].password, authStore[i].options, function
(err) {
      count = count - 1;
      // Done re-authenticating
      if(count == 0) {
        callback(err, null);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function authenticateAgainstProvider(pool, connection, providers, cb) {
  // Finished re-authenticating against providers
  if(providers.length == 0) return cb();
  // Get the provider name
  var provider = pool.authProviders[providers.pop()];

  // Auth provider
  provider.<span class="apidocCodeKeywordSpan">reauthenticate</span>(write(pool), [connection], function(err) {
    // We got an error return immediately
    if(err) return cb(err);
    // Continue authenticating the connection
    authenticateAgainstProvider(pool, connection, providers, cb);
  });
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mongodb-core.utils" id="apidoc.module.mongodb-core.utils">module mongodb-core.utils</a></h1>


    <h2>
        <a href="#apidoc.element.mongodb-core.utils.copy" id="apidoc.element.mongodb-core.utils.copy">
        function <span class="apidocSignatureSpan">mongodb-core.utils.</span>copy
        <span class="apidocSignatureSpan">(fObj, tObj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copy = function (fObj, tObj) {
  tObj = tObj || {};
  for(var name in fObj) tObj[name] = fObj[name];
  return tObj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      // If we still have bytes to read on the current message
      if(self.bytesRead &#x3e; 0 &#x26;&#x26; self.sizeOfMessage &#x3e; 0) {
// Calculate the amount of remaining bytes
var remainingBytesToRead = self.sizeOfMessage - self.bytesRead;
// Check if the current chunk contains the rest of the message
if(remainingBytesToRead &#x3e; data.length) {
  // Copy the new data into the exiting buffer (should have been allocated when we know the message size)
  data.<span class="apidocCodeKeywordSpan">copy</span>(self.buffer, self.bytesRead);
  // Adjust the number of bytes read so it point to the correct index in the buffer
  self.bytesRead = self.bytesRead + data.length;

  // Reset state of buffer
  data = new Buffer(0);
} else {
  // Copy the missing part of the data into our current buffer
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.utils.debugOptions" id="apidoc.element.mongodb-core.utils.debugOptions">
        function <span class="apidocSignatureSpan">mongodb-core.utils.</span>debugOptions
        <span class="apidocSignatureSpan">(debugFields, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debugOptions = function (debugFields, options) {
  var finaloptions = {};
  debugFields.forEach(function(n) {
    finaloptions[n] = options[n];
  });

  return finaloptions;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.utils.getProperty" id="apidoc.element.mongodb-core.utils.getProperty">
        function <span class="apidocSignatureSpan">mongodb-core.utils.</span>getProperty
        <span class="apidocSignatureSpan">(obj, propName, fieldName, values, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getProperty = function (obj, propName, fieldName, values, func) {
  Object.defineProperty(obj, propName, {
    enumerable:true,
    get: function() {
      // Not parsed yet, parse it
      if(values[fieldName] == null &#x26;&#x26; obj.isParsed &#x26;&#x26; !obj.isParsed()) {
        obj.parse();
      }

      // Do we have a post processing function
      if(typeof func == &#x27;function&#x27;) return func(values[fieldName]);
      // Return raw value
      return values[fieldName];
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.utils.getSingleProperty" id="apidoc.element.mongodb-core.utils.getSingleProperty">
        function <span class="apidocSignatureSpan">mongodb-core.utils.</span>getSingleProperty
        <span class="apidocSignatureSpan">(obj, name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSingleProperty = function (obj, name, value) {
  Object.defineProperty(obj, name, {
    enumerable:true,
    get: function() {
      return value
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.utils.retrieveBSON" id="apidoc.element.mongodb-core.utils.retrieveBSON">
        function <span class="apidocSignatureSpan">mongodb-core.utils.</span>retrieveBSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retrieveBSON = function () {
  var BSON = require(&#x27;bson&#x27;);
  BSON.native = false;

  try {
    // try {
    //   BSON = require(&#x27;bson-ext&#x27;);
    //   BSON.native = true;
    // } catch(err) {
      var optionalBSON = require_optional(&#x27;bson-ext&#x27;);
      if(optionalBSON) {
        optionalBSON.native = true;
        return optionalBSON;
      }
    // }
  } catch(err) {}

  return BSON;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mongodb-core.utils.setProperty" id="apidoc.element.mongodb-core.utils.setProperty">
        function <span class="apidocSignatureSpan">mongodb-core.utils.</span>setProperty
        <span class="apidocSignatureSpan">(obj, prop, flag, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setProperty = function (obj, prop, flag, values) {
  Object.defineProperty(obj, prop.name, {
      enumerable:true,
      set: function(value) {
        if(typeof value != &#x27;boolean&#x27;) throw new Error(f(&#x22;%s required a boolean&#x22;, prop.name));
        // Flip the bit to 1
        if(value == true) values.flags |= flag;
        // Flip the bit to 0 if it&#x27;s set, otherwise ignore
        if(value == false &#x26;&#x26; (values.flags &#x26; flag) == flag) values.flags ^= flag;
        prop.value = value;
      }
    , get: function() { return prop.value; }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
